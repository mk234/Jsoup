function addListener(e,t,r,n){if(e.attachEvent)e.attachEvent("on"+t,r);else{if(!e.addEventListener)throw new Error("[SBrowser promo] Unsupported eventTarget!!!");e.addEventListener(t,r,!!n)}}function removeListener(e,t,r,n){if(e.detachEvent)e.detachEvent("on"+t,r);else{if(!e.addEventListener)throw new Error("[SBrowser promo] Unsupported eventTarget!!!");e.removeEventListener(t,r,!!n)}}Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,r=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,r.concat(Array.prototype.slice.call(arguments)))}}),String.prototype.trim=function(){return this.match(/^\s*([\s\S]*?)\s*$/)[1]},String.trim||(String.trim=function(e){return String.prototype.trim.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var r;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return-1;var o=+t||0;if(Math.abs(o)===Infinity&&(o=0),o>=i)return-1;for(r=Math.max(o>=0?o:i-Math.abs(o),0);r<i;){if(r in n&&n[r]===e)return r;r++}return-1}),function(e){function t(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],a(e,t(i,this),t(o,this))}function n(e){var t=this;null!==this._state?c(function(){var r=t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(i){return void e.reject(i)}e.resolve(n)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function i(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void a(t(r,e),t(i,this),t(o,this))}this._state=!0,this._value=e,s.call(this)}catch(n){o.call(this,n)}}function o(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function a(e,t,r){var n=!1;try{e(function(e){n||(n=!0,t(e))},function(e){n||(n=!0,r(e))})}catch(i){if(n)return;n=!0,r(i)}}var c=r.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var i=this;return new r(function(r,o){n.call(i,new function(e,t,r,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n}(e,t,r,o))})},r.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&h(arguments[0])?arguments[0]:arguments);return new r(function(t,r){function n(o,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){n(o,e)},r)}e[o]=s,0==--i&&t(e)}catch(c){r(c)}}if(0===e.length)return t([]);for(var i=e.length,o=0;o<e.length;o++)n(o,e[o])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,r){r(e)})},r.race=function(e){return new r(function(t,r){for(var n=0,i=e.length;n<i;n++)e[n].then(t,r)})},"undefined"!=typeof module&&module.exports?module.exports=r:e.Promise||(e.Promise=r)}(this),window.currentScript=function(){var e=document.createElement("a"),t="",r=document.currentScript||function(){var e=document.getElementsByTagName("script");return e[e.length-1]}();return e.href=r.src,t=e.pathname.replace(/^\/+/,""),e.path=("file:"==e.protocol?"http:":e.protocol)+"//"+e.host+"/"+t.split("/").slice(0,-1).join("/"),e}();var CookiesManager=function(e){function t(){return null===m&&(m=!(!e.JSON||!e.postMessage)),m}function r(){if(!h&&!u){h=!0;var t=e.document.createElement("iframe");t.style.width="0",t.style.height="0",t.style.margin="0",t.style.padding="0",t.style.position="absolute",t.style.visibility="hidden",t.style.top="0",t.style.left="0",t.style.border="none";var r=function(t,r){if(!u)for(u=t.contentWindow,addListener(e,"message",i,!0);d.length>0;)n.apply(null,d.shift())}.bind(null,t);addListener(t,"load",r,!1),addListener(t,"error",r,!1),t.src=c,setInterval(function(){document.body&&t.parentNode!=document.body&&document.body.appendChild(t)},500)}}function n(e,n,i){if(!t())throw new Error("[SBrowser promo][CookieManager] Unsupported feature!!!");if(u){var o=(new Date).getTime()+"."+Math.round(9999999999*Math.random());l[o]=i,u.postMessage(JSON.stringify({method:e,args:n,requestId:o}),a)}else d.push([].slice.call(arguments,0)),r()}function i(e){if(u&&e.origin==a)try{var t=JSON.parse(e.data||"")||{},r=t.requestId,n=t.result,i=t.error,o=l[r];delete l[r],o&&setTimeout(o.bind(null,i,n),0)}catch(s){}}function o(e){var t=(e.hasOwnProperty("name")?e.name:"")+"="+(e.hasOwnProperty("value")?e.value:"");if(e.expires){var r=e.expires;r instanceof Date?r=r.toUTCString():"string"==typeof r&&(r=new Date(r).toUTCString()),t+="; expires="+r}return document.cookie=t,t}function s(e){return o({name:e,value:"",expires:new Date(0)})}var a=("file:"==currentScript.protocol?"http:":currentScript.protocol)+"//"+currentScript.hostname,c=currentScript.path+"/cooker.html",h=!1,u=null,d=[],l={},m=null;return{set:function(e,r){if(t())e&&e.expires instanceof Date&&(e.expires=e.expires.toUTCString()),n("setCookie",[e],function(t,n){r&&setTimeout(r.bind(null,t,n),0),t||e&&e.name&&s(e.name)});else{var i=o(e);r&&setTimeout(r.bind(null,null,i),0)}},get:function(e,r){var i=function(e){for(var t=document.cookie.split(";"),r=null,n=0;n<t.length;n++){var i=t[n].split("=");if(i[0].replace(/^\s+|\s+$/g,"")==e){r=i[1].replace(/^\s+|\s+$/g,"");break}}return r}(e);t()?i&&r?setTimeout(r.bind(null,null,i),0):n("getCookie",[e],r):r&&setTimeout(r.bind(null,null,i),0)},remove:function(e,r){var i=s(e);t()?n("removeCookie",[e],r):r&&setTimeout(r.bind(null,null,i),0)}}}(window),OperatingSystem=function(e,t,r){this.name=e,this.version=t,this.humanName=r};OperatingSystem.prototype.compareVersions=function(e){return OperatingSystem.compareVersions(this.version,e)},OperatingSystem._detected={},OperatingSystem.resolveNtHumanName=function(e){return OperatingSystem.compareVersions(e,"5.1")<0?"Windows old":OperatingSystem.compareVersions(e,"6.0")<0?"Windows XP":OperatingSystem.compareVersions(e,"6.1")<0?"Windows Vista":OperatingSystem.compareVersions(e,"6.2")<0?"Windows 7":OperatingSystem.compareVersions(e,"6.3")<0?"Windows 8":OperatingSystem.compareVersions(e,"6.4")<0?"Windows 8.1":OperatingSystem.compareVersions(e,"10.1")<0?"Windows 10":"Windows new"},OperatingSystem.MATCH_REGEXP={},OperatingSystem._osList=[{name:"Windows Phone",version:OperatingSystem.MATCH_REGEXP,humanName:"Windows Phone",regexp:/Windows ?Phone( ?(OS ?)?([0-9\._\-]+))?/i,notRegexp:/(Xbox|Windows CE|Windows Mobile)/i},{name:"Windows",version:"5.1",humanName:OperatingSystem.resolveNtHumanName,regexp:/Windows XP/i,notRegexp:/(Xbox|Phone|Windows CE|Windows Mobile)/i},{name:"Windows",version:OperatingSystem.MATCH_REGEXP,humanName:OperatingSystem.resolveNtHumanName,regexp:/Windows ?NT ?([0-9\._\-]+)?/i,notRegexp:/(Xbox|Phone|Windows CE|Windows Mobile)/i},{name:"Windows",version:"0",humanName:"Windows old",regexp:/Windows/i,notRegexp:/(Xbox|Phone|Windows CE|Windows Mobile)/i},{name:"iOS",version:OperatingSystem.MATCH_REGEXP,humanName:"iOS",regexp:/iPhone ?OS ?([0-9\._\-]+)/i},{name:"iOS",version:OperatingSystem.MATCH_REGEXP,humanName:"iOS",regexp:/(iPhone)|(iPod)|(iPad).*OS ?([0-9\._\-]+)/i},{name:"iOS",version:"0",humanName:"iOS",regexp:/(iPhone)|(iPod)|(iPad)/i},{name:"Mac OS",version:OperatingSystem.MATCH_REGEXP,humanName:"Mac OS X",regexp:/Intel ?Mac OS X ([0-9\._\-]+)/i},{name:"Mac OS",version:"0",humanName:"Mac OS X",regexp:/(Intel ?Mac)|(Macintosh)/i},{name:"Android",version:OperatingSystem.MATCH_REGEXP,humanName:"Android",regexp:/Android( ?[0-9\._\-]+)?/i},{name:"Solaris",version:"0",humanName:"Solaris",regexp:/(Solaris)|(SunOS)/i},{name:"BSD",version:"0",humanName:"BSD",regexp:/(BSD)/i},{name:"Linux",version:"0",humanName:"Linux",regexp:/(Linux)|(X11)/i}],OperatingSystem.detect=function(e){if(e=e||window.navigator.userAgent,!this._detected[e])for(var t=this._detected[e]=new OperatingSystem("Unknown","0","Unknown"),r=0;r<this._osList.length;r++){var n=this._osList[r];if(n.regexp.test(e)&&(!n.notRegexp||!n.notRegexp.test(e))){switch(t.name=n.name,n.version){case OperatingSystem.MATCH_REGEXP:var i=e.match(n.regexp),o=(i[i.length-1]||"0").trim();OperatingSystem.compareVersions(o,"0")>0?t.version=o:t.version="0";break;default:t.version=n.version}t.version=OperatingSystem.normalizeVersionString(t.version),"function"==typeof n.humanName?t.humanName=n.humanName(t.version):t.humanName=n.humanName;break}}return this._detected[e]},OperatingSystem.normalizeVersionString=function(e){return(""+e).replace(/[\-_]/g,".").replace(/[^0-9\.]/g,"")},OperatingSystem.compareVersions=function(e,t){for(var r=e?OperatingSystem.normalizeVersionString(e).split("."):["0"],n=t?OperatingSystem.normalizeVersionString(t).split("."):["0"],i=Math.max(r.length,n.length);r.length<i;)r.push("0");for(;n.length<i;)n.push("0");for(var o=0;o<i;o++){var s=(parseInt(r[o],10)||0)-(parseInt(n[o],10)||0);if(0!==s)return s<0?-1:1}return 0};var Browser=function(e,t){this.name=e,this.version=t};Browser.prototype.compareVersions=function(e){return OperatingSystem.compareVersions(this.version,e)},Browser._detected={},Browser._detectors=[],Browser.addDetector=function(e){this._detectors.push(e)},Browser.parseVersion=function(e,t,r){var n=e.indexOf(r,t);return n<0&&(n=e.length),e.substring(t,n)},Browser.standardDetector=function(e,t,r){for(var n=0;n<e.length;n++){var i=r.match(e[n]);if(i&&i.length>1)return new Browser(t,i[1])}return!1},Browser.versionTagDetector=function(e,t,r,n){for(var i=0;i<e.length;i++){if(n.match(e[i]))for(var o=0;o<t.length;o++){var s=n.match(t[o]);if(s&&s.length>1)return new Browser(r,s[1])}}return!1},Browser.detect=function(e){if(e=e||window.navigator.userAgent,!this._detected[e]){try{for(var t=0;t<this._detectors.length;t++){var r=this._detectors[t](e);if(r){this._detected[e]=r;break}}}catch(n){}this._detected[e]=this._detected[e]||new Browser("Unknown","0","Tento prohlížeč je už zastaralý.",null)}return this._detected[e]},Browser.addDetector(Browser.standardDetector.bind(Browser,[/Seznam\.cz\/(([\.\-]?[0-9]+)+)/i],"Seznam.cz")),Browser.addDetector(Browser.standardDetector.bind(Browser,[/SznProhlizec\/(([\.\-]?[0-9]+)+)/i],"Seznam.cz")),Browser.addDetector(Browser.versionTagDetector.bind(Browser,[/Opera\/((\.?[0-9]+)+)/i,/Presto\/((\.?[0-9]+)+)/i],[/version\/((\.?[0-9]+)+)/i],"Opera")),Browser.addDetector(Browser.standardDetector.bind(Browser,[/Opera[\/ ]?((\.?[0-9]+)+)/i,/Presto[\/ ]?((\.?[0-9]+)+)/i],"Opera")),Browser.addDetector(Browser.standardDetector.bind(Browser,[/OPR\/((\.?[0-9]+)+)/i],"Opera")),Browser.addDetector(Browser.standardDetector.bind(Browser,[/Edge\/((\.?[0-9]+)+)/i],"Edge")),Browser.addDetector(Browser.standardDetector.bind(Browser,[/[;\(] ?MSIE ?((\.?[0-9]+)+)/i],"Internet Explorer")),Browser.addDetector(Browser.versionTagDetector.bind(Browser,[/Trident\/((\.?[0-9]+)+)/i],[/; rv:((\.?[0-9]+)+)/i],"Internet Explorer")),Browser.addDetector(Browser.standardDetector.bind(Browser,[/Firefox[\/ ]?((\.?[0-9]+)+)/i],"Firefox")),Browser.addDetector(Browser.standardDetector.bind(Browser,[/Chrome\/((\.?[0-9]+)+)/i,/Chromium\/((\.?[0-9]+)+)/i,/CriOS\/((\.?[0-9]+)+)/i],"Chrome")),Browser.addDetector(Browser.standardDetector.bind(Browser,[/Android[ \/]?((\.?[0-9]+)+).*Mobile ?(:?Safari)?/i],"Android")),Browser.addDetector(Browser.versionTagDetector.bind(Browser,[/Safari\/((\.?[0-9]+)+)/i],[/version\/((\.?[0-9]+)+)/i],"Safari"));var Client=function(e,t){this.operatingSystem=e,this.browser=t};Client.prototype.identification=function(){return this.operatingSystem.humanName+" (v"+this.operatingSystem.version+"), "+this.browser.name+" (v"+this.browser.version+")"},Client._detected={},Client.detect=function(e){return e=e||navigator.userAgent,this._detected[e]||(this._detected[e]=new Client(OperatingSystem.detect(e),Browser.detect(e))),this._detected[e]},function(){var e="sbrowser-promo-visible",t={_state:null,_reinsertInterval:null,_rootEl:null,_cfg:null,_autostart:!0,_ANALYTICS:{EVENT_NAME:"promo_sbrowser",DOWNLOAD_ACTION:"stahnout",CLOSE_ACTION:"zavrit",SHOW_ACTION:"zobrazeno"},_COOKIES:{BROWSER:"promo_sbrowser_3",SHOW:"promo_sbrowser_3_show",MAX_VIEWS:"promo_sbrowser_3_views",IS_SBROWSER:"sbrowser"},STATES:{NOT_RELEVANT:0,WAITING_FOR_SHOW:1,CLOSED:2,OPENED:3,FORCED:4},_setCookie:function(e,t){CookiesManager.set(e,t)},_getCookie:function(e,t){CookiesManager.get(e,t)},_showASAP:function(){if("complete"===document.readyState)this._insertBar();else{var e=this;addListener(window,"load",function(){"complete"===document.readyState&&e._insertBar()},!1)}},_create:function(e){e="function"==typeof e?e:function(){};var t=!1,r=function(){for(var e="",t="abcdefghijklmnopqrstuvwxyz",r=0;r<3;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e+=(new Date).getTime().toString()}(),n=function(){var t=document.createElement("div"),n={utm_source:window.location.host,utm_medium:"sbrowser-promo-bar",utm_os:this.client.operatingSystem.humanName,browser:this.client.browser.name+" "+this.client.browser.version},i=this._mkUrl(this._cfg.downloadUrl,n),o=xhr.response||xhr.responseText;t.innerHTML=o.replace(/%ID%/g,r).replace(/%PATH%/g,currentScript.path).replace(/%DOWNLOAD_URL%/g,i);try{var s=t.querySelector("#"+r+"_close");s&&(this._cfg.closeButton?addListener(s,"click",this._close.bind(this)):s.parentNode.removeChild(s));var a=t.querySelector("#"+r+"_download");a&&addListener(a,"click",function(e){e&&e.preventDefault(),this._download(),this._setCookie({name:this._COOKIES.BROWSER,value:"1",expires:this._cfg.expires.afterDownload}),setTimeout(function(){window.location.href=e.target.href},150)}.bind(this))}catch(c){throw c}e(t)}.bind(this);window.XMLHttpRequest?(xhr=new XMLHttpRequest,currentScript.hostname!=location.hostname&&window.XDomainRequest&&(xhr=new XDomainRequest,t=!0)):window.ActiveXObject&&(xhr=new ActiveXObject("Microsoft.XMLHTTP")),t?xhr.onload=n:xhr.onreadystatechange=function(){4===xhr.readyState&&n()},xhr.open("GET",currentScript.path+"/"+this._cfg.promo,!0),xhr.send()},_insertBar:function(){var t=function(e){this._rootEl=e,clearInterval(this._reinsertInterval),this._reinsertInterval=setInterval(this._insertBar.bind(this),500),this._sendAnalyticEvent(this._ANALYTICS.SHOW_ACTION),this.onCreate.apply(this.onCreate,[]),r()};t=t.bind(this);var r=function(){if(this._rootEl.parentNode!=document.body){var t=document.body.children[0],r=document.body;t?r.insertBefore(this._rootEl,t):r.appendChild(this._rootEl);try{var n=r.className||"";-1===n.indexOf(e)&&(r.className=(n+" "+e).trim())}catch(i){}}};r=r.bind(this),this._rootEl?r():this._create(t)},_mkUrl:function(e,t){var r=[];for(var n in t)r.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));if(r.length<=0)return e;var i=e.indexOf("#");return e.indexOf("?")>=0?i>=0?e.substring(0,i)+"&"+r.join("&")+e.substring(i,e.length):e+"&"+r.join("&"):i>=0?e.substring(0,i)+"?"+r.join("&")+e.substring(i,e.length):e+"?"+r.join("&")},_destroy:function(){if(this._cfg.closeButton){if(this._rootEl){clearInterval(this._reinsertInterval),this._rootEl.parentNode.removeChild(this._rootEl);try{for(var t=document.body,r=t.className||"",n=!1;r.indexOf(e)>=0;)r=r.replace(e,""),n=!0;n&&(t.className=r)}catch(i){}}this._setCookie({name:this._COOKIES.BROWSER,value:"1",expires:this._cfg.expires.afterClose}),this.onExit.apply(this.onExit,[])}},_sendAnalyticEvent:function(e){window.DOT&&DOT.hit("event",{d:{action:this._ANALYTICS.EVENT_NAME,type:e}})},_download:function(){this._sendAnalyticEvent(this._ANALYTICS.DOWNLOAD_ACTION)},_close:function(){this._sendAnalyticEvent(this._ANALYTICS.CLOSE_ACTION),this._destroy()},_init:function(){this.client||(this.client=Client.detect(),this._cfg=function(e){var t={promo:"promo-szn.html",downloadUrl:"https://www.seznam.cz/prohlizec/stahnout",shouldShow:!1,closeButton:!0,maxViews:2,expires:{afterClose:new Date((new Date).getTime()+18144e5),afterDownload:new Date((new Date).getTime()+31536e6),maxViews:new Date((new Date).getTime()+18144e5),year:new Date((new Date).getTime()+31536e6)}};switch(e.operatingSystem.name){case"Windows":case"Mac OS":break;default:return t}switch(e.browser.name){case"Seznam.cz":e.browser.compareVersions("4.1")<=0&&(t.promo="promo-old-szn.html",t.shouldShow=!0);break;case"Internet Explorer":e.browser.compareVersions("11")<=0&&(t.promo="promo-ie.html",t.shouldShow=!0),e.browser.compareVersions("10")<=0&&(t.promo="promo-ie-old.html",t.closeButton=!1,e.browser.compareVersions("8")<=0&&(t.maxViews=-1,t.expires.maxViews=new Date((new Date).getTime()+6048e5)));default:t.shouldShow=!1}return t}(this.client),"#show-sbrowser-promo"==window.location.hash?(this._showASAP(),this._state=this.STATES.FORCED):this._cfg.shouldShow?this._getCookie(this._COOKIES.SHOW,this._init_cb_show.bind(this)):this._state=this.STATES.NOT_RELEVANT)},_init_cb_show:function(e,t){if(t){var r=new Date(parseFloat(t));new Date>r?this._getCookie(this._COOKIES.MAX_VIEWS,this._init_cb_max_views.bind(this)):this._state=this.STATES.WAITING_FOR_SHOW}else this._setCookie({name:this._COOKIES.SHOW,value:new Date((new Date).getTime()+864e5).getTime(),expires:this._cfg.expires.year}),this._state=this.STATES.WAITING_FOR_SHOW},_init_cb_max_views:function(e,t){t=parseFloat(t),((t=isNaN(t)?this._cfg.maxViews:t)>0||-1===this._cfg.maxViews)&&(this._getCookie(this._COOKIES.BROWSER,this._init_cb_browser.bind(this)),t>0&&this._setCookie({name:this._COOKIES.MAX_VIEWS,value:(--t).toString(),expires:this._cfg.expires.maxViews}))},_init_cb_browser:function(e,t){t?this._state=this.STATES.CLOSED:(this._state=this.STATES.OPENED,this._showASAP())},create:function(){this.client=null,this._init()},getAutostart:function(){return this._autostart},setAutostart:function(e){this._autostart=!!e},onCreate:function(){},onExit:function(){},getHeight:function(){return this._rootEl?this._rootEl.offsetHeight:0},getState:function(){return this._state},addConsoleListener:function(e){},removeConsoleListener:function(e){},getConsoleData:function(){}};"function"==typeof t.STATES.__defineGetter__&&t.STATES.__defineGetter__("NEW_BROWSER",function(){return t.STATES.NOT_RELEVANT}),window.promoSbrowser=t,"complete"===document.readyState?t.getAutostart()&&t.create():document.addEventListener("readystatechange",function(e){"complete"===e.target.readyState&&t.getAutostart()&&t.create()},!1)}();