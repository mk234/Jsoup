{if(typeof SZN!="object"){var SZN={"NAME":"SZN"};};SZN.bind=function(obj,fnc){return fnc.bind(obj);};SZN.idGenerator=function(){this.idCnt=this.idCnt<10000000?this.idCnt:0;var ids="m"+new Date().getTime().toString(16)+"m"+this.idCnt.toString(16);this.idCnt++;return ids;};if(!Function.prototype.bind){Function.prototype.bind=function(thisObj){var fn=this;var args=Array.prototype.slice.call(arguments,1);return function(){return fn.apply(thisObj,args.concat(Array.prototype.slice.call(arguments)));};};};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(item,from){var len=this.length;var i=from||0;if(i<0){i+=len;}for(;i<len;i++){if(i in this&&this[i]===item){return i;}}return -1;};}if(!Array.indexOf){Array.indexOf=function(obj,item,from){return Array.prototype.indexOf.call(obj,item,from);};}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(item,from){var len=this.length;var i=from||len-1;if(i<0){i+=len;}for(;i>-1;i--){if(i in this&&this[i]===item){return i;}}return -1;};}if(!Array.lastIndexOf){Array.lastIndexOf=function(obj,item,from){return Array.prototype.lastIndexOf.call(obj,item,from);};}if(!Array.prototype.forEach){Array.prototype.forEach=function(cb,_this){var len=this.length;for(var i=0;i<len;i++){if(i in this){cb.call(_this,this[i],i,this);}}};}if(!Array.forEach){Array.forEach=function(obj,cb,_this){Array.prototype.forEach.call(obj,cb,_this);};}if(!Array.prototype.every){Array.prototype.every=function(cb,_this){var len=this.length;for(var i=0;i<len;i++){if(i in this&&!cb.call(_this,this[i],i,this)){return false;}}return true;};}if(!Array.every){Array.every=function(obj,cb,_this){return Array.prototype.every.call(obj,cb,_this);};}if(!Array.prototype.some){Array.prototype.some=function(cb,_this){var len=this.length;for(var i=0;i<len;i++){if(i in this&&cb.call(_this,this[i],i,this)){return true;}}return false;};}if(!Array.some){Array.some=function(obj,cb,_this){return Array.prototype.some.call(obj,cb,_this);};}if(!Array.prototype.map){Array.prototype.map=function(cb,_this){var len=this.length;var res=new Array(len);for(var i=0;i<len;i++){if(i in this){res[i]=cb.call(_this,this[i],i,this);}}return res;};}if(!Array.map){Array.map=function(obj,cb,_this){return Array.prototype.map.call(obj,cb,_this);};}if(!Array.prototype.filter){Array.prototype.filter=function(cb,_this){var len=this.length;var res=[];for(var i=0;i<len;i++){if(i in this){var val=this[i];if(cb.call(_this,val,i,this)){res.push(val);}}}return res;};}if(!Array.filter){Array.filter=function(obj,cb,_this){return Array.prototype.filter.call(obj,cb,_this);};}String.prototype.lpad=function(character,count){var ch=character||"0";var cnt=count||2;var s="";while(s.length<(cnt-this.length)){s+=ch;}s=s.substring(0,cnt-this.length);return s+this;};String.prototype.rpad=function(character,count){var ch=character||"0";var cnt=count||2;var s="";while(s.length<(cnt-this.length)){s+=ch;}s=s.substring(0,cnt-this.length);return this+s;};String.prototype.trim=function(){return this.match(/^\s*([\s\S]*?)\s*$/)[1];};Date.prototype._dayNames=["Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota","Neděle"];Date.prototype._dayNamesShort=["Po","Út","St","Čt","Pá","So","Ne"];Date.prototype._monthNames=["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"];Date.prototype._monthNamesShort=["Led","Úno","Bře","Dub","Kvě","Čer","Črc","Srp","Zář","Říj","Lis","Pro"];Date.prototype.format=function(str){var suffixes={"1":"st","2":"nd","3":"rd","21":"st","22":"nd","23":"rd","31":"st"};var result="";var escape=false;for(var i=0;i<str.length;i++){var ch=str.charAt(i);if(escape){escape=false;result+=ch;continue;}switch(ch){case "\\":if(escape){escape=false;result+=ch;}else{escape=true;}break;case "d":result+=this.getDate().toString().lpad();break;case "j":result+=this.getDate();break;case "w":result+=this.getDay();break;case "N":result+=this.getDay()||7;break;case "S":var d=this.getDate();result+=suffixes[d]||"th";break;case "D":result+=this._dayNamesShort[(this.getDay()||7)-1];break;case "l":result+=this._dayNames[(this.getDay()||7)-1];break;case "z":var t=this.getTime();var d=new Date(t);d.setDate(1);d.setMonth(0);var diff=t-d.getTime();result+=diff/(1000*60*60*24);break;case "W":var d=new Date(this.getFullYear(),this.getMonth(),this.getDate());var day=d.getDay()||7;d.setDate(d.getDate()+(4-day));var year=d.getFullYear();var day=Math.floor((d.getTime()-new Date(year,0,1,-6))/(1000*60*60*24));result+=(1+Math.floor(day/7)).toString().lpad();break;case "m":result+=(this.getMonth()+1).toString().lpad();break;case "n":result+=(this.getMonth()+1);break;case "M":result+=this._monthNamesShort[this.getMonth()];break;case "F":result+=this._monthNames[this.getMonth()];break;case "t":var t=this.getTime();var m=this.getMonth();var d=new Date(t);var day=0;do{day=d.getDate();t+=1000*60*60*24;d=new Date(t);}while(m==d.getMonth());;result+=day;break;case "L":var d=new Date(this.getTime());d.setDate(1);d.setMonth(1);d.setDate(29);result+=(d.getMonth()==1?"1":"0");break;case "Y":result+=this.getFullYear().toString().lpad();break;case "y":result+=this.getFullYear().toString().lpad().substring(2);break;case "a":result+=(this.getHours()<12?"am":"pm");break;case "A":result+=(this.getHours()<12?"AM":"PM");break;case "G":result+=this.getHours();break;case "H":result+=this.getHours().toString().lpad();break;case "g":result+=this.getHours()%12;break;case "h":result+=(this.getHours()%12).toString().lpad();break;case "i":result+=this.getMinutes().toString().lpad();break;case "s":result+=this.getSeconds().toString().lpad();break;case "Z":result+=-60*this.getTimezoneOffset();break;case "O":case "P":var base=this.getTimezoneOffset()/-60;var o=Math.abs(base).toString().lpad();if(ch=="P"){o+=":";}o+="00";result+=(base>=0?"+":"-")+o;break;case "U":result+=this.getTime()/1000;break;case "u":result+="0";break;case "c":result+=arguments.callee.call(this,"Y-m-d")+"T"+arguments.callee.call(this,"H:i:sP");break;case "r":result+=arguments.callee.call(this,"D, j M Y H:i:s O");break;default:result+=ch;break;}}return result;};if(!window.console){window.console={"log":function(){}};}SZN.ClassMaker={};SZN.ClassMaker.VERSION="4.2";SZN.ClassMaker.NAME="ClassMaker";SZN.ClassMaker.CLASS="static";SZN.ClassMaker.copyObj=null;SZN.ClassMaker.makeClass=function(params){var p=this._makeDefaultParams(params);if(p.CLASS=="static"){return this.makeStatic(p);}var constructor=function(){var inicializator=false;if("$constructor" in arguments.callee.prototype){inicializator=arguments.callee.prototype.$constructor;}else{if(p.NAME in arguments.callee.prototype){inicializator=arguments.callee.prototype[p.NAME];}}if(inicializator){inicializator.apply(this,arguments);}};constructor.destroy=this._destroy;return this._addConstructorProperties(constructor,p);};SZN.ClassMaker.makeSingleton=function(params){var p=this._makeDefaultParams(params);var constructor=function(){if(constructor._instance){throw new Error("Cannot instantiate singleton class");}var inicializator=false;if("$constructor" in arguments.callee.prototype){inicializator=arguments.callee.prototype.$constructor;}if(inicializator){inicializator.apply(this,arguments);}};constructor._instance=null;constructor.getInstance=this._getInstance;return this._addConstructorProperties(constructor,p);};SZN.ClassMaker.makeInterface=function(params){var p=this._makeDefaultParams(params);var constructor=function(){throw new Error("Cannot instantiate interface");};return this._addConstructorProperties(constructor,p);};SZN.ClassMaker.makeStatic=function(params){var p=this._makeDefaultParams(params);var obj={};obj.VERSION=p.VERSION;obj.NAME=p.NAME;return obj;};SZN.ClassMaker._makeDefaultParams=function(params){params.NAME=params.NAME||false;params.VERSION=params.VERSION||"1.0";params.EXTEND=params.EXTEND||false;params.IMPLEMENT=params.IMPLEMENT||[];params.DEPEND=params.DEPEND||[];params.CLASS=params.CLASS;if(!(params.IMPLEMENT instanceof Array)){params.IMPLEMENT=[params.IMPLEMENT];}this._preMakeTests(params);return params;};SZN.ClassMaker._preMakeTests=function(params){if(!params.NAME){throw new Error("No NAME passed to SZN.ClassMaker.makeClass()");}if(!this.copyObj&&SZN.ObjCopy){this.copyObj=new SZN.ObjCopy();}var result=false;if(result=this._testDepend(params.DEPEND)){throw new Error("Dependency error in class "+params.NAME+" ("+result+")");}};SZN.ClassMaker._addConstructorProperties=function(constructor,params){for(var p in params){constructor[p]=params[p];}this._setInheritance(constructor);constructor.prototype.sConstructor=constructor;constructor.prototype.constructor=constructor;constructor.prototype.callSuper=this._callSuper;constructor.prototype.$super=this._$super;return constructor;};SZN.ClassMaker._getInstance=function(){if(!this._instance){this._instance=new this();}return this._instance;};SZN.ClassMaker._destroy=function(obj){for(var p in obj){obj[p]=null;};};SZN.ClassMaker._setInheritance=function(constructor){if(constructor.EXTEND){this._makeInheritance(constructor,constructor.EXTEND);}for(var i=0;i<constructor.IMPLEMENT.length;i++){this._makeInheritance(constructor,constructor.IMPLEMENT[i],true);}};SZN.ClassMaker._makeInheritance=function(constructor,parent,noSuper){for(var p in parent.prototype){var item=parent.prototype[p];if(typeof (item)!="function"){continue;}if(!item.owner){item.owner=parent;}}if(!noSuper){var tmp=function(){};tmp.prototype=parent.prototype;constructor.prototype=new tmp();if(this.copyObj!=null){for(var i in parent.prototype){if(typeof parent.prototype[i]=="object"){constructor.prototype[i]=this.copyObj.copy(parent.prototype[i]);}}}return;}for(var p in parent.prototype){if(typeof parent.prototype[p]=="object"){if(this.copyObj!=null){constructor.prototype[p]=this.copyObj.copy(parent.prototype[p]);}}else{if(noSuper&&((p=="$constructor")||(p=="$destructor"))){continue;}constructor.prototype[p]=parent.prototype[p];}}};SZN.ClassMaker._testDepend=function(depend){var out=true;for(var i=0;i<depend.length;i++){var item=depend[i];if(!item.sClass){return "Unsatisfied dependency";}if(!item.ver){return "Version not specified in dependency";}var depMajor=item.sClass.VERSION.split(".")[0];var claMajor=item.ver.split(".")[0];if(depMajor!=claMajor){return "Version conflict in "+item.sClass.NAME;}}return false;};SZN.ClassMaker._callSuper=function(methodName,callingFunction){var owner=callingFunction.owner||this.constructor;var sup=owner.EXTEND;if(!sup){throw new Error("\"No super-class available\"");}var method=sup.prototype[methodName];if(!method||(typeof method!="function")){throw new Error("Super-class doesn't have method '"+methodName+"'");}var mySelf=this;return function(){return method.apply(mySelf,arguments);};};SZN.ClassMaker._$super=function(){var caller=arguments.callee.caller;if(!caller){throw new Error("Function.prototype.caller not supported");}var owner=caller.owner||this.constructor;var callerName=false;for(var name in owner.prototype){if(owner.prototype[name]==caller){callerName=name;}}if(!callerName){throw new Error("Cannot find supplied method in constructor");}var parent=owner.EXTEND;if(!parent){throw new Error("No super-class available");}if(!parent.prototype[callerName]){throw new Error("Super-class doesn't have method '"+callerName+"'");}var func=parent.prototype[callerName];return func.apply(this,arguments);};SZN.Events=SZN.ClassMaker.makeClass({"NAME":"Events","VERSION":"2.4","CLASS":"static"});SZN.Events.eventFolder={};SZN.Events._domReadyTimer=null;SZN.Events._domReadyCallback=[];SZN.Events._domReadyAlreadyRun=false;SZN.Events._windowLoadListenerId=false;SZN.Events.onDomReady=function(obj,func){SZN.Events._domReadyCallback[SZN.Events._domReadyCallback.length]={"obj":obj,"func":func};SZN.Events._onDomReady();};SZN.Events._onDomReady=function(){if((/Safari/i.test(navigator.userAgent))||(/WebKit|Khtml/i.test(navigator.userAgent))){SZN.Events._domReadyTimer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(SZN.Events._domReadyTimer);SZN.Events._domReady();}},10);}else{if(document.all&&!window.opera){if(window.parent==window){try{document.documentElement.doScroll("left");}catch(error){setTimeout(arguments.callee,1);return;}SZN.Events._domReady();}else{SZN.Events._windowLoadListenerId=SZN.Events.addListener(window,"load",window,function(){SZN.Events._domReady();});}}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",SZN.Events._domReady,false);}else{SZN.Events._windowLoadListenerId=SZN.Events.addListener(window,"load",window,function(){SZN.Events._domReady();});}}}};SZN.Events._domReady=function(){if(!SZN.Events._domReadyAlreadyRun){SZN.Events._domReadyAlreadyRun=true;if(document.addEventListener){document.removeEventListener("DOMContentLoaded",SZN.Events._domReady,true);}if(SZN.Events._windowLoadListenerId){SZN.Events.removeListener(SZN.Events._windowLoadListenerId);SZN.Events._windowLoadListenerId=false;}for(var i=0;i<SZN.Events._domReadyCallback.length;i++){var callback=SZN.Events._domReadyCallback[i];if(typeof callback.func=="string"){callback.obj[callback.func]();}else{callback.func.apply(callback.obj,[]);}}SZN.Events._domReadyCallback=[];}};SZN.Events.destructor=function(){this.removeAllListeners();this.sConstructor.destroy(this);};SZN.Events.getEvent=function(e){return e||window.event;};SZN.Events.getTarget=function(e){var e=e||window.event;return e.target||e.srcElement;};SZN.Events.addListener=function(elm,eType,obj,func,capture){var capture=capture||false;var method=null;var toFold=null;if(func){if(typeof (func)=="string"){if(typeof (obj[func])=="function"){method=this._getMethod(obj,func,elm);toFold=this._addListener(elm,eType,method,capture);}else{throw new Error("Events.addListener: arguments[3] must be method of arguments[2]");}}else{method=this._getMethod(obj,func,elm);toFold=this._addListener(elm,eType,method,capture);}}else{toFold=this._addListener(elm,eType,obj,capture);}toFold.push(obj);toFold.push(func);return this._storeToFolder(toFold);};SZN.Events._addListener=function(elm,eType,func,capture){if(elm){if(document.addEventListener){elm.addEventListener(eType,func,capture);}else{if(document.attachEvent){elm.attachEvent("on"+eType,func);}}}return [elm,eType,func,capture];};SZN.Events._getMethod=function(obj,func,elm){if(typeof (func)=="string"){return function(e){return obj[func].apply(obj,[e,elm]);};}else{return function(e){return func.apply(obj,[e,elm]);};}};SZN.Events._storeToFolder=function(data){var id=SZN.idGenerator();this.eventFolder[id]={};this.eventFolder[id].trg=data[0];this.eventFolder[id].typ=data[1];this.eventFolder[id].action=data[2];this.eventFolder[id].capture=data[3];this.eventFolder[id].obj=data[4];this.eventFolder[id].func=data[5];return id;};SZN.Events.removeListener=function(elm,eType,obj,func,capture,cached){var capture=arguments[4]||false;var cached=arguments[5]||false;if(arguments.length==1||typeof (arguments[0])=="string"){cached=arguments[0];}if(typeof cached=="string"){return this._removeById(cached);}else{if(typeof obj=="function"){return this._removeListener(elm,eType,obj,capture);}else{throw new Error("Events.removeListener: wrong arguments");}}};SZN.Events._removeListener=function(elm,eType,func,capture){if(document.removeEventListener){if(window.opera&&(elm==window)){elm=document;}elm.removeEventListener(eType,func,capture);}else{if(document.detachEvent){elm.detachEvent("on"+eType,func);}}return 0;};SZN.Events._removeById=function(cached){try{var obj=this.eventFolder[cached];this._removeListener(obj.trg,obj.typ,obj.action,obj.capture);this.eventFolder[cached]=null;delete (this.eventFolder[cached]);}catch(e){return 1;}return 0;};SZN.Events.removeAllListeners=function(){for(var p in this.eventFolder){this._removeById(p);}};SZN.Events.stopEvent=function(e){var e=e||window.event;if(e.stopPropagation){e.stopPropagation();}else{e.cancelBubble=true;}};SZN.Events.cancelDef=function(e){var e=e||window.event;if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}};SZN.Events.addTimeFunction=function(owner,handleFuncName,exeFunc,exeObj){if(!!exeObj){owner[handleFuncName]=function(){return exeFunc.apply(exeObj,[]);};}else{owner[handleFuncName]=function(){return exeFunc.apply(owner,[]);};}};SZN.Events.getInfo=function(){var output=[];var tmpObjectFolder=[];var tmpEventFolder=[];for(var i in SZN.Events.eventFolder){var o=SZN.Events.eventFolder[i];var index=tmpObjectFolder.indexOf(o.trg);if(index==-1){index=tmpObjectFolder.push(o.trg)-1;tmpEventFolder[index]=[];}tmpEventFolder[index].push(o);}for(var i in tmpObjectFolder){var listeners=[];for(var j in tmpEventFolder[i]){var o=tmpEventFolder[i][j];var obj=window;var func=null;if(o.func){obj=o.obj;func=o.func;}else{func=o.action;}listeners.push({"sType":o.typ,"sFunction":(obj!=window&&obj.constructor?"["+obj.constructor.NAME+"]":"")+(typeof (func)=="string"?"."+func+" = "+obj[func].toString():" "+func.toString()),"bRemoved":false});}output.push({"nNode":tmpObjectFolder[i],"sSource":"JAK","aListeners":listeners});}tmpObjectFolder=null;tmpEventFolder=null;return output;};SZN.Browser=SZN.ClassMaker.makeClass({"NAME":"Browser","VERSION":"2.4","CLASS":"static"});SZN.Browser.platform="";SZN.Browser.client="";SZN.Browser.klient="";SZN.Browser.version=0;SZN.Browser.agent="";SZN.Browser.mouse={};SZN.Browser._getPlatform=function(){if((this._agent.indexOf("X11")!=-1)||(this._agent.indexOf("Linux")!=-1)){return "nix";}else{if(this._agent.indexOf("Mac")!=-1){return "mac";}else{if(this._agent.indexOf("Win")!=-1){return "win";}else{return "oth";}}}};SZN.Browser._getKlient=function(){if(window.opera){return "opera";}else{if(window.chrome){return "chrome";}else{if(document.attachEvent&&(typeof navigator.systemLanguage!="undefined")){return "ie";}else{if(document.getAnonymousElementByAttribute){return "gecko";}else{if(this._agent.indexOf("KHTML")){if(this._vendor=="KDE"){return "konqueror";}else{return "safari";}}else{return "oth";}}}}}};SZN.Browser._getMouse=function(){var left;var right;var middle;if((SZN.Browser.client=="ie")||(SZN.Browser.client=="konqueror")){left=1;middle=4;right=2;}else{if((SZN.Browser.client=="opera")&&(SZN.Browser.version>7)&&(SZN.Browser.version<9)){left=1;middle=4;right=2;}else{if(SZN.Browser.client=="safari"){if(parseInt(SZN.Browser.version)>2){left=0;middle=0;right=2;}else{left=1;middle=1;right=2;}}else{left=0;middle=1;right=2;}}}return {"left":left,"right":right,"middle":middle};};SZN.Browser._getVersion=function(){var out=0;var fncName="_get_"+this.client+"_ver";if(typeof this[fncName]=="function"){return this[fncName]();}else{return 0;}};SZN.Browser._get_ie_ver=function(){if(typeof Function.prototype.call!="undefined"){if(window.XDomainRequest){return "8";}else{if(window.XMLHttpRequest){return "7";}else{if(typeof document.doctype=="object"){return "6";}else{return "5.5";}}}}else{return "5.0";}};SZN.Browser._get_opera_ver=function(){if(window.opera.version){return window.opera.version();}else{if(document.createComment){return "7";}else{return "6";}}};SZN.Browser._get_gecko_ver=function(){if(document.getBoxObjectFor===undefined&&navigator.geolocation){return "3.6";}else{if(navigator.geolocation){return "3.5";}else{if(document.getElementsByClassName){return "3";}else{if(window.external){return "2";}else{return "1.5";}}}}};SZN.Browser._get_konqueror_ver=function(){var num=this._agent.indexOf("KHTML")+6;var part=this._agent.substring(num);var end=part.indexOf(" ");var x=part.substring(0,end-2);return x;};SZN.Browser._get_safari_ver=function(){var ver=this._agent.match(/version\/([0-9]+)/i);return (ver?ver[1]:"1");};SZN.Browser._get_chrome_ver=function(){var ver=this._agent.match(/Chrome\/([0-9]+)/i);return (ver?ver[1]:null);};SZN.Browser.getBrowser=function(){this._agent=this.agent=navigator.userAgent;this._platform=navigator.platform;this._vendor=navigator.vendor;this.platform=this._getPlatform();this.client=this._getKlient();this.klient=this.client;this.version=this._getVersion();this.mouse=this._getMouse();};SZN.Browser.getBrowser();SZN.Components=SZN.ClassMaker.makeClass({"NAME":"Components","VERSION":"1.2","CLASS":"class"});SZN.Components.prototype.hasComponents=function(){if((this.components instanceof Array)&&this.components.length){return true;}else{return false;}};SZN.Components.prototype.addAllComponents=function(){if(!this.hasComponents()){return false;}for(var i=0;i<this.components.length;i++){this._addComponent(this.components[i]);}return true;};SZN.Components.prototype.addNewComponent=function(component){if(!this.hasComponents()){this.components=new Array();}this.components.push(component);this._addComponent(component);};SZN.Components.prototype._addComponent=function(component){if(typeof component.part!="undefined"){if(typeof component.name=="undefined"){component.name=component.part.NAME.substring(0,1).toLowerCase();component.name+=component.part.NAME.substring(1);}if(typeof component.setting!="undefined"){this[component.name]=new component.part(this,component.name,component.setting);}else{this[component.name]=new component.part(this,component.name);}}};SZN.Components.prototype.registredMethod=function(owner){var field=[this,this.sConstructor];for(var i=0;i<field.length;i++){var obj=field[i];for(var j in obj){if(obj[j]===null)continue;if(typeof obj[j]=="undefined")continue;if((typeof obj[j].access!="undefined")&&(obj[j].access.indexOf("public")==0)){var name=this._createMethodName(obj,j);if(typeof owner[name]=="undefined"){owner[name]=(obj==this.sConstructor)?this.sConstructor[j]:SZN.bind(this,this[j]);}else{throw new Error("registredMethod: method \""+name+"\" already exist!");}}}}};SZN.Components.prototype.unregistredMethod=function(owner){var field=[this,this.sConstructor];for(var i=0;i<field.length;i++){var obj=field[i];for(var j in obj){if(obj[j]===null)continue;if(typeof obj[j]=="undefined")continue;if((typeof obj[j].access!="undefined")&&(obj[j].access.indexOf("public")==0)){var name=this._createMethodName(obj,j);if(typeof owner[name]!="undefined"){delete (owner[name]);}}}}};SZN.Components.prototype._createMethodName=function(obj,methodName){var nameFirstChar=methodName.substring(0,1).toUpperCase();var nameNext=methodName.substring(1);var mods=obj[methodName].access.replace(/[ ]{2,}/gi," ").split(" ");if(mods.length>1){var name=mods[1];}else{var namePrefix=(obj==this.sConstructor)?obj.NAME:this._name;var name=namePrefix+nameFirstChar+nameNext;}return name;};SZN.Components.prototype.getMain=function(){var obj=this;while(typeof obj.TOP_LEVEL=="undefined"){if(typeof obj._owner=="undefined"){throw new Error("can't find TOP LEVEL Class");}else{obj=obj._owner;}}return obj;};SZN.Components.prototype.callChildDestructor=function(){this.inDestruction=true;if(!this.hasComponents()){return false;}for(var i=0;i<this.components.length;i++){var cName=this.components[i].name;if(this[cName]==null){continue;}if((typeof this[cName].CLASS!="undefined")&&(typeof this[cName].inDestruction!="boolean")){var name="$destructor";if((typeof this[cName][name]!="undefined")&&(typeof this[cName][name]=="function")){this[cName][name]();}this[cName]=null;}}};SZN.Components.prototype.removeComponent=function(component,withDestruction){for(var i=0;i<this.components.length;i++){var c=this.components[i];if(component==c.name||component==this[c.name]){if(withDestruction&&(typeof this[c.name].$destructor=="function")){this[c.name].$destructor();}this[c.name]=null;c=null;this.components.splice(i,1);break;}}};SZN.Dom=SZN.ClassMaker.makeClass({"NAME":"Dom","VERSION":"3.6","CLASS":"static"});SZN.cEl=function(tagName,id,className,styleObj,doc){var d=doc||document;var node=d.createElement(tagName);if(arguments.length==1){return node;}if(id){node.id=id;}if(className){node.className=className;}if(styleObj){SZN.Dom.setStyle(node,styleObj);}return node;};SZN.cTxt=function(str,doc){var d=doc||document;return d.createTextNode(str);};SZN.gEl=function(ids){if(typeof (ids)=="string"){return document.getElementById(ids);}else{return ids;}};SZN.Dom.append=function(){for(var i=0;i<arguments.length;i++){var arr=arguments[i];var head=arr[0];for(var j=1;j<arr.length;j++){head.appendChild(arr[j]);}}};SZN.Dom.hasClass=function(element,className){var arr=element.className.split(" ");for(var i=0;i<arr.length;i++){if(arr[i]==className){return true;}}return false;};SZN.Dom.addClass=function(element,className){if(SZN.Dom.hasClass(element,className)){return;}element.className+=" "+className;};SZN.Dom.removeClass=function(element,className){var names=element.className.split(" ");var newClassArr=[];for(var i=0;i<names.length;i++){if(names[i]!=className){newClassArr.push(names[i]);}}element.className=newClassArr.join(" ");};SZN.Dom.clear=function(element){while(element.firstChild){element.removeChild(element.firstChild);}};SZN.Dom.getDocSize=function(){var x=0;var y=0;if(document.compatMode!="BackCompat"){if(document.documentElement.clientWidth&&SZN.Browser.klient!="opera"){x=document.documentElement.clientWidth;y=document.documentElement.clientHeight;}else{if(SZN.Browser.klient=="opera"){if(parseFloat(SZN.Browser.version)<9.5){x=document.body.clientWidth;y=document.body.clientHeight;}else{x=document.documentElement.clientWidth;y=document.documentElement.clientHeight;}}}if((SZN.Browser.klient=="safari")||(SZN.Browser.klient=="konqueror")){y=window.innerHeight;}}else{x=document.body.clientWidth;y=document.body.clientHeight;}return {"width":x,"height":y};};SZN.Dom.getBoxPosition=function(obj,ref){var top=0;var left=0;var refBox=ref||obj.ownerDocument.body;if(obj.getBoundingClientRect&&!ref){var de=document.documentElement;var box=obj.getBoundingClientRect();var scroll=SZN.Dom.getBoxScroll(obj);return {"left":box.left+scroll.x-de.clientLeft,"top":box.top+scroll.y-de.clientTop};}while(obj&&obj!=refBox){top+=obj.offsetTop;left+=obj.offsetLeft;if((SZN.Browser.client=="gecko"&&SZN.Browser.version<3)||SZN.Browser.client=="safari"){if(SZN.Dom.getStyle(obj,"position")=="fixed"){var scroll=SZN.Dom.getScrollPos();top+=scroll.y;left+=scroll.x;break;}}obj=obj.offsetParent;}return {"top":top,"left":left};};SZN.Dom.getFullBoxPosition=function(obj,parent,fixed){var pos=SZN.Dom.getBoxPosition(obj,parent,fixed);var scroll=SZN.Dom.getBoxScroll(obj,parent,fixed);pos.left-=scroll.x;pos.top-=scroll.y;return {"left":pos.left,"top":pos.top};};SZN.Dom.getBoxScroll=function(obj,ref,fixed){var x=0;var y=0;var cur=obj.parentNode;var limit=ref||obj.ownerDocument.documentElement;var fix=false;while(1){if(SZN.Browser.client=="opera"&&SZN.Dom.getStyle(cur,"display")!="block"){cur=cur.parentNode;continue;}if(SZN.Browser.client=="opera"&&SZN.Browser.version<9.5&&cur==document.body){cur=cur.parentNode;continue;}if(fixed&&SZN.Dom.getStyle(cur,"position")=="fixed"){fix=true;}if(!fix){x+=cur.scrollLeft;y+=cur.scrollTop;}if(cur==limit){break;}cur=cur.parentNode;if(!cur){break;}}return {"x":x,"y":y};};SZN.Dom.getScrollPos=function(){if(document.documentElement.scrollTop||document.documentElement.scrollLeft){var ox=document.documentElement.scrollLeft;var oy=document.documentElement.scrollTop;}else{if(document.body.scrollTop||document.body.scrollLeft){var ox=document.body.scrollLeft;var oy=document.body.scrollTop;}else{var ox=0;var oy=0;}}return {"x":ox,"y":oy};};SZN.Dom.getStyle=function(elm,property){if(document.defaultView&&document.defaultView.getComputedStyle){var cs=elm.ownerDocument.defaultView.getComputedStyle(elm,"");if(!cs){return false;}return cs[property];}else{return elm.currentStyle[property];}};SZN.Dom.setStyle=function(elm,style){for(var name in style){elm.style[name]=style[name];}};SZN.Dom.writeStyle=function(css){var node=SZN.cEl("style");node.type="text/css";if(node.styleSheet){node.styleSheet.cssText=css;}else{node.appendChild(SZN.cTxt(css));}var head=document.getElementsByTagName("head");if(head.length){head=head[0];}else{head=SZN.cEl("head");document.documentElement.appendChild(head,document.body);}head.appendChild(node);return node;};SZN.Dom.elementsHider=function(obj,elements,action){var elems=elements;if(!elems){elems=["select","object","embed","iframe"];}var hidden=arguments.callee.hidden;if(hidden){hidden.forEach(function(node){node.style.visibility="visible";});arguments.callee.hidden=[];}function verifyParent(node){var ok=false;var cur=node;while(cur.parentNode&&cur!=document){if(cur==obj){ok=true;}cur=cur.parentNode;}return ok;}if(action=="hide"){if(typeof obj=="string"){obj=SZN.gEl(obj);}var hidden=[];var box=this.getBoxPosition(obj);box.width=obj.offsetWidth+box.left;box.height=obj.offsetHeight+box.top;for(var e=0;e<elems.length;++e){var elm=document.getElementsByTagName(elems[e]);for(var f=0;f<elm.length;++f){var node=this.getBoxPosition(elm[f]);if(verifyParent(elm[f])){continue;}node.width=elm[f].offsetWidth+node.left;node.height=elm[f].offsetHeight+node.top;if(!((box.left>node.width)||(box.width<node.left)||(box.top>node.height)||(box.height<node.top))){elm[f].style.visibility="hidden";hidden.push(elm[f]);}}}arguments.callee.hidden=hidden;}};SZN.Dom.getElementsByClass=function(searchClass,node,tag){if(document.getElementsByClassName&&!tag){var elm=node||document;return SZN.Dom.arrayFromCollection(elm.getElementsByClassName(searchClass));}if(document.querySelectorAll&&!tag){var elm=node||document;return SZN.Dom.arrayFromCollection(elm.querySelectorAll("."+searchClass));}var classElements=[];var node=node||document;var tag=tag||"*";var els=node.getElementsByTagName(tag);var elsLen=els.length;var pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)");for(var i=0,j=0;i<elsLen;i++){if(pattern.test(els[i].className)){classElements[j]=els[i];j++;}}return classElements;};SZN.Dom.arrayFromCollection=function(col){var result=[];try{result=Array.prototype.slice.call(col);}catch(e){for(var i=0;i<col.length;i++){result.push(col[i]);}}finally{return result;}};SZN.Dom.separateCode=function(str){var js=[];var out={};var s=str.replace(/<script.*?>([\s\S]*?)<\/script>/g,function(tag,code){js.push(code);return "";});return [s,js.join("\n")];};SZN.Dom.shiftBox=function(box){var dx=0;var dy=0;var pos=SZN.Dom.getBoxPosition(box);var scroll=SZN.Dom.getScrollPos();pos.left-=scroll.x;pos.top-=scroll.y;var port=SZN.Dom.getDocSize();var w=box.offsetWidth;var h=box.offsetHeight;var diff=pos.top+h-port.height;if(diff>0){pos.top-=diff;dy-=diff;}var diff=pos.left+w-port.width;if(diff>0){pos.left-=diff;dx-=diff;}var diff=pos.top;if(diff<0){pos.top-=diff;dy-=diff;}var diff=pos.left;if(diff<0){pos.left-=diff;dx-=diff;}return [dx,dy];};SZN.ObjLib=SZN.ClassMaker.makeClass({"NAME":"ObjLib","VERSION":"2.0","CLASS":"class"});SZN.ObjLib.prototype.$constructor=function(){this._options={"functionResistant":false,"recursionResistant":false,"depthResistant":false,"sortedSerialization":false,"showFlag":false,"depth":200};};SZN.ObjLib.prototype.$destructor=function(){};SZN.ObjLib.prototype.reSetOptions=function(newOptions,set){if(!newOptions){return this._options;}var out={};for(var i in this._options){if(set&&newOptions[i]){this._options[i]=newOptions[i];}out[i]=newOptions[i]?newOptions[i]:this._options[i];}return out;};SZN.ObjLib.prototype.pretty=function(str,sep){var arr=str.toString().split("");var newline=this._isIE()?"\n\r":"\n";var tab=sep?sep:"\t";var ptr=0;var depth=0;var inSpecial="";function countBackslashes(){var cnt=0;var ptr2=ptr-1;while(ptr2>=0&&arr[ptr2]=="\\"){cnt++;ptr2--;}return cnt;}while(ptr<arr.length){var ch=arr[ptr];switch(ch){case "\"":if(inSpecial=="re"){break;}var num=countBackslashes();if(!(num&1)){inSpecial=(inSpecial?"":"str");}break;case "/":if(inSpecial=="str"){break;}var num=countBackslashes();if(!(num&1)){inSpecial=(inSpecial?"":"re");}break;case ",":if(!inSpecial){arr.splice(++ptr,0,newline);for(var i=0;i<depth;i++){arr.splice(++ptr,0,tab);}}break;case "{":case "[":if(!inSpecial){depth++;arr.splice(++ptr,0,newline);for(var i=0;i<depth;i++){arr.splice(++ptr,0,tab);}}break;case "}":case "]":if(!inSpecial){arr.splice(ptr++,0,newline);depth--;for(var i=0;i<depth;i++){arr.splice(ptr++,0,tab);}}break;}ptr++;}return arr.join("");};SZN.ObjLib.prototype.serialize=function(objToSource,options){var deepFlag=0;var startString="{";var endString="}";var propertySep=":";var propertyEnd=",";var mySelf=this;var output="";var firstStep=true;var cache=[];var mOptions=this.reSetOptions(options);var mySource=function(obj){if(mOptions.depth&&(mOptions.depth<deepFlag)){if(!mOptions.depthResistant){throw new Error("Serialize: structure is too depth.");}else{return "\"[max depth overrun]\"";}}if(cache.indexOf(obj)!=-1){if(!mOptions.recursionResistant){throw new Error("serialize: Circular reference encountered");return null;}else{return "\"[circular reference found]\"";}}if(typeof arguments[1]!="undefined"){var propName=arguments[1];}else{var propName=false;}if(!(obj instanceof Object)){switch(typeof obj){case "string":return "\""+mySelf._formatString(obj)+"\"";break;case "undefined":return obj;break;default:return obj;break;}}else{cache.push(obj);var builtIn=mySelf._builtInObjectSerialize(obj,mOptions);if(builtIn.isSet){return builtIn.output;}else{if(typeof obj=="function"){if(!mOptions.functionResistant){throw new Error("Serialize: can't serialize object with some method - ** "+(propName?"obj":propName)+" **");}else{return "\"["+"function: "+propName+"]\"";}}var output=startString;deepFlag++;var klice=[];for(var p in obj){klice.push(p);}if(mOptions.sortedSerialization){klice.sort();}for(var i=0;i<klice.length;i++){var klic=klice[i];var propName=mySelf._formatString(klic);try{var value=obj[klic];}catch(e){var value="[value inaccessible]";}output+="\""+propName+"\""+propertySep+mySource(value,klic)+propertyEnd;}var charNum=(output.lastIndexOf(propertyEnd)>=0)?output.lastIndexOf(propertyEnd):output.length;output=output.substring(0,charNum);deepFlag--;return output+endString;}}};var source=mySource(objToSource);if(mOptions.showFlag){return this.pretty(source,mOptions.showFlag);}else{return source;}};SZN.ObjLib.prototype._arraySerialize=function(fieldToSerialize,options){var fieldStr="";var mySelf=this;var mOptions=options;var mySource=function(field){if(field instanceof Array){for(var i=0;i<field.length;i++){if(typeof field[i]=="function"&&!(field[i] instanceof RegExp)){if(!mOptions.functionResistant){throw new Error("Serialize: can't serialize Function");}else{fieldStr+="\"["+"function: "+i+"]\",";continue;}}if((typeof field[i]!="object")&&((typeof field[i]!="function"))){if(typeof field[i]=="string"){var str=mySelf._formatString(field[i]);fieldStr+="\""+str+"\",";}else{fieldStr+=field[i]+",";}}else{fieldStr+=mySelf.serialize(field[i],mOptions)+",";}}return "["+fieldStr.substring(0,fieldStr.length-1)+"]";}else{throw new Error("arraySerialize: Attribute is not Array");}};var myString=mySource(fieldToSerialize);return myString;};SZN.ObjLib.prototype.unserialize=function(serializedString){eval("var newVar="+serializedString);return newVar;};SZN.ObjLib.prototype.match=function(refObj,matchObj,options){var mOptions={"functionResistant":false,"recursionResistant":false,"depthResistant":false,"sortedSerialization":true,"showFlag":false,"depth":200};if(options){for(var i in mOptions){mOptions[i]=(typeof options[i]!="undefined"?options[i]:mOptions[i]);}}if(this.serialize(refObj,mOptions)==this.serialize(matchObj,mOptions)){return true;}else{return false;}};SZN.ObjLib.prototype._builtInObjectSerialize=function(testedObj,options){var output=null;var isSet=false;if(testedObj instanceof String){output="new String(\""+this._formatString(testedObj)+"\")";isSet=true;}else{if(testedObj instanceof Number){output="new Number("+testedObj+")";isSet=true;}else{if(testedObj instanceof RegExp){output="new RegExp("+testedObj+")";isSet=true;}else{if(testedObj instanceof Array){output=this._arraySerialize(testedObj,options);isSet=true;}else{if(testedObj instanceof Date){var tm=testedObj.getTime();output="new Date("+tm+")";isSet=true;}else{if(testedObj instanceof Boolean){output="new Boolean("+testedObj+")";isSet=true;}else{if(testedObj==null){isSet=true;}}}}}}}return {"isSet":isSet,"output":output};};SZN.ObjLib.prototype._isIE=function(){if(document.all&&document.attachEvent&&!window.opera){return true;}return false;};SZN.ObjLib.prototype.copy=function(objToCopy,options){var mOptions=this.reSetOptions(options);var str=this.serialize(objToCopy,mOptions);return this.unserialize(str);};SZN.ObjLib.prototype._formatString=function(s){var re=/["\\']/g;var re2=/[\n\r\t]/g;var replace={"\n":"\\n","\t":"\\t","\r":"\\r"};return s.replace(re,this._addSlashes).replace(re2,function(ch){return replace[ch];});},SZN.ObjLib.prototype._addSlashes=function(ch){return "\\"+ch;};SZN.ObjLib.prototype.arrayCopy=function(arrayToCopy,options){if(arrayToCopy instanceof Array){var mOptions=this.reSetOptions(options);var out=this.arraySerialize(arrayToCopy,mOptions);return this.unserialize(out);}else{throw new Error("ObjCopy.arrayCopy: Attribute is not Array");}};SZN.ObjCopy=SZN.ClassMaker.makeClass({"NAME":"ObjCopy","VERSION":"2.0","CLASS":"class","EXTEND":SZN.ObjLib});SZN.ObjCopy.prototype.$constructor=function(options){this.callSuper("$constructor",arguments.callee)(options);};SZN.HTTPRequest=SZN.ClassMaker.makeClass({"NAME":"HTTPRequest","VERSION":"1.1","CLASS":"class"});SZN.HTTPRequest.prototype.$constructor=function(url,callBackObj,callBackFunc){this.data=new Object();this.url=url?url:"";this.callBackObj=callBackObj;this.callBackFunc=callBackFunc;this.setFormat();this.setMode();this.setMethod();this.setPostData();this.setHeaders();};SZN.HTTPRequest.Setting=function(url,method,postData,headers,mode,format){this.url=url?url:"";this.method=method?method:"";this.mode=mode?mode:"";this.format=format?format:"";this.headers=headers?headers:"";this.postData=postData?postData:"";};SZN.HTTPRequest.prototype.METHOD={"post":"post","get":"get","def":"get"};SZN.HTTPRequest.prototype.FORMAT={"xml":"xml","txt":"txt","json":"json","def":"txt"};SZN.HTTPRequest.prototype.MODE={"async":true,"sync":false,"def":true};SZN.HTTPRequest.prototype.HEADER=[{"typ":"Content-Type","content":"application/x-www-form-urlencoded"}];SZN.HTTPRequest.prototype.destructor=function(){for(var i in this){this[i]=null;}};SZN.HTTPRequest.prototype.init=function(){};SZN.HTTPRequest.prototype.setMethod=function(method){this.data.method=this._getMethod(method);};SZN.HTTPRequest.prototype.setMode=function(mode){this.data.mode=this._getMode(mode);};SZN.HTTPRequest.prototype.setFormat=function(format){this.data.format=this._getFormat(format);};SZN.HTTPRequest.prototype.setHeaders=function(headers){this.data.headers=this._setHeaders(headers);};SZN.HTTPRequest.prototype.setPostData=function(data){this.data.postData=data?data:"";};SZN.HTTPRequest.prototype.send=function(url,obj,method,requestData,returnOnly){var mySelf=this;var param=requestData?requestData:{};var data=this._setFromData(url,obj,method,param);var XHR=this._getRequest();try{XHR.open(data.method,data.url,data.mode);}catch(e){return 0;}for(var i=0;i<data.headers.length;i++){XHR.setRequestHeader(data.headers[i].typ,data.headers[i].content);}if(data.mode){function stateChangeFunction(){if(XHR.readyState==4){if(data.format=="xml"){var out=XHR.responseXML;}else{if(data.format=="txt"){var out=XHR.responseText;}}var status=0;try{status=XHR.status;if(data.format=="json"){var out=JSON.parse(XHR.responseText);}}catch(e){}finally{if(typeof data.callBackObj=="function"){data.callBackObj(out,status);}else{data.callBackObj[data.callBackFunc](out,status);}XHR=null;}}}XHR.onreadystatechange=stateChangeFunction;}if(data.method==this.METHOD["post"]){if(typeof data.postData!="undefined"){XHR.send(data.postData);}else{return 0;}}else{XHR.send(null);}if(!data.mode){if(data.format=="xml"){var out=XHR.responseXML;}else{if(data.format=="json"){var out=JSON.parse(XHR.responseText);}else{var out=XHR.responseText;}}if(returnOnly){return {"status":XHR.status,"data":out};}else{data.callBackObj[data.callBackFunc](out,XHR.status);}}else{return XHR;}};SZN.HTTPRequest.prototype.abort=function(XHR){if(typeof XHR=="object"&&XHR.readyState!=4){XHR.abort();}else{return 0;}};SZN.HTTPRequest.prototype._getMethod=function(method){return (typeof this.METHOD[method]!="undefined")?this.METHOD[method]:this.METHOD["def"];};SZN.HTTPRequest.prototype._getMode=function(mode){return (typeof this.MODE[mode]!="undefined")?this.MODE[mode]:this.MODE["def"];};SZN.HTTPRequest.prototype._getFormat=function(format){return (typeof this.FORMAT[format]!="undefined")?this.FORMAT[format]:this.FORMAT["def"];};SZN.HTTPRequest.prototype._setHeaders=function(headers){var headers=(headers instanceof Array)?headers:new Array();var out=new Array();var setContent=false;for(var i=0;i<headers.length;i++){if(headers[i].typ=="Content-Type"){setContent=true;}out[i]={"typ":headers[i].typ,"content":headers[i].content};}if(!setContent){out.push({"typ":this.HEADER[0].typ,"content":this.HEADER[0].content});}return out;};SZN.HTTPRequest.prototype._setFromData=function(url,obj,func,setting){var data=new Object();for(var i in this.data){switch(i){case "method":if(setting[i]){data[i]=this._getMethod(setting[i]);}else{data[i]=this.data[i];}break;case "format":if(setting[i]){data[i]=this._getFormat(setting[i]);}else{data[i]=this.data[i];}break;case "mode":if(setting[i]){data[i]=this._getMode(setting[i]);}else{data[i]=this.data[i];}break;case "headers":if(setting[i]){data.headers=this._setHeaders(setting[i]);}else{data.headers=this._setHeaders(this.data[i]);}break;default:if(setting[i]){data[i]=setting[i];}else{data[i]=this.data[i];}break;}}data.url=url?url:this.url;data.callBackObj=obj?obj:this.callBackObj;data.callBackFunc=func?func:this.callBackFunc;return data;};SZN.HTTPRequest.prototype._getRequest=function(){if(typeof (XMLHttpRequest)!="undefined"){return new XMLHttpRequest();}else{try{return new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP");}catch(e){return 0;}}}};SZN.SigInterface=SZN.ClassMaker.makeClass({"NAME":"SigInterface","VERSION":"1.3","CLASS":"class"});SZN.SigInterface.prototype.setInterface=function(interfaceName){if(typeof (this[interfaceName])!="object"){var owner=this._owner;while(typeof (owner[interfaceName])=="undefined"){if(typeof owner.TOP_LEVEL!="undefined"){throw new Error("SetInterface:Interface not found");}else{owner=owner._owner;}}return owner[interfaceName];}};SZN.SigInterface.prototype.addListener=function(type,handleFunction,sender){return this.getInterface().addListener(this,type,handleFunction,sender);};SZN.SigInterface.prototype.removeListener=function(type,handleFunction,sender){if(arguments.length==1){return this.getInterface().removeListener(arguments[0]);}else{return this.getInterface().removeListener(this,type,handleFunction,sender);}};SZN.SigInterface.prototype.makeEvent=function(type,accessType,data){var time=new Date().getTime();this.getInterface().makeEvent(type,this,accessType,time,data);};SZN.SigInterface.prototype.setSysMessage=function(msgName,msgValue){this.getInterface().setMessage(msgName,msgValue);};SZN.SigInterface.prototype.getSysMessage=function(msgName){return this.getInterface().getMessage(msgName);};SZN.SigInterface.prototype.getInterface=function(){return (typeof (this.signals)=="object"?this.signals:SZN.signals);};SZN.Signals=SZN.ClassMaker.makeClass({"NAME":"Signals","VERSION":"1.5","CLASS":"class"});SZN.Signals.prototype.$constructor=function(owner,name){this._owner=owner;this._name=name;this.messageFolder={};this.myEventFolder={};this._myHandleFolder={};this._myIdFolder={};this.apiHandler=null;};SZN.Signals.prototype.$destructor=function(){};SZN.Signals.prototype.setApiHandler=function(handler){this.apiHandler=handler;};SZN.Signals.prototype.setMessage=function(msgName,msgValue){this.messageFolder[msgName]=msgValue;};SZN.Signals.prototype.getMessage=function(msgName){return this.messageFolder[msgName];};SZN.Signals.prototype.addListener=function(owner,type,funcOrString,sender){if(!(type in this._myHandleFolder)){this._myHandleFolder[type]={};}var typeFolder=this._myHandleFolder[type];for(var id in typeFolder){var item=typeFolder[id];if((item.eFunction==funcOrString)&&(item.eOwner==owner)&&(item.eSender==sender)){return null;}}var id=SZN.idGenerator();typeFolder[id]={"eOwner":owner,"eFunction":funcOrString,"eSender":sender};this._myIdFolder[id]=typeFolder;return id;};SZN.Signals.prototype.removeListener=function(owner,type,funcOrString,sender){var id=null;if(arguments.length==1){id=arguments[0];}else{var typeFolder=this._myHandleFolder[type];for(var p in typeFolder){var item=typeFolder[p];if((item.eFunction==funcOrString)&&(item.eOwner==owner)&&(item.eSender==sender)){id=p;}}}if(!id){return 1;}var typeFolder=this._myIdFolder[id];delete typeFolder[id];delete this._myIdFolder[id];return 0;};SZN.Signals.prototype.makeEvent=function(type,trg,accessType,timestamp,data){var ids=SZN.idGenerator();this.myEventFolder["e-"+ids]=new SZN.Signals.NewEvent(type,trg,accessType,timestamp,ids,data);this.myEventHandler(this.myEventFolder["e-"+ids]);};SZN.Signals.NewEvent=function(type,trg,access,time,ids,data){this.type=type;this.target=trg;this.accessType=access;this.timeStamp=time;this._id=ids;this.data=(data&&typeof data=="object")?data:null;};SZN.Signals.prototype.myEventHandler=function(myEvent){var functionCache=[];for(var type in this._myHandleFolder){if(type==myEvent.type||type=="*"){for(var p in this._myHandleFolder[type]){var item=this._myHandleFolder[type][p];if(!item.eSender||item.eSender==myEvent.target){functionCache.push(item);}}}}for(var i=0;i<functionCache.length;i++){var item=functionCache[i];var owner=item.eOwner;var fnc=item.eFunction;if(typeof fnc=="string"){owner[fnc](myEvent);}else{if(typeof fnc=="function"){fnc(myEvent);}}}if((myEvent.accessType=="public")&&(this.apiHandler!=null)&&(myEvent._owner!="api")){this.apiHandler._apiEventHandler(myEvent);}this.destroyEvent(myEvent._id);};SZN.Signals.prototype.destroyEvent=function(ids){this.myEventFolder["e-"+ids]=null;delete (this.myEventFolder["e-"+ids]);};SZN.signals=new SZN.Signals();SZN.AbstractDecorator=SZN.ClassMaker.makeSingleton({"NAME":"SZN.AbstractDecorator","VERSION":"1.0"});SZN.AbstractDecorator.prototype.decorate=function(instance){instance.$super=this._$super;if(!instance.__decorators){instance.__decorators=[];}instance.__decorators.push(this);return instance;};SZN.AbstractDecorator.prototype._$super=function(){var caller=arguments.callee.caller;if(!caller){throw new Error("Function.prototype.caller not supported");}var decorators=this.__decorators||[];var obj=null;var name=null;var i=decorators.length;while(i--){var d=decorators[i];if(!obj&&name&&(name in d)){obj=d;break;}for(var p in d){if(!name&&caller==d[p]){name=p;break;}}}if(!name){var owner=caller.owner||this.constructor;var callerName=false;for(var name in owner.prototype){if(owner.prototype[name]==caller){callerName=name;}}if(!callerName){throw new Error("Cannot find supplied method in constructor");}var parent=owner.EXTEND;if(!parent){throw new Error("No super-class available");}if(!parent.prototype[callerName]){throw new Error("Super-class doesn't have method '"+callerName+"'");}var func=parent.prototype[callerName];return func.apply(this,arguments);}else{if(!obj){obj=this.constructor.prototype;if(!(name in obj)){throw new Error("Function '"+name+"' has no undecorated parent");}}}return obj[name].apply(this,arguments);};SZN.AutoDecorator=SZN.ClassMaker.makeSingleton({"NAME":"SZN.AutoDecorator","VERSION":"1.0","EXTEND":SZN.AbstractDecorator});SZN.AutoDecorator.prototype.decorate=function(instance){this.$super(instance);var exclude=["constructor","sConstructor","$super","_$super","callSuper","decorate"];for(var p in this){if(exclude.indexOf(p)!=-1){continue;}instance[p]=this[p];}};SZN.IDecorable=SZN.ClassMaker.makeClass({"NAME":"SZN.IDecorable","VERSION":"1.0","CLASS":"class"});SZN.IDecorable.prototype.decorate=function(decorator){var args=[this];for(var i=1;i<arguments.length;i++){args.push(arguments[i]);}var dec=decorator.getInstance();return dec.decorate.apply(dec,args);};SZN.Promise=SZN.ClassMaker.makeClass({"NAME":"SZN.Promise","VERSION":"1.0"});SZN.Promise.prototype.$constructor=function(resolver){this._state=0;this._value=null;this._cb={"fulfilled":[],"rejected":[]};this._thenPromises=[];if(resolver){this._invokeResolver(resolver);}};SZN.Promise.all=SZN.Promise.when=function(all){var promise=new this();var counter=0;var results=[];for(var i=0;i<all.length;i++){counter++;all[i].then(function(index,result){results[index]=result;counter--;if(!counter){promise.fulfill(results);}}.bind(null,i),function(reason){counter=1/0;promise.reject(reason);});}return promise;};SZN.Promise.prototype.then=function(onFulfilled,onRejected){this._cb.fulfilled.push(onFulfilled);this._cb.rejected.push(onRejected);var thenPromise=new SZN.Promise();this._thenPromises.push(thenPromise);if(this._state>0){setTimeout(this._processQueue.bind(this),0);}return thenPromise;};SZN.Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected);};SZN.Promise.prototype.fulfill=function(value){if(this._state!=0){return this;}this._state=1;this._value=value;this._processQueue();return this;};SZN.Promise.prototype.reject=function(value){if(this._state!=0){return this;}this._state=2;this._value=value;this._processQueue();return this;};SZN.Promise.prototype.chain=function(promise){return this.then(promise.fulfill.bind(promise),promise.reject.bind(promise));};SZN.Promise.prototype._processQueue=function(){while(this._thenPromises.length){var onFulfilled=this._cb.fulfilled.shift();var onRejected=this._cb.rejected.shift();this._executeCallback(this._state==1?onFulfilled:onRejected);}};SZN.Promise.prototype._executeCallback=function(cb){var thenPromise=this._thenPromises.shift();if(typeof (cb)!="function"){if(this._state==1){thenPromise.fulfill(this._value);}else{thenPromise.reject(this._value);}return;}try{var returned=cb(this._value);if(returned&&typeof (returned.then)=="function"){var fulfillThenPromise=function(value){thenPromise.fulfill(value);};var rejectThenPromise=function(value){thenPromise.reject(value);};returned.then(fulfillThenPromise,rejectThenPromise);}else{thenPromise.fulfill(returned);}}catch(e){if(window.console&&window.console.error){console.error(e);}thenPromise.reject(e);}};SZN.Promise.prototype._invokeResolver=function(resolver){try{resolver(this.fulfill.bind(this),this.reject.bind(this));}catch(e){this.reject(e);}};BrowserDetection=SZN.ClassMaker.makeStatic({"NAME":"BrowserDetection","VERSION":"3.0"});BrowserDetection.platform="";BrowserDetection.client="";BrowserDetection.version=0;BrowserDetection.agent="";BrowserDetection.mouse={};this.ieCompatibilityView=false;BrowserDetection._getPlatform=function(){if((this._agent.indexOf("iPhone")!=-1)||(this._agent.indexOf("iPod")!=-1)||(this._agent.indexOf("iPad")!=-1)){return "ios";}else{if(this._agent.indexOf("Android")!=-1){return "and";}else{if((this._agent.indexOf("X11")!=-1)||(this._agent.indexOf("Linux")!=-1)){return "nix";}else{if(this._agent.indexOf("Mac")!=-1){return "mac";}else{if(this._agent.indexOf("Win")!=-1){return "win";}else{return "oth";}}}}}};BrowserDetection._getClient=function(){if(window.opera){return "opera";}else{if(window.chrome){return "chrome";}else{if(("all" in document)&&("systemLanguage" in navigator)){return "ie";}else{if(document.getAnonymousElementByAttribute||"mozPaintCount" in window){return "gecko";}else{if(this._agent.indexOf("KHTML")!=-1){if(this._vendor=="KDE"){return "konqueror";}else{if(this._vendor.indexOf("Apple")!=-1){return "safari";}else{return "oth";}}}else{return "oth";}}}}}};BrowserDetection._getMouse=function(){if(BrowserDetection.client=="ie"&&parseFloat(BrowserDetection.version)<9){return {"left":1,"middle":4,"right":2};}else{return {"left":0,"middle":1,"right":2};}};BrowserDetection._getVersion=function(){var out=0;var fncName="_get_"+this.client+"_ver";if(typeof this[fncName]=="function"){return this[fncName]();}else{return "0";}};BrowserDetection._get_ie_ver=function(){if(!Function.prototype.call){return "5.0";}if(!(window.ActiveXObject)&&"ActiveXObject" in window){return "11";}else{if("draggable" in document.createElement("div")){return "10";}else{if(document.addEventListener){return "9";}else{if(Object.prototype.toString.call(window.JSON)==="[object JSON]"){return "8";}else{if(window.XMLHttpRequest){return "7";}else{if(typeof document.doctype=="object"){return "6";}else{return "5.5";}}}}}}};BrowserDetection._get_opera_ver=function(){if(window.opera.version){return window.opera.version();}else{if(document.createComment){return "7";}else{return "6";}}};BrowserDetection._get_gecko_ver=function(){if("textOverflow" in document.createElement("div").style){return "7";}else{if(window.EventSource){return "6";}else{if("onloadend" in new XMLHttpRequest()){return "5";}else{if(history.pushState){return "4";}else{if(document.getBoxObjectFor===undefined){return "3.6";}else{if(navigator.geolocation){return "3.5";}else{if(document.getElementsByClassName){return "3";}else{if(window.external){return "2";}else{return "1.5";}}}}}}}}};BrowserDetection._get_konqueror_ver=function(){var num=this._agent.indexOf("KHTML")+6;var part=this._agent.substring(num);var end=part.indexOf(" ");var x=part.substring(0,end-2);return x;};BrowserDetection._get_safari_ver=function(){var ver=this._agent.match(/version\/([0-9]+)/i);return (ver?ver[1]:"3");};BrowserDetection._get_chrome_ver=function(){var ver=this._agent.match(/Chrome\/([0-9]+)/i);return (ver?ver[1]:null);};BrowserDetection.isOld=function(){if(this.client=="ie"&&parseFloat(this.version)<=7){return true;}if(this.client=="opera"&&parseFloat(this.version)<9.5){return true;}if(this.client=="gecko"&&parseFloat(this.version)<2){return true;}if(this.client=="konqueror"&&parseFloat(this.version)<3.5){return true;}if(!document.documentElement){return true;}if(!document.documentElement.addEventListener&&!document.documentElement.attachEvent){return true;}var f=function(){};if(!f.call||!f.apply){return true;}return false;};BrowserDetection._testIeCompatibilityView=function(client,agent){if(client!="ie"){return false;}var test=agent.match(/Trident\/([4-9])/);if(!test){return false;}return (agent.indexOf("MSIE 7.0")>-1);};BrowserDetection.getBrowser=function(){this._agent=this.agent=navigator.userAgent;this._platform=navigator.platform;this._vendor=navigator.vendor;this.platform=this._getPlatform();this.client=this._getClient();this.version=this._getVersion();this.mouse=this._getMouse();this.ieCompatibilityView=this._testIeCompatibilityView(this.client,this._agent);};BrowserDetection.getBrowser();SZN.SkyscraperHidder=SZN.ClassMaker.makeClass({"NAME":"SZN.SkyscraperHidder","VERSION":"1.0","IMPLEMENT":[SZN.SigInterface],"CLASS":"class"});SZN.SkyscraperHidder.prototype.$constructor=function(skyId){this.addListener("calendarHide","show");this.addListener("calendarShow","hidde");this.skyId=skyId;};SZN.SkyscraperHidder.prototype.$destructor=function(){};SZN.SkyscraperHidder.prototype.hidde=function(){SZN.gEl(this.skyId).style.visibility="hidden";SZN.gEl(this.skyId).style.display="none";};SZN.SkyscraperHidder.prototype.show=function(){SZN.gEl(this.skyId).style.visibility="visible";SZN.gEl(this.skyId).style.display="";};SZN.skyscraperHidder=new SZN.SkyscraperHidder("adSkyscraper");SZN.Photos=SZN.ClassMaker.makeClass({"NAME":"SZN.Photos","VERSION":"1.0","CLASS":"class","IMPLEMENT":[SZN.SigInterface]});SZN.Photos.prototype.$constructor=function(owner){this.owner=owner;this._render();};SZN.Photos.prototype._render=function(){var c=SZN.cEl("div",false,"image-browser-photo-count");var n=this.owner.data.length;var text="fotografií";switch(n.toString().substr(n.toString().length-1)){case 1:case 2:case 3:case 4:text="fotografie";break;default:text="fotografií";break;}c.innerHTML=n+" "+text;this.owner.dom.content.appendChild(c);};(function(){var Sklik={"idSklik":"sklikContent","idRight":"articleColumnInfo","width":210,"height":350,"go":function(){var sklik=SZN.gEl(this.idSklik);if(!sklik){return;}var right=SZN.gEl(this.idRight);var content=right.parentNode;var avail=content.offsetHeight;avail-=right.offsetHeight;if(avail>=this.height){sklik.style.display="block";var sklikData={"elm":"sklikContent","zoneId":SZN.SKLIK_CODE_ID,"w":200,"h":400};sklikProvider.show(sklikData);}else{sklik.style.display="none";}SZN.signals.makeEvent("sklik");}};SZN.Events.onDomReady(Sklik,"go");})();var reg=["Symbian","CLDC","MIDP","J2ME","java","Nokia","Windows CE","Netfront","Obigo","240x320","wap","Smartphone","HTC"];var agent=window.navigator.userAgent;for(var i=0;i<reg.length;i++){if(agent.indexOf(reg[i])!="-1"){var mobile=true;break;}else{var mobile=false;}}SZN.Inquiry=SZN.ClassMaker.makeClass({"NAME":"SZN.Inquiry","VERSION":"1.0","CLASS":"class"});SZN.Inquiry.prototype.$constructor=function(id){this.id=id;this.ids=this.id.split("|");this.rootElms=this.ids.map(function(ids){return SZN.gEl("inquiry"+arguments[0]);});this.baseUrl="/inquiry/";this.request=new SZN.HTTPRequest("",this,"_fetchAnswer");this.request.setMethod("post");this.voteEvents=[];for(var i=0;i<this.ids.length;i++){this.voteEvents[i]=[];}this.boxes=[];this.init();};SZN.Inquiry.prototype.$destructor=function(){};SZN.Inquiry.prototype.init=function(){this.fetch();};SZN.Inquiry.prototype.fetch=function(){this.request.setPostData("inquiryIds="+this.id);var url=this.baseUrl+"screen?"+"inquiryIds="+this.id;this.request.send(url,this,"_fetchAnswer");};SZN.Inquiry.prototype.vote=function(){};SZN.Inquiry.prototype._fetchAnswer=function(answer,status){if(status!=200){return;}eval("var out = "+answer);var data=out.inquiry;for(var i=0;i<data.length;i++){switch(data[i].type){case "inquiry":this._buildInquiry(data[i],i);break;default:;}}};SZN.Inquiry.prototype._buildInquiry=function(data,num){var box=SZN.cEl("div");var inqHead=SZN.cEl("div",null,"inqHead");var inqHeadCont="<h5>Anketa</h5>"+"<p>"+data.title+"</p>";inqHead.innerHTML=inqHeadCont;inqBody=SZN.cEl("div",null,"inqBody");var ac=this.voteEvents[num];for(var i=0;i<ac.length;i++){SZN.Events.removeListener(ac[i]);}if(ac.length){this.voteEvents[num]=[];}for(var i=0;i<data.answers.length;i++){var item=SZN.cEl("div",null,"inqItem");var phr=SZN.cEl("div",null,"inqPhrase");var line=SZN.cEl("div",null,"inqGraph");if(data.canVote){var nd=SZN.cEl("a");nd.href="#";nd.innerHTML=data.answers[i].text;nd.id="inq_"+data.answers[i].answerId+"_"+data.inquiryId+"_"+data.csrfToken+"_"+num;phr.appendChild(nd);var className="voteItem ln_"+(i%2);var grp=SZN.cEl("span",null,className);var grNd=SZN.cEl("a");grNd.href="#";grNd.id="inq_"+data.answers[i].answerId+"_"+data.inquiryId+"_"+data.csrfToken+"_"+num;grNd.innerHTML="";grNd.style.width=data.answers[i].pc+"%";grp.appendChild(grNd);var txt=SZN.cEl("em");txt.innerHTML=data.answers[i].pc+"%";grNd.appendChild(txt);if(data.captchaCheck){var v1=SZN.Events.addListener(nd,"click",this,"_getCaptcha");var v2=SZN.Events.addListener(grNd,"click",this,"_getCaptcha");}else{var v1=SZN.Events.addListener(nd,"click",this,"_vote");var v2=SZN.Events.addListener(grNd,"click",this,"_vote");}this.voteEvents[num].push(v1);this.voteEvents[num].push(v2);}else{phr.innerHTML="<span><strong>"+data.answers[i].text+"</strong></span>";var className="voteItem ln_"+(i%2);var grp=SZN.cEl("span",null,className);grp.innerHTML="<span style=\"width:"+data.answers[i].pc+"%;\"><em>"+data.answers[i].pc+"%</em></span>";}item.appendChild(phr);item.appendChild(grp);inqBody.appendChild(item);}var inqFoot=SZN.cEl("div",null,"inqFoot");var votes="";switch(data.sumCount){case 1:votes="<p>Celkem hlasoval "+data.sumCount+" čtenář.</p>";break;case 2:case 3:case 4:votes="<p>Celkem hlasovali "+data.sumCount+" čtenáři.</p>";break;default:votes="<p>Celkem hlasovalo "+data.sumCount+" čtenářů.</p>";break;}inqFoot.innerHTML=votes;box.appendChild(inqHead);box.appendChild(inqBody);box.appendChild(inqFoot);if(!this.boxes[num]){this.rootElms[num].appendChild(box);this.boxes[num]=box;}else{this.boxes[num].parentNode.replaceChild(box,this.boxes[num]);this.boxes[num]=box;}};SZN.Inquiry.prototype._getCaptcha=function(e,elm){var url="/captcha.create";this.request.setMethod("get");this.request.send(url,this._buildCaptcha.bind(this,elm));SZN.Events.cancelDef(e);};SZN.Inquiry.prototype._buildCaptcha=function(elm,txt,status){if(status==200){setTimeout(function(){var params=elm.id.split("_");var num=params[4]||0;var form=SZN.cEl("form");var captcha=SZN.cEl("img");captcha.src="/captcha.getImage?hash="+txt;var text=SZN.cEl("strong",null,null,{"marginTop":"10px","display":"block"});text.innerHTML="Vyplňte kód z obrázku";var input=SZN.cEl("input","captcha"+params[2],null,{"width":"164px"});var inputCaptchaHash=SZN.cEl("input","captchaHash"+params[2]);inputCaptchaHash.type="hidden";inputCaptchaHash.value=txt;var button=SZN.cEl("input",elm.id,null,{"marginTop":"5px"});button.type="submit";button.value="Odeslat";var v3=SZN.Events.addListener(button,"click",this,"_vote");this.voteEvents[num].push(v3);form.appendChild(captcha);form.appendChild(text);form.appendChild(input);form.appendChild(inputCaptchaHash);form.appendChild(button);var inqElm=SZN.gEl("inquiry"+params[2]);var inqHead=SZN.Dom.getElementsByClass("inqHead")[0];var heading=inqHead.getElementsByTagName("h5")[0];heading.innerHTML="Ověření hlasování v anketě";var inqBody=SZN.Dom.getElementsByClass("inqBody",inqElm)[0];inqBody.innerHTML="";SZN.Dom.setStyle(inqBody,{"width":"170px"});inqBody.appendChild(form);var inqFoot=SZN.Dom.getElementsByClass("inqFoot",inqElm)[0];inqFoot.innerHTML="";}.bind(this),500);}};SZN.Inquiry.prototype._vote=function(e,elm){SZN.Events.cancelDef(e);var params=elm.id.split("_");var url=this.baseUrl+"vote";var postdata="inquiryId="+params[2]+"&answerId="+params[1]+"&csrfToken="+params[3];var captcha=SZN.gEl("captcha"+params[2]);if(captcha){postdata+="&captcha="+captcha.value;}var captchaHash=SZN.gEl("captchaHash"+params[2]);if(captchaHash){postdata+="&captchaHash="+captchaHash.value;}this.request.setMethod("post");this.request.setPostData(postdata);this.request.send(url,this,"_voteAnswer");};SZN.Inquiry.prototype._voteAnswer=function(data,status){if(status==200){this.fetch();}else{alert("Zadaný kód není správný!");this.fetch();}};SZN.Window=SZN.ClassMaker.makeClass({"NAME":"Window","VERSION":"1.0","CLASS":"class"});SZN.Window.prototype.$constructor=function(optObj){this.options={"imagePath":"/img/shadow-","imageFormat":"png","sizes":[6,6,6,6]};for(var p in optObj){this.options[p]=optObj[p];}this.content=SZN.cEl("div",false,"window-content",{"position":"relative"});;this.container=false;this._buildDom();};SZN.Window.prototype._buildDom=function(){var imageNames=[["lt","t","rt"],["l","","r"],["lb","b","rb"]];this.container=SZN.cEl("div",false,"window-container",{"position":"relative","zIndex":105});var table=SZN.cEl("table",false,false,{"borderCollapse":"collapse","position":"relative"});var tbody=SZN.cEl("tbody");SZN.Dom.append([table,tbody],[this.container,table]);for(var i=0;i<3;i++){var tr=SZN.cEl("tr");tbody.appendChild(tr);for(var j=0;j<3;j++){var td=SZN.cEl("td");td.style.padding="0px";td.style.margin="0px";var div=(i==1&&j==1?this.content:SZN.cEl("div",false,false,{"overflow":"hidden"}));td.appendChild(div);var im=imageNames[i][j];if(im){var path=this.options.imagePath+im+"."+this.options.imageFormat;if(SZN.Browser.klient=="ie"&&this.options.imageFormat.match(/png/i)){td.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+path+"',sizingMethod='scale')";}else{td.style.backgroundImage="url("+path+")";}}if(i==0){div.style.height=this.options.sizes[0]+"px";}if(i==2){div.style.height=this.options.sizes[2]+"px";}if(j==0){div.style.width=this.options.sizes[3]+"px";}if(j==2){div.style.width=this.options.sizes[1]+"px";}if(j==1&&i!=1){td.style.width="auto";}tr.appendChild(td);}}};SZN.Window.prototype.$destructor=function(){for(var p in this){this[p]=null;}};SZN.Window.prototype.show=function(){this.container.style.display="";};SZN.Window.prototype.hide=function(){this.container.style.display="none";};SZN.Interpolator=SZN.ClassMaker.makeClass({"NAME":"Interpolator","VERSION":"1.0","CLASS":"class"});SZN.Interpolator.LINEAR=1;SZN.Interpolator.QUADRATIC=2;SZN.Interpolator.SQRT=3;SZN.Interpolator.SIN=4;SZN.Interpolator.ASIN=5;SZN.Interpolator.prototype.$constructor=function(startVal,endVal,interval,callback,options){this.startVal=startVal;this.endVal=endVal;this.interval=interval;this.callback=callback;this.options={"interpolation":SZN.Interpolator.LINEAR,"frequency":20,"endCallback":false};this.running=false;this._tick=SZN.bind(this,this._tick);for(var p in options){this.options[p]=options[p];}};SZN.Interpolator.prototype._call=function(frac){var result=this._interpolate(frac);var delta=this.endVal-this.startVal;this.callback(this.startVal+delta*result);};SZN.Interpolator.prototype._interpolate=function(val){if(typeof (this.options.interpolation)=="function"){return this.options.interpolation(val);}switch(this.options.interpolation){case SZN.Interpolator.QUADRATIC:return val*val;case SZN.Interpolator.SQRT:return Math.sqrt(val);case SZN.Interpolator.SIN:return (Math.sin(Math.PI*(val-0.5))+1)/2;case SZN.Interpolator.ASIN:return (Math.asin(2*(val-0.5))+Math.PI/2)/Math.PI;default:return val;}};SZN.Interpolator.prototype.start=function(){if(this.running){return;}this.running=true;this.startTime=(new Date()).getTime();this._call(0);this.handle=setInterval(this._tick,this.options.frequency);};SZN.Interpolator.prototype.stop=function(){if(!this.running){return;}this.running=false;clearInterval(this.handle);};SZN.Interpolator.prototype._tick=function(){var now=(new Date()).getTime();var elapsed=now-this.startTime;if(elapsed>=this.interval){this.stop();this._call(1);if(this.options.endCallback){this.options.endCallback();}}else{this._call(elapsed/this.interval);}};SZN.CSSInterpolator=SZN.ClassMaker.makeClass({"NAME":"CSSInterpolator","VERSION":"1.0","CLASS":"class"});SZN.CSSInterpolator.prototype.$constructor=function(elm,interval,options){this.elm=elm;this.properties=[];this.colors=[];this._tick=SZN.bind(this,this._tick);this.interpolator=new SZN.Interpolator(0,1,interval,this._tick,options);};SZN.CSSInterpolator.prototype.addProperty=function(property,startVal,endVal,suffix){var o={"property":property,"startVal":startVal,"endVal":endVal,"suffix":suffix||""};this.properties.push(o);};SZN.CSSInterpolator.prototype.addColorProperty=function(property,startVal,endVal){var o={"startVal":SZN.Parser.color(startVal),"endVal":SZN.Parser.color(endVal),"property":property};this.colors.push(o);};SZN.CSSInterpolator.prototype.start=function(){this.interpolator.start();};SZN.CSSInterpolator.prototype.stop=function(){this.interpolator.stop();};SZN.CSSInterpolator.prototype._tick=function(frac){for(var i=0;i<this.properties.length;i++){var prop=this.properties[i];var val=prop.startVal+frac*(prop.endVal-prop.startVal);val+=prop.suffix;this.elm.style[prop.property]=val;}var names=["r","g","b"];for(var i=0;i<this.colors.length;i++){var c=this.colors[i];var out=[0,0,0];for(var j=0;j<names.length;j++){var name=names[j];out[j]=c.startVal[name]+Math.round(frac*(c.endVal[name]-c.startVal[name]));}var result="rgb("+out.join(",")+")";this.elm.style[c.property]=result;}};SZN.LightBox=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox","VERSION":"1.0","CLASS":"class","IMPLEMENT":[SZN.SigInterface,SZN.Components]});SZN.LightBox.DIR_PREW=-1;SZN.LightBox.DIR_NEXT=1;SZN.LightBox.prototype.$constructor=function(data,optObj){this.options={"components":{"anchorage":SZN.LightBox.Anchorage,"main":SZN.LightBox.Main,"strip":SZN.LightBox.Strip,"description":SZN.LightBox.Description,"pageShader":SZN.LightBox.PageShader,"navigation":SZN.LightBox.Navigation,"transition":SZN.LightBox.Transition,"others":[]},"imagePath":"img/","imageFormat":"png","parent":false,"zIndex":false,"useShadow":false,"usePageShader":true,"shadowSizes":[16,16,16,16],"galleryId":false,"galleryClassName":"image-browser-content","handleDocumentCloseClick":true,"mainOpt":{"id":false,"className":"image-browser-image","useMouseWheelScroll":true},"stripOpt":{"id":false,"className":"image-browser-thumbs","orientation":"vertical","activeBorder":"inner","activeId":false,"activeClassName":"image-browser-active","imageBoxClassName":"image-browser-thumb-box"},"descriptionOpt":{"id":false,"className":"image-browser-caption","contentId":false,"contentClassName":"image-browser-caption-content"},"navigationOpt":{"id":false,"className":"image-browser-navigation","continuous":true,"showDisabled":false,"nextClassName":"image-browser-next","prevClassName":"image-browser-prev","closeClassName":"image-browser-close"},"transitionOpt":{},"anchorageOpt":{}};for(var p in optObj){if(optObj[p] instanceof Object&&!optObj[p].CLASS){for(var o in optObj[p]){this.options[p][o]=optObj[p][o];}}else{this.options[p]=optObj[p];}}this.dom={};this.ec=[];this.objCache=[];this.components=[];this.visible=false;this.index=0;this.direction=SZN.LightBox.DIR_NEXT;this.blindLinkName=SZN.idGenerator();this.blindStyle={"position":"absolute","top":"-1000px","left":"-1000px","width":"1px","height":"1px","overflow":"hidden"};this.data=[];for(var i=0;i<data.length;i++){var item=data[i];var o={};for(var j in item){o[j]=item[j];}if(item.main){this.index=i;}this.data.push(o);}this._buildContainer();this._renderBlindStart();this._render();for(var i=0;i<this.options.components.others.length;i++){this.addNewComponent(this.options.components.others[i]);}this._renderBlindEnd();};SZN.LightBox.create=function(elm,optObj){elm=SZN.gEl(elm);var data=[];var l=[];var links=elm.getElementsByTagName("a");for(var i=0;i<links.length;i++){var img=links[i].getElementsByTagName("img")[0];if(!img){continue;}data.push({"alt":links[i].alt,"small":{"url":img.src},"big":{"url":links[i].href}});l.push(links[i]);}var g=new SZN.LightBox(data,optObj);for(var i=0;i<l.length;i++){g.bindElement(l[i],i);}return g;};SZN.LightBox.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){SZN.Events.removeListener(this.ec[i]);}for(var p in this){this[p]=null;}};SZN.LightBox.prototype._addDefaultComponent=function(name,part,className){var node=part;var ok=false;while(node){if(node==className){ok=true;break;}node=node.EXTEND;}if(ok){this.addNewComponent({"part":part,"name":name});}else{alert("Bad "+name+" functionality");}};SZN.LightBox.prototype._buildContainer=function(){this.dom.loadBox=SZN.cEl("div");this.dom.loadBox.style.position="absolute";this.dom.loadBox.style.top="-100px";this.dom.loadBox.style.left="-100px";this.dom.loadBox.style.overflow="hidden";this.dom.loadBox.style.width="1px";this.dom.loadBox.style.height="1px";this.dom.loadBox.setAttribute("aria-hidden","true");var body=document.getElementsByTagName("body")[0];body.insertBefore(this.dom.loadBox,body.firstChild);var div=SZN.cEl("div",this.options.galleryId,this.options.galleryClassName);if(this.options.useShadow){var winopts={"imagePath":this.options.imagePath,"imageFormat":this.options.imageFormat,"sizes":this.options.shadowSizes};this.window=new SZN.Window(winopts);this.dom.container=this.window.container;this.dom.container.style.position="absolute";this.window.content.appendChild(div);this.dom.content=div;}else{this.dom.container=SZN.cEl("div",false,false,{"position":"absolute"});this.dom.container.appendChild(div);this.dom.content=div;}if(this.options.zIndex){this.dom.container.style.zIndex=this.options.zIndex;}if(!this.parent){var parent=this.dom.loadBox;}else{var parent=this.parent;}parent.insertBefore(this.dom.container,parent.firstChild);};SZN.LightBox.prototype._render=function(){this._addDefaultComponent("anchorage",this.options.components.anchorage,SZN.LightBox.Anchorage);this._addDefaultComponent("transition",this.options.components.transition,SZN.LightBox.Transition);this._addDefaultComponent("main",this.options.components.main,SZN.LightBox.Main);this.dom.content.appendChild(this.main.render());if(this.options.usePageShader){this._addDefaultComponent("pageShader",this.options.components.pageShader,SZN.LightBox.PageShader);}this._addDefaultComponent("strip",this.options.components.strip,SZN.LightBox.Strip);this.dom.content.appendChild(this.strip.render());this._addDefaultComponent("description",this.options.components.description,SZN.LightBox.Description);this.dom.content.appendChild(this.description.render());this._addDefaultComponent("navigation",this.options.components.navigation,SZN.LightBox.Navigation);this.dom.content.appendChild(this.navigation.render());this.makeEvent("renderDone","public");};SZN.LightBox.prototype._renderBlindStart=function(){var h3=SZN.cEl("h3");h3.innerHTML="Fotogalerie";SZN.Dom.setStyle(h3,this.blindStyle);var link=SZN.cEl("a");link.href="#"+this.blindLinkName;link.innerHTML="Přeskočit fotogalerii";link.tabIndex=-1;SZN.Dom.setStyle(link,this.blindStyle);this.dom.content.appendChild(h3);this.dom.content.appendChild(link);};SZN.LightBox.prototype._renderBlindEnd=function(){var link=SZN.cEl("a");link.id=this.blindLinkName;this.dom.content.appendChild(link);};SZN.LightBox.prototype._addEvents=function(){if(this.options.handleDocumentCloseClick){this.ec.push(SZN.Events.addListener(document,"mousedown",this,"_clickClose"));this.ec.push(SZN.Events.addListener(this.dom.container,"mousedown",window,SZN.Events.stopEvent));}this.ec.push(SZN.Events.addListener(window,"resize",this,"_resize"));};SZN.LightBox.prototype._removeEvents=function(){for(var i=0;i<this.ec.length;i++){SZN.Events.removeListener(this.ec[i]);}};SZN.LightBox.prototype.createEvent=function(sender,name){this.makeEvent(name,"public",{"sender":sender});};SZN.LightBox.prototype._resize=function(e,elm){this.makeEvent("windowResize","protected");};SZN.LightBox.prototype._clickClose=function(e,elm){if(e.button==SZN.Browser.mouse.left){this.close();}};SZN.LightBox.prototype.close=function(){this.makeEvent("close","public");this._removeEvents();this.visible=false;if(!this.parent){SZN.Dom.elementsHider(this.dom.container,false,"show");this.dom.container.parentNode.removeChild(this.dom.container);}this.makeEvent("closed","public");};SZN.LightBox.prototype.show=function(i){this.makeEvent("show","public",{"index":i});this._addEvents();this.visible=true;if(!this.parent){var body=document.getElementsByTagName("body")[0];body.insertBefore(this.dom.container,body.firstChild);this.anchorage.actualizePosition();SZN.Dom.elementsHider(this.dom.container,false,"hide");}this.go(i);this.makeEvent("showed","public",{"index":i});};SZN.LightBox.prototype.go=function(index){var dir=index<this.index?SZN.LightBox.DIR_PREW:SZN.LightBox.DIR_NEXT;this._go(index,dir);};SZN.LightBox.prototype._go=function(i,direction){this.direction=direction;this.makeEvent("go","public",{"index":i});this.main.update(i);this.strip.update(i);this.description.update(i);this.navigation.update(i);this.index=i;};SZN.LightBox.prototype.previous=function(){var i=this.index-1;if(i<0){if(this.options.navigationOpt.continuous){i=this.data.length-1;}else{return;}}this._go(i,SZN.LightBox.DIR_PREW);};SZN.LightBox.prototype.next=function(){var i=this.index+1;if(i==this.data.length){if(this.options.navigationOpt.continuous){i=0;}else{return;}}this._go(i,SZN.LightBox.DIR_NEXT);};SZN.LightBox.prototype.bindAnchors=function(elm){var links=SZN.Dom.arrayFromCollection(SZN.gEl(elm).getElementsByTagName("a"));for(var i=0;i<links.length;i++){this.bindElement(links[i],i);}};SZN.LightBox.prototype.bindElement=function(elm,i){this.objCache.push(new SZN.LightBox.ImageLink(this,i,elm));};SZN.LightBox.ImageLink=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.ImageLink","VERSION":"1.0","CLASS":"class"});SZN.LightBox.ImageLink.prototype.$constructor=function(owner,index,elm){this.ec=[];this.owner=owner;this.index=index;this.elm=elm;this.ec.push(SZN.Events.addListener(this.elm,"click",this,"_show"));};SZN.LightBox.ImageLink.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){SZN.Events.removeListener(this.ec[i]);}for(var p in this){this[p]=null;}};SZN.LightBox.ImageLink.prototype._show=function(e,elm){SZN.Events.cancelDef(e);SZN.Events.stopEvent(e);this.owner.show(this.index);};SZN.LightBox.Anchorage=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Anchorage","VERSION":"1.0","CLASS":"class"});SZN.LightBox.Anchorage.prototype.$constructor=function(owner){this.owner=owner;this.options=this.owner.options.anchorageOpt;this.container=this.owner.dom.container;};SZN.LightBox.Anchorage.prototype.actualizePosition=function(){this.container.style.top="0px";this.container.style.left="0px";this.container.style.position="absolute";};SZN.LightBox.Anchorage.Fixed=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Anchorage.Fixed","VERSION":"1.0","CLASS":"class","EXTEND":SZN.LightBox.Anchorage});SZN.LightBox.Anchorage.Fixed.prototype.$constructor=function(owner){this.callSuper("$constructor",arguments.callee)(owner);this.ec=[];this.useAbsoluteHack=false;if(SZN.Browser.client=="ie"&&SZN.Browser.version<=6){this.useAbsoluteHack=true;}this.attachEvents();};SZN.LightBox.Anchorage.Fixed.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){SZN.Events.removeListener(this.ec[i]);}for(var p in this){this[p]=null;}};SZN.LightBox.Anchorage.Fixed.prototype.attachEvents=function(){this.ec.push(SZN.Events.addListener(window,"resize",this,"actualizePosition"));if(this.useAbsoluteHack){this.ec.push(SZN.Events.addListener(window,"scroll",this,"actualizePosition"));}};SZN.LightBox.Anchorage.Fixed.prototype.actualizePosition=function(){var hasParent=true;if(!this.owner.visible){this.container.style.position="absolute";this.container.style.top="-1000px";this.container.style.left="-1000px";this.container.style.visibility="hidden";hasParent=false;}var body=document.getElementsByTagName("body")[0];body.insertBefore(this.container,body.firstChild);var portSize=SZN.Dom.getDocSize();if(this.useAbsoluteHack){var wScroll=SZN.Dom.getScrollPos();this.container.style.position="absolute";this.container.style.top=Math.round(wScroll.y+portSize.height/2-this.container.offsetHeight/2)+"px";this.container.style.left=Math.round(wScroll.x+portSize.width/2-this.container.offsetWidth/2)+"px";}else{this.container.style.position="fixed";this.container.style.top=Math.round(portSize.height/2-this.container.offsetHeight/2)+"px";this.container.style.left=Math.round(portSize.width/2-this.container.offsetWidth/2)+"px";}if(!hasParent){this.container.parentNode.removeChild(this.container);this.container.style.visibility="visible";}};SZN.LightBox.Anchorage.TopLeft=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Anchorage.TopLeft","VERSION":"1.0","CLASS":"class","EXTEND":SZN.LightBox.Anchorage});SZN.LightBox.Anchorage.TopLeft.prototype.actualizePosition=function(){this.container.style.top=this.options.top+"px";this.container.style.left=this.options.left+"px";this.container.style.position="absolute";};SZN.LightBox.Main=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Main","VERSION":"1.0","CLASS":"class","IMPLEMENT":[SZN.SigInterface]});SZN.LightBox.Main.prototype.$constructor=function(owner){this.owner=owner;this.options=this.owner.options.mainOpt;this.dom={};this.ec=[];this.width=0;this.height=0;};SZN.LightBox.Main.prototype.$destructor=function(){for(p in this.dom){this.dom[p]=null;}for(var i=0;i<this.ec.length;i++){SZN.Events.removeListener(this.ec[i]);}for(p in this){this[p]=null;}};SZN.LightBox.Main.prototype.render=function(){this.dom.mainBox=SZN.cEl("div",this.options.id,this.options.className);this._attachEvents();return this.dom.mainBox;};SZN.LightBox.Main.prototype._attachEvents=function(){if(this.options.useMouseWheelScroll){this.ec.push(SZN.Events.addListener(this.dom.mainBox,"DOMMouseScroll",this,"_scroll"));this.ec.push(SZN.Events.addListener(this.dom.mainBox,"mousewheel",this,"_scroll"));}};SZN.LightBox.Main.prototype._scroll=function(e,elm){SZN.Events.cancelDef(e);var delta=e.wheelDelta||e.detail;if(SZN.Browser.client=="gecko"){delta=-delta;}if(delta>0){this.owner.previous();}else{this.owner.next();}};SZN.LightBox.Main.prototype.update=function(i){this.width=parseInt(this.dom.mainBox.clientWidth);this.height=parseInt(this.dom.mainBox.clientHeight);var imgObj=this.owner.data[i];if(imgObj.flash){this._generateFlashElm(imgObj);}else{this._generateImgElm(imgObj);}};SZN.LightBox.Main.prototype._generateFlashElm=function(img){var em=SZN.cEl("embed");em.setAttribute("quality","high");em.setAttribute("pluginspage","https://www.macromedia.com/go/getflashplayer");em.setAttribute("type","application/x-shockwave-flash");em.setAttribute("width",this.width);em.setAttribute("height",this.height);em.setAttribute("allowfullscreen","true");em.setAttribute("src",img.big.url);em.setAttribute("flashvars",img.flash);em.style.visibility="hidden";this.dom.mainBox.appendChild(em);this._switchImages(this.dom.mainBox.getElementsByTagName("embed")[0]);};SZN.LightBox.Main.prototype._generateImgElm=function(img){var em=SZN.cEl("img");em.style.visibility="hidden";em.src=img.big.url;this.dom.mainBox.appendChild(em);this._switchImages(em);};SZN.LightBox.Main.prototype._switchImages=function(newImg){var c=this.current;this.current=newImg;this.owner.transition.start(c,newImg);};SZN.LightBox.Main.Scaled=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Main.Scaled","VERSION":"1.0","CLASS":"class","EXTEND":SZN.LightBox.Main});SZN.LightBox.Main.Scaled.prototype._generateImgElm=function(img){var em=SZN.cEl("img");em.height=this.height;em.width=this.width;em.style.visibility="hidden";em.style.position="absolute";em.src=img.big.url;this.dom.mainBox.appendChild(em);this._switchImages(em);};SZN.LightBox.Main.CenteredScaled=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Main.CenteredScaled","VERSION":"1.0","CLASS":"class","EXTEND":SZN.LightBox.Main});SZN.LightBox.Main.CenteredScaled.prototype.$constructor=function(owner){this.callSuper("$constructor",arguments.callee)(owner);this.scaledImage=null;};SZN.LightBox.Main.CenteredScaled.prototype._generateImgElm=function(img){var em=new SZN.LightBox.ScaledImage(this,img.big.url,this.width,this.height,this.dom.mainBox);em.render();if(this.scaledImage){this.scaledImage.$destructor();this.scaledImage=null;}this.scaledImage=em;};SZN.LightBox.Transition=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Transition","VERSION":"1.0","CLASS":"class"});SZN.LightBox.Transition.prototype.$constructor=function(owner){this.owner=owner;this.options=owner.options.transitionOpt;};SZN.LightBox.Transition.prototype.$destructor=function(){};SZN.LightBox.Transition.prototype.start=function(firstElm,secondElm){this.first=firstElm;this.second=secondElm;this._finish();};SZN.LightBox.Transition.prototype._finish=function(){this.second.style.visibility="visible";if(this.first){this.first.parentNode.removeChild(this.first);}this.first=null;this.second=null;this.owner.createEvent(this,"transitionDone");};SZN.LightBox.Transition.Fade=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Transition.Fade","VERSION":"1.0","CLASS":"class","EXTEND":SZN.LightBox.Transition});SZN.LightBox.Transition.Fade.prototype.$constructor=function(owner){this.options={"interval":400,"frequency":25,"overlap":1};this.owner=owner;for(var p in owner.options.transitionOpt){this.options[p]=owner.options.transitionOpt[p];}this.running1=false;this.running2=false;this._secondOpacity=0;this._step1=SZN.bind(this,this._step1);this._step2=SZN.bind(this,this._step2);this._finish=SZN.bind(this,this._finish);this.i1=new SZN.Interpolator(1,0,this.options.interval,this._step1,{"frequency":this.options.frequency});this.i2=new SZN.Interpolator(0,1,this.options.interval,this._step2,{"frequency":this.options.frequency,"endCallback":this._finish});};SZN.LightBox.Transition.Fade.prototype.start=function(oldElm,newElm){if(this.running1||this.running2){this.second.parentNode.removeChild(this.second);this.second=newElm;this._setOpacity(this.second,this._secondOpacity);this.second.style.visibility="visible";}else{this.first=oldElm;this.second=newElm;this._secondOpacity=0;this._setOpacity(this.second,0);this.second.style.visibility="visible";if(this.first){this.running1=true;this.i1.start();}else{this._start2();}}};SZN.LightBox.Transition.Fade.prototype._start2=function(){this.running2=true;this.i2.start();};SZN.LightBox.Transition.Fade.prototype._step1=function(value){if(!this.first){return;}this._setOpacity(this.first,value);if(!this.running2&&value<=this.options.overlap){this._start2();}};SZN.LightBox.Transition.Fade.prototype._step2=function(value){this._secondOpacity=value;this._setOpacity(this.second,value);};SZN.LightBox.Transition.Fade.prototype._finish=function(){this.running1=false;this.running2=false;this.callSuper("_finish",arguments.callee)();};SZN.LightBox.Transition.Fade.prototype._setOpacity=function(node,value){node.style.opacity=value;node.style.filter="alpha(opacity="+Math.round(value*100)+")";};SZN.LightBox.ScaledImage=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.ScaledImage","VERSION":"1.0","CLASS":"class"});SZN.LightBox.ScaledImage.prototype.$constructor=function(owner,src,w,h,rootElm){this.owner=owner;this.w=w;this.h=h;this.src=src;this.rootElm=rootElm;this.ec=[];this.dom={};};SZN.LightBox.ScaledImage.prototype.render=function(){this.dom.elm=SZN.cEl("img");this.dom.container=SZN.cEl("div",false,false,{"position":"absolute","left":"-1000px","top":"-1000px","width":"1px","height":"1px","overflow":"hidden"});this.ec.push(SZN.Events.addListener(this.dom.elm,"load",this,"_loaded",false,true));document.body.insertBefore(this.dom.container,document.body.firstChild);this.dom.container.appendChild(this.dom.elm);this.dom.elm.src=this.src;};SZN.LightBox.ScaledImage.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){SZN.Events.removeListener(this.ec[i]);}for(var p in this.dom){this.dom[p]=null;}for(var p in this){this[p]=null;}};SZN.LightBox.ScaledImage.prototype._loaded=function(e,elm){var w=this.dom.elm.width;var h=this.dom.elm.height;var ratio_w=w/this.w;var ratio_h=h/this.h;var max=Math.max(ratio_w,ratio_h);if(max>1){w=w/max;h=h/max;if(w&&h){this.dom.elm.width=Math.ceil(w);this.dom.elm.height=Math.ceil(h);}}var pw=this.rootElm.clientWidth;var ph=this.rootElm.clientHeight;this.dom.elm.style.position="absolute";this.dom.elm.style.visibility="hidden";this.dom.elm.style.top=Math.round((ph-h)/2)+"px";this.dom.elm.style.left=Math.round((pw-w)/2)+"px";if(this.rootElm){this.rootElm.appendChild(this.dom.elm);}if(this.dom.container){this.dom.container.parentNode.removeChild(this.dom.container);this.dom.container=false;}this.owner.owner.createEvent(this,"mainImageLoaded");this.owner._switchImages(this.dom.elm);};SZN.LightBox.PageShader=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.PageShader","VERSION":"1.0","CLASS":"class","IMPLEMENT":[SZN.SigInterface]});SZN.LightBox.PageShader.prototype.$constructor=function(owner){this.owner=owner;this.dom={};this.addListener("showed","_show",this.owner);this.addListener("close","_hide",this.owner);this.addListener("windowResize","_resize",this.owner);};SZN.LightBox.PageShader.prototype.$destructor=function(){for(p in this.dom){this.dom[p]=null;}for(p in this){this[p]=null;}};SZN.LightBox.PageShader.prototype._show=function(){this.dom.root=SZN.cEl("div",false,"image-browser-root",{"position":"absolute","left":"0px","top":"0px"});var docSize=SZN.Dom.getDocSize();var docH=document.compatMode=="BackCompat"?document.body.scrollHeight:document.body.offsetHeight;var docW=document.compatMode=="BackCompat"?document.body.scrollWidth:document.body.offsetWidth;this.dom.root.style.width=(docSize.width>docW?docSize.width:docW)+"px";this.dom.root.style.height=(docSize.height>docH?docSize.height:docH)+"px";if(this.owner.options.zIndex){this.dom.root.style.zIndex=this.owner.options.zIndex-1;}var parent=this.owner.dom.container.parentNode;var nextSibling=this.owner.dom.container.nextSibling;parent.insertBefore(this.dom.root,nextSibling);SZN.Dom.elementsHider(this.dom.root,false,"hide");};SZN.LightBox.PageShader.prototype._hide=function(){if(this.dom.root&&this.dom.root.parentNode){SZN.Dom.elementsHider(this.dom.root,false,"hide");this.dom.root.parentNode.removeChild(this.dom.root);}this.dom.root=null;};SZN.LightBox.PageShader.prototype._resize=function(){this._hide();this._show();};SZN.LightBox.Strip=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Strip","VERSION":"1.0","CLASS":"class"});SZN.LightBox.Strip.prototype.$constructor=function(owner){this.owner=owner;this.options=this.owner.options.stripOpt;this.dom={};};SZN.LightBox.Strip.prototype.$destructor=function(){for(p in this.dom){this.dom[p]=null;}for(p in this){this[p]=null;}};SZN.LightBox.Strip.prototype.render=function(){this.dom.mainBox=SZN.cEl("div",this.options.id,this.options.className);return this.dom.mainBox;};SZN.LightBox.Strip.prototype.update=function(index){};SZN.LightBox.Strip.Scrollable=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Strip.Scrollable","VERSION":"1.0","CLASS":"class","EXTEND":SZN.LightBox.Strip});SZN.LightBox.Strip.Scrollable.prototype.$constructor=function(owner){this.callSuper("$constructor",arguments.callee)(owner);this.objCache=[];this.ec=[];this.activeBorder={};};SZN.LightBox.Strip.Scrollable.prototype.$destructor=function(){for(var i=0;i<this.objCache.length;i++){this.objCache[i].$destructor();this.objCache[i]=null;}for(var i=0;i<this.ec.length;i++){SZN.Events.removeListener(this.ec[i]);}this.callSuper("$destructor",arguments.callee)();};SZN.LightBox.Strip.Scrollable.prototype.render=function(){this.callSuper("render",arguments.callee)();this.owner.dom.content.appendChild(this.dom.mainBox);this.dom.mainBox.style.position="relative";this.dom.imageBox=SZN.cEl("div");this.dom.mainBox.appendChild(this.dom.imageBox);this.dom.imageTable=SZN.cEl("table");this.dom.imageTable.style.borderCollapse="collapse";var tbody=SZN.cEl("tbody");this.dom.imageTable.appendChild(tbody);this.dom.imageBox.appendChild(this.dom.imageTable);for(var i=0;i<this.owner.data.length;i++){if(this.options.orientation=="vertical"){var tr=SZN.cEl("tr");var td=SZN.cEl("td");tr.appendChild(td);td.align="center";td.vAlign="center";tbody.appendChild(tr);}else{if(i==0){var tr=SZN.cEl("tr");}var td=SZN.cEl("td");td.align="center";td.vAlign="center";tr.appendChild(td);if(i==this.owner.data.length-1){tbody.appendChild(tr);}}var div=SZN.cEl("div",false,this.options.imageBoxClassName);div.style.position="relative";td.style.padding="0px";td.appendChild(div);}var elms=SZN.Dom.arrayFromCollection(tbody.getElementsByTagName("div"));for(var i=0;i<this.owner.data.length;i++){var stripImg=new SZN.LightBox.StripImage(this.owner,this.options,this.owner.data[i],i);stripImg.render(elms[i]);this.objCache.push(stripImg);}this.dom.active=SZN.cEl("div",this.options.activeId,this.options.activeClassName);this.dom.active.style.position="absolute";this.dom.mainBox.appendChild(this.dom.active);this.activeBorder.top=parseInt(SZN.Dom.getStyle(this.dom.active,"borderTopWidth"));this.activeBorder.bottom=parseInt(SZN.Dom.getStyle(this.dom.active,"borderBottomWidth"));this.activeBorder.left=parseInt(SZN.Dom.getStyle(this.dom.active,"borderLeftWidth"));this.activeBorder.right=parseInt(SZN.Dom.getStyle(this.dom.active,"borderRightWidth"));this.dom.mainBox.removeChild(this.dom.active);this._addEvents();return this.dom.mainBox;};SZN.LightBox.Strip.Scrollable.prototype._addEvents=function(){if(this.options.orientation=="horizontal"){this.ec.push(SZN.Events.addListener(this.dom.mainBox,"DOMMouseScroll",this,"_scroll"));this.ec.push(SZN.Events.addListener(this.dom.mainBox,"mousewheel",this,"_scroll"));}};SZN.LightBox.Strip.Scrollable.prototype._scroll=function(e,elm){SZN.Events.cancelDef(e);var delta=e.wheelDelta||e.detail;if(SZN.Browser.client=="gecko"){delta=-delta;}if(delta>0){this.dom.mainBox.scrollLeft-=30;}else{this.dom.mainBox.scrollLeft+=30;}};SZN.LightBox.Strip.Scrollable.prototype.update2=function(index){this.dom.active.style.position="absolute";var pos=SZN.Dom.getBoxPosition(this.objCache[index].dom.img.parentNode,this.dom.imageTable);var borderTop=parseInt(SZN.Dom.getStyle(this.dom.active,"borderTopWidth"));var borderBottom=parseInt(SZN.Dom.getStyle(this.dom.active,"borderBottomWidth"));var borderLeft=parseInt(SZN.Dom.getStyle(this.dom.active,"borderLeftWidth"));var borderRight=parseInt(SZN.Dom.getStyle(this.dom.active,"borderRightWidth"));if(this.options.activeBorder=="inner"){this.dom.active.style.top=pos.top+"px";this.dom.active.style.left=pos.left+"px";this.dom.active.style.width=(this.objCache[index].dom.img.parentNode.offsetWidth-(!isNaN(borderLeft)?borderLeft:0)-(!isNaN(borderRight)?borderRight:0))+"px";this.dom.active.style.height=(this.objCache[index].dom.img.parentNode.offsetHeight-(!isNaN(borderTop)?borderTop:0)-(!isNaN(borderBottom)?borderBottom:0))+"px";}else{this.dom.active.style.top=(pos.top-(!isNaN(borderLeft)?borderLeft:0))+"px";this.dom.active.style.left=(pos.left-(!isNaN(borderTop)?borderTop:0))+"px";this.dom.active.style.width=(this.objCache[index].dom.img.parentNode.offsetWidth)+"px";this.dom.active.style.height=(this.objCache[index].dom.img.parentNode.offsetHeight)+"px";}if(this.options.orientation=="vertical"){var a=SZN.Dom.getBoxPosition(this.objCache[index].dom.img.parentNode,this.dom.mainBox);var b=parseInt(SZN.Dom.getStyle(this.dom.mainBox,"height"))/2;var c=parseInt(SZN.Dom.getStyle(this.objCache[index].dom.img.parentNode,"height"))/2;var scroll=a.top-b+c;this.dom.mainBox.scrollTop=Math.round(scroll);}else{var a=SZN.Dom.getBoxPosition(this.objCache[index].dom.img.parentNode,this.dom.mainBox);var b=parseInt(SZN.Dom.getStyle(this.dom.mainBox,"width"))/2;var c=parseInt(SZN.Dom.getStyle(this.objCache[index].dom.img.parentNode,"width"))/2;var scroll=a.left-b+c;this.dom.mainBox.scrollLeft=Math.round(scroll);}};SZN.LightBox.Strip.Scrollable.prototype.update=function(index){if(this.options.activeBorder=="inner"){this.dom.active.style.left="0px";this.dom.active.style.top="0px";this.dom.active.style.width=(this.objCache[index].dom.img.parentNode.offsetWidth-(!isNaN(this.activeBorder.left)?this.activeBorder.left:0)-(!isNaN(this.activeBorder.right)?this.activeBorder.right:0))+"px";this.dom.active.style.height=(this.objCache[index].dom.img.parentNode.offsetHeight-(!isNaN(this.activeBorder.top)?this.activeBorder.top:0)-(!isNaN(this.activeBorder.bottom)?this.activeBorder.bottom:0))+"px";}else{this.dom.active.style.left=-(!isNaN(this.activeBorder.left)?this.activeBorder.left:0)+"px";this.dom.active.style.top=-(!isNaN(this.activeBorder.top)?this.activeBorder.top:0)+"px";this.dom.active.style.width=(this.objCache[index].dom.img.parentNode.clientWidth)+"px";this.dom.active.style.height=(this.objCache[index].dom.img.parentNode.clientHeight)+"px";}this.objCache[index].dom.img.parentNode.appendChild(this.dom.active);if(this.options.orientation=="vertical"){var a=SZN.Dom.getBoxPosition(this.objCache[index].dom.img.parentNode,this.dom.mainBox);var b=parseInt(SZN.Dom.getStyle(this.dom.mainBox,"height"))/2;var c=parseInt(SZN.Dom.getStyle(this.objCache[index].dom.img.parentNode,"height"))/2;var scroll=a.top-b+c;this.dom.mainBox.scrollTop=Math.round(scroll);}else{var a=SZN.Dom.getBoxPosition(this.objCache[index].dom.img.parentNode,this.dom.mainBox);var b=parseInt(SZN.Dom.getStyle(this.dom.mainBox,"width"))/2;var c=parseInt(SZN.Dom.getStyle(this.objCache[index].dom.img.parentNode,"width"))/2;var scroll=a.left-b+c;this.dom.mainBox.scrollLeft=Math.round(scroll);}};SZN.LightBox.StripImage=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.StripImage","VERSION":"1.0","CLASS":"class"});SZN.LightBox.StripImage.prototype.$constructor=function(mainOwner,options,data,order){this.mainOwner=mainOwner;this.data=data;this.options=options;this.order=order;this.dom={};this.ec=[];};SZN.LightBox.StripImage.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){SZN.Events.removeListener(this.ec[i]);}};SZN.LightBox.StripImage.prototype.render=function(elm){this.dom.parentNode=elm;this.dom.tmpBox=SZN.cEl("div",false,false,{"position":"absolute","top":"-100px","left":"-100px","width":"1px","height":"1px","overflow":"hidden"});var body=document.getElementsByTagName("body")[0];body.insertBefore(this.dom.tmpBox,body.firstChild);this.dom.img=SZN.cEl("img");this.dom.tmpBox.appendChild(this.dom.img);this.ec.push(SZN.Events.addListener(this.dom.img,"load",this,"_loaded"));this.dom.img.src=this.data.small.url;this.dom.img.alt=this.data.alt;this.ec.push(SZN.Events.addListener(elm,"click",this,"_click"));};SZN.LightBox.StripImage.prototype._click=function(e,elm){this.mainOwner.go(this.order);};SZN.LightBox.StripImage.prototype._loaded=function(e,elm){var w=elm.width;var h=elm.height;this.dom.img.style.display="none";this.dom.parentNode.appendChild(this.dom.img);this.dom.tmpBox.parentNode.removeChild(this.dom.tmpBox);this.dom.tmpBox=null;var boxW=parseInt(this.dom.img.parentNode.clientWidth);var boxH=parseInt(this.dom.img.parentNode.clientHeight);var ratio_w=w/boxW;var ratio_h=h/boxH;var max=Math.max(ratio_w,ratio_h);if(max>1){w=Math.floor(w/max);h=Math.floor(h/max);if(w&&h){this.dom.img.width=w;this.dom.img.height=h;}}var ph=this.dom.parentNode.clientHeight;this.dom.img.style.marginTop=Math.round((ph-h)/2)+"px";this.dom.img.parentNode.textAlign="center";this.dom.img.style.display="";};SZN.LightBox.Description=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Description","VERSION":"1.0","CLASS":"class"});SZN.LightBox.Description.prototype.$constructor=function(owner){this.owner=owner;this.options=owner.options.descriptionOpt;this.dom={};};SZN.LightBox.Description.prototype.$destructor=function(){for(var p in this.dom){this.dom[p]=null;}for(var p in this){this[p]=null;}};SZN.LightBox.Description.prototype.render=function(){this.dom.box=SZN.cEl("div",this.options.id,this.options.className);return this.dom.box;};SZN.LightBox.Description.prototype.update=function(index){};SZN.LightBox.Description.Basic=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Description.Basic","VERSION":"1.0","CLASS":"class","EXTEND":SZN.LightBox.Description});SZN.LightBox.Description.Basic.prototype.render=function(){this.callSuper("render",arguments.callee)();this.dom.content=SZN.cEl("div",this.options.contentId,this.options.contentClassName);this.dom.box.appendChild(this.dom.content);return this.dom.box;};SZN.LightBox.Description.Basic.prototype.update=function(index){if(this.owner.data[index].description){this.dom.content.innerHTML=this.owner.data[index].description;}};SZN.LightBox.Navigation=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Navigation","VERSION":"1.0","CLASS":"class"});SZN.LightBox.Navigation.prototype.$constructor=function(owner){this.owner=owner;this.options=owner.options.navigationOpt;this.dom={};this.ec=[];};SZN.LightBox.Navigation.prototype.$destructor=function(){for(var p in this.dom){this.dom[p]=null;}for(var i=0;i<this.ec.length;i++){SZN.Events.removeListener(this.ec[i]);}for(var p in this){this[p]=null;}};SZN.LightBox.Navigation.prototype.render=function(){return SZN.cEl("div",this.options.id,this.options.className);};SZN.LightBox.Navigation.prototype.update=function(index){};SZN.LightBox.Navigation.Basic=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Navigation.Basic","VERSION":"1.0","CLASS":"class","EXTEND":SZN.LightBox.Navigation});SZN.LightBox.Navigation.Basic.prototype.render=function(){this.dom.next=SZN.cEl("a",this.options.nextId,this.options.nextClassName);this.dom.prev=SZN.cEl("a",this.options.prevId,this.options.prevClassName);this.dom.nextDisabled=SZN.cEl("a",this.options.nextId?this.options.nextId+"-disabled":false,this.options.nextClassName+"-disabled");this.dom.prevDisabled=SZN.cEl("a",this.options.prevId?this.options.prevId+"-disabled":false,this.options.prevClassName+"-disabled");this.dom.close=SZN.cEl("a",this.options.closeId,this.options.closeClassName);this.dom.next.href="#";this.dom.prev.href="#";this.dom.nextDisabled.href="#";this.dom.prevDisabled.href="#";this.dom.close.href="#";this.dom.next.tabIndex=-1;this.dom.prev.tabIndex=-1;this.dom.nextDisabled.tabIndex=-1;this.dom.prevDisabled.tabIndex=-1;this.dom.close.tabIndex=-1;this.dom.nextPreload=SZN.cEl("div",this.options.nextId?this.options.nextId+"-preload":false,this.options.nextClassName+"-preload",{"position":"absolute","visibility":"hidden","height":"1px","width":"1px"});this.dom.nextDisabledPreload=SZN.cEl("div",this.options.nextId?this.options.nextId+"-disabled-preload":false,this.options.nextClassName+"-disabled-preload",{"position":"absolute","visibility":"hidden","height":"1px","width":"1px"});this.dom.prevPreload=SZN.cEl("div",this.options.prevId?this.options.prevId+"-preload":false,this.options.prevClassName+"-preload",{"position":"absolute","visibility":"hidden","height":"1px","width":"1px"});this.dom.prevDisabledPreload=SZN.cEl("div",this.options.prevId?this.options.prevId+"-disabled-preload":false,this.options.prevClassName+"-disabled-preload",{"position":"absolute","visibility":"hidden","height":"1px","width":"1px"});this.dom.closePreload=SZN.cEl("div",this.options.closeId?this.options.closeId+"-preload":false,this.options.closeClassName+"-preload",{"position":"absolute","visibility":"hidden","height":"1px","width":"1px"});this._addEvents();var div=SZN.cEl("div",this.options.id,this.options.className);SZN.Dom.append([div,this.dom.next,this.dom.nextDisabled,this.dom.prev,this.dom.prevDisabled,this.dom.close]);SZN.Dom.append([div,this.dom.nextPreload,this.dom.nextDisabledPreload,this.dom.prevPreload,this.dom.prevDisabledPreload,this.dom.closePreload]);return div;};SZN.LightBox.Navigation.Basic.prototype._addEvents=function(){this.ec.push(SZN.Events.addListener(this.dom.next,"click",this,"_next"));this.ec.push(SZN.Events.addListener(this.dom.prev,"click",this,"_previous"));this.ec.push(SZN.Events.addListener(this.dom.close,"click",this,"_close"));this.ec.push(SZN.Events.addListener(document,"keydown",this,"_closeKey"));this.ec.push(SZN.Events.addListener(this.dom.nextDisabled,"click",this,"_disabled"));this.ec.push(SZN.Events.addListener(this.dom.prevDisabled,"click",this,"_disabled"));};SZN.LightBox.Navigation.Basic.prototype._disabled=function(e,elm){elm.blur();SZN.Events.cancelDef(e);};SZN.LightBox.Navigation.Basic.prototype._close=function(e,elm){elm.blur();SZN.Events.cancelDef(e);SZN.Events.stopEvent(e);this.owner.close();};SZN.LightBox.Navigation.Basic.prototype._next=function(e,elm){elm.blur();SZN.Events.cancelDef(e);this.owner.next();};SZN.LightBox.Navigation.Basic.prototype._previous=function(e,elm){elm.blur();SZN.Events.cancelDef(e);this.owner.previous();};SZN.LightBox.Navigation.Basic.prototype._closeKey=function(e,elm){if(e.keyCode==27){this.owner.close();}};SZN.LightBox.Navigation.Basic.prototype.update=function(index){if(!this.options.continuous){this.dom.prev.style.display="";this.dom.next.style.display="";this.dom.prevDisabled.style.display="none";this.dom.nextDisabled.style.display="none";if(index==0){this.dom.prev.style.display="none";if(this.options.showDisabled){this.dom.prevDisabled.style.display="";}}if(index==this.owner.data.length-1){this.dom.next.style.display="none";if(this.options.showDisabled){this.dom.nextDisabled.style.display="";}}}else{this.dom.prevDisabled.style.display="none";this.dom.nextDisabled.style.display="none";this.dom.prev.style.display="";this.dom.next.style.display="";}};var LTBSkyscraperHidder=SZN.ClassMaker.makeClass({"NAME":"LTBSkyscraperHidder","VERSION":"0.9","EXTEND":SZN.SkyscraperHidder,"CLASS":"class"});LTBSkyscraperHidder.prototype.$constructor=function(skyId){this.addListener("close","show");this.addListener("show","hidde");this.skyId=skyId;};SZN.LightBox.Main.Novinky=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Main.Novinky","EXTEND":SZN.LightBox.Main,"VERSION":"1.0","CLASS":"class"});SZN.LightBox.Main.Novinky.prototype.update=function(i){this.width=this.owner.data[i].big.width;this.height=this.owner.data[i].big.height;var imgObj=this.owner.data[i];if(imgObj.flash){this._generateFlashElm(imgObj);}else{this._generateImgElm(imgObj);}};SZN.LightBox.Main.Novinky.prototype._generateImgElm=function(img){var em=SZN.cEl("img");em.style.visibility="hidden";em.width=this.width;em.height=this.height;em.style.width=this.width+"px";em.style.height=this.height+"px";em.src=img.big.url;this.dom.mainBox.appendChild(em);this._switchImages(em);};SZN.LightBox.Anchorage.Novinky=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Anchorage.Novinky","EXTEND":SZN.LightBox.Anchorage,"VERSION":"1.0","CLASS":"class"});SZN.LightBox.Anchorage.Novinky.prototype.$constructor=function(owner){this.callSuper("$constructor",arguments.callee)(owner);this.elm=SZN.gEl(this.options.elmId);};SZN.LightBox.Anchorage.Novinky.prototype.actualizePosition=function(){var pos=SZN.Dom.getBoxPosition(this.elm);var sc=SZN.Dom.getScrollPos();var win=SZN.Dom.getDocSize();var left=pos.left;var top=Math.round(pos.top);var picTop=Math.round(pos.top);var top=pos.top;if((top+this.container.offsetHeight)>(sc.y+win.height)){var diff=(top+this.container.offsetHeight)-(sc.y+win.height);top-=diff;}if((top<sc.y)){top+=(sc.y-top+16);}var logoTop=SZN.Dom.getBoxPosition(SZN.gEl("logo")).top;var top=top<logoTop+25?logoTop+25:top;this.container.style.top=(top-3)+"px";this.container.style.left=(left-3)+"px";this.container.style.position="absolute";};SZN.LightBox.Anchorage.NovinkyHP=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Anchorage.NovinkyHP","EXTEND":SZN.LightBox.Anchorage,"VERSION":"1.0","CLASS":"class"});SZN.LightBox.Anchorage.NovinkyHP.prototype.$constructor=function(owner){this.callSuper("$constructor",arguments.callee)(owner);this.elm=SZN.gEl(this.options.elmId);};SZN.LightBox.Anchorage.NovinkyHP.prototype.actualizePosition=function(){var pos=SZN.Dom.getBoxPosition(this.elm);var sc=SZN.Dom.getScrollPos();var win=SZN.Dom.getDocSize();var left=pos.left;var top=sc.y+10;if((top+this.container.offsetHeight)<(pos.top+this.elm.offsetHeight)){if((pos.top+this.elm.offsetHeight)<(sc.y+win.height)){top-=(top+this.container.offsetHeight)-(pos.top+this.elm.offsetHeight)-13;}else{var diff=(pos.top+this.elm.offsetHeight)-(sc.y+win.height);top-=(top+this.container.offsetHeight)-(pos.top+this.elm.offsetHeight)+diff;}}this.container.style.left=(left-this.container.offsetWidth+110)+"px";this.container.style.top=(top-3)+"px";this.container.style.position="absolute";};SZN.LightBox.Description.Novinky=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Description.Novinky","VERSION":"1.0","CLASS":"class","EXTEND":SZN.LightBox.Description.Basic});SZN.LightBox.Description.Novinky.prototype.update=function(index){var code=this.owner.data[index].description;if(this.owner.data[index].author.type=="dynamic"){var auth=this.owner.data[index].author;if(auth.author||auth.source){code+="<span class='glAuthor'>foto: ";if(auth.author){code+=auth.authorUrl?"<a href='"+auth.authorUrl+"'>"+auth.author+"</a>":auth.author;}if(auth.author&&auth.source){code+=", ";}if(auth.source){code+=auth.sourceUrl?"<a href='"+auth.sourceUrl+"'>"+auth.source+"</a>":auth.source;}code+="</span>";}}else{if(this.owner.data[index].author.type=="static"){code+="<span class='glAuthor'>"+this.owner.data[index].author.txt+"</span>";}}this.dom.content.innerHTML=code;};SZN.LightBox.Description.NovinkySP=SZN.ClassMaker.makeClass({"NAME":"SZN.LightBox.Description.NovinkySP","VERSION":"1.0","CLASS":"class","EXTEND":SZN.LightBox.Description.Novinky});SZN.LightBox.Description.NovinkySP.prototype.widthCorrectionSize=7;SZN.LightBox.Description.NovinkySP.prototype.update=function(index){this.dom.content.style.width=(this.owner.main.dom.mainBox.offsetWidth-this.widthCorrectionSize)+"px";this.callSuper("update",arguments.callee)(index);};var galleryConf={"useShadow":true,"imagePath":"/static/images/shadow-","galleryId":"lightBox","usePageShader":false,"components":{"anchorage":SZN.LightBox.Anchorage.Novinky,"main":SZN.LightBox.Main.CenteredScaled,"strip":SZN.LightBox.Strip.Scrollable,"description":SZN.LightBox.Description.Novinky,"pageShader":SZN.LightBox.PageShader,"navigation":SZN.LightBox.Navigation.Basic,"transition":SZN.LightBox.Transition.Fade,"others":[{"name":"photos","part":SZN.Photos}]},"anchorageOpt":{},"stripOpt":{"orientation":"vertical","activeBorder":"outer"},"navigationOpt":{"continuous":false,"showDisabled":true},"transitionOpt":{"interval":300}};var pictureConf={"useShadow":true,"imagePath":"/static/images/shadow-","galleryClassName":"singleLightBox","usePageShader":false,"components":{"anchorage":SZN.LightBox.Anchorage.Novinky,"main":SZN.LightBox.Main.Novinky,"strip":SZN.LightBox.Strip,"description":SZN.LightBox.Description.NovinkySP,"pageShader":SZN.LightBox.PageShader,"navigation":SZN.LightBox.Navigation.Basic,"transition":SZN.LightBox.Transition,"others":[]},"anchorageOpt":{},"mainOpt":{"className":"singlePicture","useMouseWheelScroll":false},"stripOpt":{"className":"signglePictureStrip"},"navigationOpt":{"continuous":false,"showDisabled":false}};var galleryHPConf={"useShadow":true,"imagePath":"/static/images/shadow-","galleryId":"lightBox","usePageShader":false,"components":{"anchorage":SZN.LightBox.Anchorage.NovinkyHP,"main":SZN.LightBox.Main.CenteredScaled,"strip":SZN.LightBox.Strip.Scrollable,"description":SZN.LightBox.Description.Novinky,"pageShader":SZN.LightBox.PageShader,"navigation":SZN.LightBox.Navigation.Basic,"transition":SZN.LightBox.Transition.Fade,"others":[{"name":"photos","part":SZN.Photos}]},"anchorageOpt":{},"stripOpt":{"orientation":"vertical","activeBorder":"outer"},"navigationOpt":{"continuous":false,"showDisabled":true},"transitionOpt":{"interval":300}};SZN.GalleryMaker=SZN.ClassMaker.makeClass({"NAME":"SZN.GalleryMaker","VERSION":"1.0","IMPLEMENT":[SZN.SigInterface],"CLASS":"class"});SZN.GalleryMaker.prototype.$constructor=function(type,imgId,conf,data,startPos){this.type=type;this.imgId=imgId;this.conf=conf;this.data=data;this.startPos=startPos?startPos:0;this.elmsToHide=["iframe","object","select","embed"];this.hideElements=[];this.gallery=null;this.init();};SZN.GalleryMaker.prototype.$destructor=function(){this.gallery.$destructor();};SZN.GalleryMaker.prototype.init=function(){this.conf.anchorageOpt.elmId=this.imgId;this.gallery=new SZN.LightBox(this.data,this.conf);if(this.type=="singleTop"){this._buildSingle();this.gallery.bindElement(SZN.gEl("gallBox"),this.startPos);}else{if(this.type=="gallery"){this._buildGallery();this.gallery.bindElement(SZN.gEl("gallBox"),this.startPos);}else{if(this.type=="galleryHP"){this._buildGallery();this.gallery.bindElement(SZN.gEl("hpGalleryTitle"),this.startPos);this.gallery.bindElement(SZN.gEl(this.imgId),this.startPos);return;}else{if(this.type=="singleArticle"){if(!this.skyscraperHidder){this.skyscraperHidder=new LTBSkyscraperHidder("adSkyscraper");}}}}}if(SZN.gEl("gallBox")){SZN.gEl("gallBox").parentNode.parentNode.style.cursor=(SZN.Browser.client=="ie")?"pointer":"hand";}this.gallery.bindElement(SZN.gEl(this.imgId),this.startPos);var gallBoxImg=SZN.gEl("gallBox_"+this.imgId);if(gallBoxImg){this.gallery.bindElement(gallBoxImg,this.startPos);}};SZN.GalleryMaker.prototype._buildSingle=function(){this._activate();};SZN.GalleryMaker.prototype._buildGallery=function(){this._activate();};SZN.GalleryMaker.prototype._activate=function(){this.addListener("show","_hideElements");this.addListener("closed","_showElements");if((SZN.Browser.client=="ie")&&(SZN.Browser.version<7)){this._fakeActivate();return;}var nd=SZN.gEl("gallBox");if(nd){SZN.Events.addListener(nd,"mouseover",this,"_over");SZN.Events.addListener(nd,"mouseout",this,"_out");}};SZN.GalleryMaker.prototype._over=function(e,elm){SZN.gEl("gallBox").className="gallBox active";};SZN.GalleryMaker.prototype._out=function(e,elm){SZN.gEl("gallBox").className="gallBox pasive";};SZN.GalleryMaker.prototype._fakeActivate=function(){var node=SZN.cEl("img");node.width=200;node.height=36;node.src="/static/images/empty.gif";node.title="Zobrazit galerii";node.style.cssText="position:absolute;top:0;left:0;width:200px;height:36px;cursor:hand;";node.alt="";SZN.Events.addListener(node,"mouseover",this,"_over");SZN.Events.addListener(node,"mouseout",this,"_out");if(SZN.gEl("gallBox")){var nd=SZN.gEl("gallBox").appendChild(node);}};SZN.GalleryMaker.prototype._hideElements=function(){for(var i=0;i<this.elmsToHide.length;i++){var nds=document.getElementsByTagName(this.elmsToHide[i]);for(var j=0;j<nds.length;j++){if(SZN.Dom.getStyle(nds[j],"visibility")=="hidden"){continue;}if(!nds[j].parentNode.parentNode.classList.contains("fb-like")&&(this.elmsToHide[i]=="select"||(nds[j].src!==undefined&&nds[j].src.indexOf("api.mapy.cz")<0))){nds[j].style.visibility="hidden";this.hideElements.push(nds[j]);}}}};SZN.GalleryMaker.prototype._showElements=function(){for(var i=0;i<this.hideElements.length;i++){this.hideElements[i].style.visibility="visible";}this.hideElements=[];};var addPopupImages=function(articleBoxId){var links=[];if(SZN.gEl(articleBoxId)){links=SZN.gEl(articleBoxId).getElementsByTagName("a");}for(var i=0;i<links.length;i++){var a=links[i];var img=a.getElementsByTagName("img")[0];if(!img||!img.tagName||img.tagName.toLowerCase()!="img"){continue;}if(a.target!="_blank"){continue;}var url_img=img.src;var url_link=a.href;var server1=url_img.match(/http[s]?:\/\/([^\/]+)\//);var server2=url_link.match(/http[s]?:\/\/([^\/]+)\//);if(server1[1]!=server2[1]){continue;}var img=a.getElementsByTagName("img")[0];if(img.id.split("_")[0]=="singlePic"){var id=img.id.split("_")[1];var data=window["data_"+id];new SZN.GalleryMaker("singleArticle","singlePic_"+id,pictureConf,data);continue;}else{var sourceData=getPopupSourceData(a);var data=[{"alt":sourceData.title,"description":sourceData.title,"author":{"type":"static","txt":sourceData.source},"small":{"url":url_img},"big":{"url":url_link}}];var imgId=img.id?img.id:SZN.idGenerator();img.id=imgId;new SZN.GalleryMaker("singleArticle",img.id,pictureConf,data);}}};var getPopupSourceData=function(node){var title="";var source="";var nd=node.nextSibling;while(nd){if(nd.className=="imgTitle"){if(!title&&nd.getElementsByTagName("em").length){var title=nd.getElementsByTagName("em")[0].innerHTML;}else{var title="";}}if(nd.className=="author"){var source=nd.innerHTML;}if(title&&source){break;}else{if(nd.nextSibling){nd=nd.nextSibling;}else{break;}}}return {"title":title,"source":source};};buble=SZN.ClassMaker.makeClass({"NAME":"SZN.bubble","VERSION":"1.0","CLASS":"static"});buble.timer=0;buble.timeout=1000;buble.id="";buble.folder={};buble.activeId=null;buble.count=0;buble.init=function(){this.open=SZN.bind(this,this._open);};buble._open=function(){if(this.activeId){this.folder[this.activeId].hide();}if(this.folder[this.id]){this.folder[this.id].show();}else{this.folder[this.id]=new SZN.Bubble(this.id,this,this.url);}this.activeId=this.id;};buble.show=function(elm,url){if(!elm.id){this.id="bbl_"+this.count;elm.id=this.id;}else{this.id=elm.id;}this.count++;this.url=url;this.timer=window.setTimeout(this.open,this.timeout);return false;};buble.hide=function(arg){if(this.timer){window.clearTimeout(this.timer);this.id="";}if(this.activeId){this.folder[this.activeId].contOut();}return false;};buble.init();SZN.Bubble=SZN.ClassMaker.makeClass({"NAME":"SZN.Bubble","VERSION":"1.0","CLASS":"class"});SZN.Bubble.prototype.$constructor=function(id,owner,url){this.id=id;this.url=url;this.elm=SZN.gEl(id);this.container=null;this.position={};this.owner=owner;this.activate=false;this.showTimer=0;this.hideTimer=0;this.actionFolder={};this.request=this.request=new SZN.HTTPRequest(this.url,this,"_answerAction");this.request.setMethod("post");this.init();};SZN.Bubble.prototype.$destructor=function(id){};SZN.Bubble.prototype.init=function(id){this.data=null;this.timeHide=SZN.bind(this,this._timeHide);this.request.send();};SZN.Bubble.prototype._answerAction=function(answer,status){if(status!=200){return;}eval("var data ="+answer);this.data=data;this.data.buildedContent="";if(this.data.pictureUrl){this.data.buildedContent+="<img src=\""+this.data.pictureUrl+"\" width=\"100\" height=\"56\" alt=\""+this.data.pictureTitle+"\" title=\""+this.data.pictureTitle+"\" />";}if(this.data.title){this.data.buildedContent+="<h4>"+this.data.title+"</h4>";}if(this.data.content){this.data.buildedContent+=this.data.content;}this.container=this._makeContainer();this.inner.innerHTML=this.data.buildedContent;var cl=SZN.cEl("p",null,"bbl_clPr");var cl_a=SZN.cEl("a");cl_a.href="#";cl_a.innerHTML="Zavřít";cl.appendChild(cl_a);this.inner.appendChild(cl);this.actionFolder.close=SZN.Events.addListener(cl_a,"click",this,"_close");this.show();};SZN.Bubble.prototype.show=function(){if(!this.container){this.request.send();return;}this.setPosition();document.body.insertBefore(this.container,document.body.firstChild);this.container.style.zIndex=999;if(!this.activate){this.repairSize();this.activate=true;}SZN.Dom.elementsHider(this.container,false,"hide");this.container.style.visibility="visible";};SZN.Bubble.prototype._close=function(e,elm){SZN.Events.cancelDef(e);this.hide();};SZN.Bubble.prototype.hide=function(){if(!this.container){return;this.owner.activeId=null;}this.container.style.visibility="hidden";SZN.Dom.elementsHider(this.container,false,"show");this.container.parentNode.removeChild(this.container);this.owner.activeId=null;};SZN.Bubble.prototype.repairSize=function(){var h=this.inner.offsetHeight-28;var fh=h<0?0:h;this.cont.style.height=(fh)+"px";this.innerBox.style.height=(fh)+"px";if((SZN.Browser.client=="ie")&&(SZN.Browser.version<7)){this.innerBox.style.overflow="hidden";}};SZN.Bubble.prototype.setPosition=function(){this.position=SZN.Dom.getBoxPosition(this.elm);this.container.style.top=(this.position.top-51)+"px";this.container.style.left=(this.position.left+this.elm.offsetWidth+25)+"px";};SZN.Bubble.prototype._makeContainer=function(){var box=SZN.cEl("div",null,"bubleBox");var code="<div class=\"bbl_tail\"></div><div class=\"bbl_star\"></div>"+"<table class=\"table\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">"+"<tr><td class=\"top_left\"></td><td class=\"top_top\"></td><td class=\"top_right\"></td></tr>"+"<tr><td></td><td class=\"middleTd\"></td><td class=\"right_right\"></td></tr>"+"</table>"+"<div class=\"bb_cont\"><div class=\"bb_left\"></div><div class=\"bb_right\"></div><div class=\"innerBox\"><div class=\"inner\"></div></div></div>"+"<table class=\"table\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">"+"<tr><td class=\"bottom_left\"></td><td class=\"bottom_bottom\"></td><td class=\"bottom_right\"></td></tr>"+"</table>";box.innerHTML=code;this.actionFolder["hide"]=SZN.Events.addListener(box,"mouseout",this,"contOut");this.actionFolder["show"]=SZN.Events.addListener(box,"mouseover",this,"contOver");this.cont=box.getElementsByTagName("div")[2];this.innerLeft=this.cont.getElementsByTagName("div")[0];this.innerRight=this.cont.getElementsByTagName("div")[1];this.innerBox=this.cont.getElementsByTagName("div")[2];this.inner=this.innerBox.getElementsByTagName("div")[0];return box;};SZN.Bubble.prototype.contOver=function(){if(this.hideTimer){window.clearTimeout(this.hideTimer);}};SZN.Bubble.prototype.contOut=function(){this.hideTimer=window.setTimeout(this.timeHide,1000);};SZN.Bubble.prototype._timeHide=function(){this.hide();};SZN.Calendar=SZN.ClassMaker.makeClass({"NAME":"Calendar","VERSION":"2.1","CLASS":"class","IMPLEMENT":SZN.SigInterface});SZN.Calendar.prototype.$constructor=function(optObj){this.options={"defaultFormat":["j.n.Y"],"today":"Dnes","monthNames":["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],"monthNamesShort":["Led","Ún","Bře","Dub","Kvě","Čer","Črc","Srp","Zář","Říj","Lis","Pros"],"dayNames":["Po","Út","St","Čt","Pá","So","Ne"],"rollerDelay":200,"pickTime":false,"lockWindow":false};for(var p in optObj){if(p=="defaultFormat"){if(!optObj[p] instanceof Array){optObj[p]=[optObj[p]];}}this.options[p]=optObj[p];}this._dom={};this._days=[];this._rollers=[];this.ec=[];this._visible=false;this.ec.push(SZN.Events.addListener(document,"keydown",this,"_handleKey",false,true));this.ec.push(SZN.Events.addListener(document,"mousedown",this,"_handleDown",false,true));this.ec.push(SZN.Events.addListener(window,"unload",this,"$destructor",false,true));this.ec.push(SZN.Events.addListener(document,"mouseup",this,"_handleUp",false,true));};SZN.Calendar.prototype.$destructor=function(){for(var i=0;i<this.ec.length;i++){SZN.Events.removeListener(this.ec[i]);}for(var p in this){this[p]=null;}};SZN.Calendar.manage=function(calendar,clickElm,targetElm){var callback=function(){for(var i=0;i<targetElm.length;i++){SZN.gEl(targetElm[i]).value=arguments[i]?arguments[i]:"";}};var click=function(e,elm){var pos=SZN.Dom.getBoxPosition(clickElm);var x=pos.left;var y=pos.top+clickElm.offsetHeight+1;calendar.pick(x,y,SZN.gEl(targetElm[0]).value,callback);};calendar.ec.push(SZN.Events.addListener(clickElm,"click",window,click,false,true));};SZN.Calendar.setup=function(imageUrl,label,optObj){var c=new SZN.Calendar(optObj);for(var i=3;i<arguments.length;i++){var click=false;var input=arguments[i];if(!(input instanceof Array)){input=[SZN.gEl(input)];}click=SZN.Calendar._createButton(imageUrl,label);var lastInput=SZN.gEl(input[input.length-1]);lastInput.parentNode.insertBefore(click,lastInput.nextSibling);SZN.Calendar.manage(c,click,input);}return c;};SZN.Calendar._createButton=function(imageUrl,label){if(imageUrl){click=SZN.cEl("img",false,"cal-launcher",{"cursor":"pointer"});click.src=imageUrl;click.alt=label;click.title=label;}else{click=SZN.cEl("input",false,"cal-launcher");click.type="button";click.value=label;}return click;};SZN.Calendar.prototype.equalDates=function(d1,d2){return d1.getFullYear()==d2.getFullYear()&&d1.getMonth()==d2.getMonth()&&d1.getDate()==d2.getDate();};SZN.Calendar.prototype._handleDown=function(e,elm){if(!this._visible){return;}this._hide();};SZN.Calendar.prototype._cancelDown=function(e,elm){SZN.Events.stopEvent(e);};SZN.Calendar.prototype._handleUp=function(e,elm){if(this.eventMove){SZN.Events.removeListener(this.eventMove);this.eventMove=false;}if(SZN.Calendar.Button._activeElement){SZN.Dom.removeClass(SZN.Calendar.Button._activeElement,"mousedown");SZN.Calendar.Button._activeElement=false;}this._timer=false;for(var i=0;i<this._rollers.length;i++){this._rollers[i]._hide();}};SZN.Calendar.prototype._handleMove=function(e,elm){if(!this._visible){return;}var selObj=false;if(document.getSelection&&!SZN.Browser.client!="gecko"){selObj=document.getSelection();}if(window.getSelection){selObj=window.getSelection();}if(document.selection){selObj=document.selection;}if(selObj){if(selObj.empty){selObj.empty();}if(selObj.removeAllRanges){selObj.removeAllRanges();}}SZN.Events.cancelDef(e);var dx=e.clientX-this._clientX;var dy=e.clientY-this._clientY;var pos=SZN.Dom.getBoxPosition(this._dom.container);var newx=pos.left+dx;var newy=pos.top+dy;if(this.options.lockWindow&&(newx<0||newy<0)){return;}this._dom.container.style.left=newx+"px";this._dom.container.style.top=newy+"px";var pos=SZN.Dom.getBoxPosition(this._dom.container);this._clientX=e.clientX;this._clientY=e.clientY;};SZN.Calendar.prototype._dragDown=function(e,elm){SZN.Events.cancelDef(e);this.eventMove=SZN.Events.addListener(document,"mousemove",this,"_handleMove",false,true);this._clientX=e.clientX;this._clientY=e.clientY;};SZN.Calendar.prototype.pick=function(x,y,date,callback){this._draw();this._dom.container.style.left=x+"px";this._dom.container.style.top=y+"px";this.selectedDate=new Date();if(date){this.selectedDate=SZN.Calendar.parseDate(date instanceof Array?date[0]:date);}this.currentDate=new Date(this.selectedDate);this.currentDate.setDate(1);this.callback=callback;this._switchTo();};SZN.Calendar.prototype.format=function(date){if(this.options.pickTime){date.setHours(this._dom.hour.value);date.setMinutes(this._dom.minute.value);}ret=[];for(var i=0;i<this.options.defaultFormat.length;i++){var result=this.options.defaultFormat[i];result=result.replace(/d/g,this.strpad(date.getDate(),2));result=result.replace(/g/g,parseInt(date.getHours())%12);result=result.replace(/G/g,date.getHours());result=result.replace(/h/g,this.strpad(parseInt(date.getHours())%12,2));result=result.replace(/H/g,this.strpad(date.getHours(),2));result=result.replace(/i/g,this.strpad(date.getMinutes(),2));result=result.replace(/j/g,date.getDate());result=result.replace(/m/g,this.strpad(date.getMonth()+1,2));result=result.replace(/n/g,date.getMonth()+1);result=result.replace(/s/g,this.strpad(date.getSeconds(),2));result=result.replace(/U/g,date.getTime());result=result.replace(/w/g,date.getDay());result=result.replace(/Y/g,date.getFullYear());result=result.replace(/x/g,this.strpad(date.getMilliseconds(),3));ret.push(result);}return ret;};SZN.Calendar.prototype.strpad=function(str,length){var s=str.toString();var l=(length?length:2);while(s.length<l){s="0"+s;}return s;};SZN.Calendar.prototype._draw=function(){if(!("container" in this._dom)){this._buildDom();document.body.appendChild(this._dom.container);}this._show();};SZN.Calendar.prototype._help=function(){alert("Výběr data:\n - Použijte «, » tlačítka pro vybrání roku\n - Použijte ‹, › tlačítka pro vybrání měsíce\n - Menu pro rychlejší výběr se zobrazí po delším stisku výše uvedených tlačítek\n - Stisknutím mezerníku zvolíte dnešní datum");};SZN.Calendar.prototype._buildDom=function(){this._dom.container=SZN.cEl("div",false,false,{"position":"absolute"});this._dom.content=SZN.cEl("div",false,"cal-content");this._dom.table=SZN.cEl("table");this._dom.thead=SZN.cEl("thead");this._dom.tbody=SZN.cEl("tbody");this._dom.tfoot=SZN.cEl("tfoot");this._dom.table.cellSpacing=0;this._dom.table.cellPadding=0;if(SZN.Browser.client=="ie"){this._dom.iframe=SZN.cEl("iframe",false,false,{"position":"absolute","left":"0px","top":"0px","zIndex":1});this._dom.content.style.zIndex=2;SZN.Dom.append([this._dom.container,this._dom.iframe,this._dom.content],[this._dom.content,this._dom.table]);}else{SZN.Dom.append([this._dom.container,this._dom.content],[this._dom.content,this._dom.table]);}SZN.Dom.append([this._dom.table,this._dom.thead,this._dom.tbody,this._dom.tfoot]);var r1=SZN.cEl("tr");var r2=SZN.cEl("tr",false);var r3=SZN.cEl("tr",false);SZN.Dom.append([this._dom.thead,r1,r2,r3]);var help=new SZN.Calendar.Nav(this,"?","Nápověda",this._help);this._dom.move=SZN.cEl("td",false,"cal-title");var close=new SZN.Calendar.Nav(this,"&times;","Zavřít kalendář",this._hide);this._dom.move.colSpan=6;SZN.Dom.append([r1,help.td,this._dom.move,close.td]);var x=" (podrž pro menu)";var buttonLabels=["&laquo;","&lsaquo;",this.options.today,"&rsaquo;","&raquo;"];var buttonStatuses=["Předchozí rok"+x,"Předchozí měsíc"+x,this.options.today,"Následující měsíc"+x,"Následující rok"+x];var buttonMethods=[this._yearB,this._monthB,this._monthC,this._monthF,this._yearF];this._dom.buttons=[];for(var i=0;i<buttonLabels.length;i++){var button=new SZN.Calendar.Nav(this,buttonLabels[i],buttonStatuses[i],buttonMethods[i]);SZN.Dom.addClass(button.td,"cal-button cal-nav");this._dom.buttons.push(button.td);r2.appendChild(button.td);}this._dom.buttons[2].colSpan=4;var wk=SZN.cEl("td",false,"cal-dayname cal-wn");wk.innerHTML="wk";r3.appendChild(wk);for(var i=0;i<this.options.dayNames.length;i++){var day=SZN.cEl("td",false,"cal-dayname");day.innerHTML=this.options.dayNames[i];r3.appendChild(day);if(i>4){SZN.Dom.addClass(day,"cal-weekend");}}this._dom.rows=[];for(var i=0;i<42;i++){var day=new SZN.Calendar.Day(this);this._days.push(day);if(!(i%7)){var tr=SZN.cEl("tr");this._dom.rows.push(tr);this._dom.tbody.appendChild(tr);this.ec.push(SZN.Events.addListener(tr,"mouseover",this,"_overRef",false,true));this.ec.push(SZN.Events.addListener(tr,"mouseout",this,"_outRef",false,true));var wk=SZN.cEl("td",false,"cal-wn cal-day");tr.appendChild(wk);}SZN.Dom.addClass(day.td,"cal-day");tr.appendChild(day.td);if(i%7>4){SZN.Dom.addClass(day.td,"cal-weekend");}}var tr=SZN.cEl("tr");this._dom.status=SZN.cEl("td",false,"cal-status");this._dom.status.colSpan=this.options.pickTime?6:8;SZN.Dom.append([this._dom.tfoot,tr],[tr,this._dom.status]);this._dom.status.innerHTML="Vyberte datum";if(this.options.pickTime){var td=SZN.cEl("td",false,"cal-time");td.colSpan=2;var inputHour=SZN.cEl("input");inputHour.type="text";this._dom.hour=inputHour;var sep=SZN.cTxt(":");var inputMinute=SZN.cEl("input");inputMinute.type="text";this._dom.minute=inputMinute;SZN.Dom.append([td,inputHour],[td,sep],[td,inputMinute],[tr,td]);this.ec.push(SZN.Events.addListener(this._dom.hour,"keydown",this,"_keyDown",false,true));this.ec.push(SZN.Events.addListener(this._dom.minute,"keydown",this,"_keyDown",false,true));}for(var i=0;i<this._dom.buttons.length;i++){if(i==2){continue;}var type=(i==1||i==3?0:(i<2?-1:1));var roller=new SZN.Calendar.Roller(this,this._dom.buttons[i],type,i>2);this._rollers.push(roller);}this.ec.push(SZN.Events.addListener(this._dom.move,"mousedown",this,"_dragDown",false,true));this.ec.push(SZN.Events.addListener(this._dom.status,"mousedown",this,"_dragDown",false,true));this.ec.push(SZN.Events.addListener(this._dom.container,"mousedown",this,"_cancelDown",false,true));};SZN.Calendar.prototype._keyDown=function(e,elm){if(e.keyCode==13){if(this.callback){var formats=this.format(this.selectedDate);this.callback.apply(window,formats);}this.makeEvent("datepick");this._hide();}};SZN.Calendar.prototype._handleKey=function(e,elm){if(!this._visible){return;}if(e.keyCode==32){this._monthC();}if(e.keyCode==27){this._hide();}};SZN.Calendar.prototype._overRef=function(e,elm){SZN.Dom.addClass(elm,"mouseover");};SZN.Calendar.prototype._outRef=function(e,elm){SZN.Dom.removeClass(elm,"mouseover");};SZN.Calendar.prototype._hide=function(){this._dom.container.style.display="none";this._visible=false;this.makeEvent("calendarHide");};SZN.Calendar.prototype._show=function(){this.makeEvent("calendarShow");this._dom.container.style.display="block";this._visible=true;};SZN.Calendar.prototype._getWeekNumber=function(date){var d=new Date(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);var DoW=d.getDay();d.setDate(d.getDate()-(DoW+6)%7+3);var ms=d.valueOf();d.setMonth(0);d.setDate(4);return Math.round((ms-d.valueOf())/(7*86400000))+1;};SZN.Calendar.prototype._switchTo=function(){for(var i=0;i<this._dom.rows.length;i++){this._dom.rows[i].style.display="";}var tmpDate=new Date(this.currentDate);tmpDate.setDate(1);var oneDay=1000*60*60*24;var weekIndex=(tmpDate.getDay()+6)%7;if(weekIndex){tmpDate.setTime(tmpDate.getTime()-weekIndex*oneDay);}var index=0;var today=new Date();var lastVisible=-1;for(var row=0;row<6;row++){var wn=this._dom.rows[row].firstChild;wn.innerHTML=this._getWeekNumber(tmpDate);for(var col=0;col<7;col++){var day=this._days[index];day.date=new Date(tmpDate);day.redraw(today);tmpDate.setTime(tmpDate.getTime()+oneDay);if(tmpDate.getMonth()==this.currentDate.getMonth()&&lastVisible==-1){lastVisible=0;}if(tmpDate.getMonth()!=this.currentDate.getMonth()&&lastVisible==0){lastVisible=row+1;}index++;}}for(var i=lastVisible;i<6;i++){this._dom.rows[i].style.display="none";}if(this.options.pickTime){this._dom.hour.value=this.strpad(this.selectedDate.getHours(),2);this._dom.minute.value=this.strpad(this.selectedDate.getMinutes(),2);}this._dom.move.innerHTML=this.options.monthNames[this.currentDate.getMonth()]+" "+this.currentDate.getFullYear();if(SZN.Browser.client=="ie"){this._dom.iframe.style.width=this._dom.content.offsetWidth+"px";this._dom.iframe.style.height=this._dom.content.offsetHeight+"px";}};SZN.Calendar.prototype._yearF=function(e,elm){this.currentDate.setFullYear(this.currentDate.getFullYear()+1);this._switchTo();};SZN.Calendar.prototype._yearB=function(e,elm){this.currentDate.setFullYear(this.currentDate.getFullYear()-1);this._switchTo();};SZN.Calendar.prototype._monthB=function(e,elm){this.currentDate.setMonth((this.currentDate.getMonth()+11)%12);if(this.currentDate.getMonth()==11){this.currentDate.setFullYear(this.currentDate.getFullYear()-1);}this._switchTo();};SZN.Calendar.prototype._monthF=function(e,elm){this.currentDate.setMonth((this.currentDate.getMonth()+1)%12);if(this.currentDate.getMonth()==0){this.currentDate.setFullYear(this.currentDate.getFullYear()+1);}this._switchTo();};SZN.Calendar.prototype._monthC=function(e){this.currentDate=new Date();this.currentDate.setDate(1);this._switchTo();};SZN.Calendar.parseDate=function(date){var selectedDate=new Date();var separators="[-/\\\\:.]";var chars="[0-9]";var patterns=["^ *("+chars+"{1,2}) *"+separators+" *("+chars+"{1,2}) *"+separators+" *("+chars+"{1,2})","^ *("+chars+"{4}) *"+separators+" *("+chars+"{1,2}) *"+separators+" *("+chars+"{1,2})","^ *("+chars+"{1,2}) *"+separators+" *("+chars+"{1,2}) *"+separators+" *("+chars+"{4})"];var datePattern="( +"+chars+"{1,2})?("+separators+chars+"{1,2})?("+separators+chars+"{1,2})? *$";var r=false;var index=0;while(!result&&index<patterns.length){var re=new RegExp(patterns[index]+datePattern);var result=re.exec(date);index++;}if(result){selectedDate=new Date(0);var a=Math.round(parseFloat(result[1]));var b=Math.round(parseFloat(result[2]));var c=Math.round(parseFloat(result[3]));var yearIndex=-1;if(result[1].length==4){yearIndex=0;}else{if(result[3].length==4){yearIndex=2;}else{if(a>31){a=a+(a>selectedDate.getFullYear()-2000?1900:2000);yearIndex=0;}else{c=c+(c>selectedDate.getFullYear()-2000?1900:2000);yearIndex=2;}}}if(yearIndex==0){selectedDate.setFullYear(a);selectedDate.setDate(1);var max=Math.max(b,c);var min=Math.min(b,c);if(max>13){selectedDate.setMonth(min-1);selectedDate.setDate(max);}else{selectedDate.setMonth(b-1);selectedDate.setDate(c);}}else{if(yearIndex==2){selectedDate.setFullYear(c);var max=Math.max(a,b);var min=Math.min(a,b);if(max>13){selectedDate.setMonth(min-1);selectedDate.setDate(max);}else{selectedDate.setMonth(b-1);selectedDate.setDate(a);}}}if(result[4]){var h=parseInt(result[4].match(/[0-9]+/)[0],10);var m=(result[5]?parseInt(result[5].match(/[0-9]+/)[0],10):0);var s=(result[6]?parseInt(result[6].match(/[0-9]+/)[0],10):0);selectedDate.setHours(h);selectedDate.setMinutes(m);selectedDate.setSeconds(s);}}return selectedDate;};SZN.Calendar.Button=SZN.ClassMaker.makeClass({"NAME":"Calendar.Button","VERSION":"1.0","CLASS":"class"});SZN.Calendar.Button._activeElement=false;SZN.Calendar.Button.prototype._over=function(e,elm){if(!SZN.Calendar.Button._activeElement){SZN.Dom.addClass(elm,"mouseover");}};SZN.Calendar.Button.prototype._out=function(e,elm){SZN.Dom.removeClass(elm,"mouseover");};SZN.Calendar.Button.prototype._overIgnore=function(e,elm){if(!SZN.Dom.hasClass(elm,"selected")){SZN.Dom.addClass(elm,"mouseover");}};SZN.Calendar.Button.prototype._outIgnore=function(e,elm){SZN.Dom.removeClass(elm,"mouseover");};SZN.Calendar.Button.prototype._down=function(e,elm){SZN.Events.cancelDef(e);SZN.Calendar.Button._activeElement=elm;SZN.Dom.addClass(elm,"mousedown");};SZN.Calendar.Button.prototype._up=function(e,elm){SZN.Calendar.Button._activeElement=false;SZN.Dom.removeClass(elm,"mousedown");};SZN.Calendar.Button.prototype.addOverEvents=function(elm,ignoreOthers){if(ignoreOthers){this.calendar.ec.push(SZN.Events.addListener(elm,"mouseover",this,"_overIgnore",false,true));this.calendar.ec.push(SZN.Events.addListener(elm,"mouseout",this,"_outIgnore",false,true));}else{this.calendar.ec.push(SZN.Events.addListener(elm,"mouseover",this,"_over",false,true));this.calendar.ec.push(SZN.Events.addListener(elm,"mouseout",this,"_out",false,true));}};SZN.Calendar.Button.prototype.addDownEvents=function(elm){this.calendar.ec.push(SZN.Events.addListener(elm,"mousedown",this,"_down",false,true));this.calendar.ec.push(SZN.Events.addListener(elm,"mouseup",this,"_up",false,true));};SZN.Calendar.Nav=SZN.ClassMaker.makeClass({"NAME":"Calendar.Nav","VERSION":"1.0","EXTEND":SZN.Calendar.Button,"CLASS":"class"});SZN.Calendar.Nav.prototype.$constructor=function(calendar,label,status,method){this.td=SZN.cEl("td",false,"cal-button");this.td.innerHTML=label;this.status=status;this.calendar=calendar;this.method=method;this.addOverEvents(this.td);this.addDownEvents(this.td);this.calendar.ec.push(SZN.Events.addListener(this.td,"mouseover",this,"_changeStatus",false,true));this.calendar.ec.push(SZN.Events.addListener(this.td,"mouseout",this,"_changeStatus",false,true));this.calendar.ec.push(SZN.Events.addListener(this.td,"click",this.calendar,this.method,false,true));};SZN.Calendar.Nav.prototype._changeStatus=function(){if(this.oldStatus){this.calendar._dom.status.innerHTML=this.oldStatus;this.oldStatus=false;}else{this.oldStatus=this.calendar._dom.status.innerHTML;this.calendar._dom.status.innerHTML=this.status;}};SZN.Calendar.Day=SZN.ClassMaker.makeClass({"NAME":"Calendar.Day","VERSION":"1.0","EXTEND":SZN.Calendar.Button,"CLASS":"class"});SZN.Calendar.Day.prototype.$constructor=function(calendar){this.td=SZN.cEl("td",false,"cal-day");this.calendar=calendar;this.date=false;this.addOverEvents(this.td);this.addDownEvents(this.td);this.calendar.ec.push(SZN.Events.addListener(this.td,"click",this,"_click",false,true));this.calendar.ec.push(SZN.Events.addListener(this.td,"mouseover",this,"_changeStatus",false,true));this.calendar.ec.push(SZN.Events.addListener(this.td,"mouseout",this,"_changeStatus",false,true));};SZN.Calendar.Day.prototype.redraw=function(today){this.td.innerHTML=this.date.getDate();SZN.Dom.removeClass(this.td,"cal-today");SZN.Dom.removeClass(this.td,"cal-selected");SZN.Dom.removeClass(this.td,"cal-obsolete");if(this.calendar.equalDates(this.date,today)){SZN.Dom.addClass(this.td,"cal-today");}if(this.calendar.equalDates(this.date,this.calendar.selectedDate)){SZN.Dom.addClass(this.td,"cal-selected");}if(this.date.getMonth()!=this.calendar.currentDate.getMonth()){SZN.Dom.addClass(this.td,"cal-obsolete");}};SZN.Calendar.Day.prototype._click=function(){if(this.calendar.callback){var formats=this.calendar.format(this.date);this.calendar.callback.apply(window,formats);}this.calendar.makeEvent("datepick");this.calendar._hide();};SZN.Calendar.Day.prototype._changeStatus=function(){if(this.oldStatus){this.calendar._dom.status.innerHTML=this.oldStatus;this.oldStatus=false;}else{this.oldStatus=this.calendar._dom.status.innerHTML;var str=this.calendar.options.dayNames[(this.date.getDay()+6)%7]+", ";str+=this.date.getDate()+". ";str+=this.calendar.options.monthNames[this.date.getMonth()]+" ";str+=this.date.getFullYear();this.calendar._dom.status.innerHTML=str;}};SZN.Calendar.Roller=SZN.ClassMaker.makeClass({"NAME":"Calendar.Roller","VERSION":"1.0","CLASS":"class"});SZN.Calendar.Roller.prototype.$constructor=function(calendar,parent,type,rightAlign){this.calendar=calendar;this.parent=parent;this.type=type;this.rightAlign=rightAlign;this.buttons=[];this.div=SZN.cEl("div",false,"cal-roller");this._hide();this.calendar._dom.content.appendChild(this.div);for(var i=0;i<12;i++){var btn=new SZN.Calendar.RollerButton(this,this.calendar);this.buttons.push(btn);this.div.appendChild(btn.div);}this._show();SZN.Events.addTimeFunction(this,"_showTimeout",this._show);this.calendar.ec.push(SZN.Events.addListener(this.parent,"mousedown",this,"_handleDown",false,true));};SZN.Calendar.Roller.prototype._handleDown=function(){this.calendar._timer=true;setTimeout(this._showTimeout,this.calendar.options.rollerDelay);};SZN.Calendar.Roller.prototype._show=function(){if(!this.calendar._timer){return;}var pos1=SZN.Dom.getBoxPosition(this.parent);var pos2=SZN.Dom.getBoxPosition(this.calendar._dom.content);this.div.style.display="block";var w=this.div.offsetWidth;for(var i=0;i<12;i++){var btn=this.buttons[i].div;if(SZN.Browser.client=="ie"){btn.style.width=w+"px";}switch(this.type){case -1:case 1:var y=this.calendar.currentDate.getFullYear();btn.innerHTML=y+this.type*(i*2+1);break;case 0:this.buttons[i].value=i;SZN.Dom.removeClass(btn,"selected");btn.innerHTML=this.calendar.options.monthNamesShort[i];if(i==this.calendar.currentDate.getMonth()){SZN.Dom.addClass(btn,"selected");}break;}}var l=pos1.left-pos2.left;if(this.rightAlign){l+=this.parent.offsetWidth-this.div.offsetWidth;};this.div.style.left=l+"px";this.div.style.top=(pos1.top-pos2.top+this.parent.offsetHeight)+"px";};SZN.Calendar.Roller.prototype._hide=function(){this.div.style.display="none";};SZN.Calendar.RollerButton=SZN.ClassMaker.makeClass({"NAME":"Calendar.RollerButton","VERSION":"1.0","EXTEND":SZN.Calendar.Button,"CLASS":"class"});SZN.Calendar.RollerButton.prototype.$constructor=function(roller,calendar){this.roller=roller;this.calendar=calendar;this.div=SZN.cEl("div",false,"label");this.addOverEvents(this.div,true);this.calendar.ec.push(SZN.Events.addListener(this.div,"mouseup",this,"_up",false,true));};SZN.Calendar.RollerButton.prototype._up=function(e,elm){var cal=this.calendar;switch(this.roller.type){case -1:case 1:cal.currentDate.setFullYear(this.div.innerHTML);cal._switchTo();break;case 0:cal.currentDate.setMonth(this.value);cal._switchTo();break;}};SZN.TreeChecker=SZN.ClassMaker.makeClass({"NAME":"SZN.TreeChecker","VERSION":"1.0","CLASS":"class"});SZN.TreeChecker.prototype.$constructor=function(ids){this.ids=ids;this.parentNode=null;this.mainNode=null;this.itemNodeName="li";this.listNodeName="ul";this.supported=false;if(typeof Function.apply!="undefined"){this.supported=true;}this.init();};SZN.TreeChecker.prototype.$destructor=function(){};SZN.TreeChecker.prototype.init=function(){if(!this.supported){return;}SZN.gEl(this.ids).style.visibility="hidden";this.mainNode=SZN.gEl(this.ids);};SZN.TreeChecker.prototype.run=function(ids){if(!this.supported){return;}this.parentNode=this.mainNode.getElementsByTagName("ul")[0];this.setListeners();SZN.gEl(this.ids).style.visibility="visible";};SZN.TreeChecker.prototype.setListeners=function(){var nds=this.parentNode.getElementsByTagName("input");for(var i=0;i<nds.length;i++){SZN.Events.addListener(nds[i],"click",this,this.check);}};SZN.TreeChecker.prototype.check=function(e,elm){if(elm.checked){this.checkChildren(elm);this.checkParent(elm);}else{this.uncheck(elm);}};SZN.TreeChecker.prototype.uncheck=function(nd){this.uncheckChildren(nd);this.uncheckParent(nd);};SZN.TreeChecker.prototype.checkChildren=function(nd){var parent=this.getParentItem(nd);if(!parent){return;}var items=parent.getElementsByTagName("input");for(var i=0;i<items.length;i++){items[i].checked=true;}};SZN.TreeChecker.prototype.checkParent=function(nd){var itemParent=this.getParentList(nd);if(!itemParent){return;}var items=itemParent.childNodes;var go=false;for(var i=0;i<items.length;i++){if(items[i].nodeName.toLowerCase()==this.itemNodeName){var inp=items[i].getElementsByTagName("input")[0];if(!inp.checked){go=false;return;}else{go=true;}}}if(!go){return;}var newParent=itemParent.parentNode;if(newParent==this.mainNode){return;}var newInp=newParent.getElementsByTagName("input")[0];newInp.checked=true;this.checkParent(newInp);};SZN.TreeChecker.prototype.uncheckChildren=function(nd){var parent=this.getParentItem(nd);if(!parent){return;}var items=parent.getElementsByTagName("input");for(var i=0;i<items.length;i++){items[i].checked=false;}};SZN.TreeChecker.prototype.uncheckParent=function(nd){var parent=this.getParentList(nd);do{if(parent){var item=this.getParentItem(parent);if(item){item.getElementsByTagName("input")[0].checked=false;parent=this.getParentList(item);}}}while(parent&&(parent!=this.parentNode));};SZN.TreeChecker.prototype.getParentItem=function(nd){var node=nd;while((node.nodeName.toLowerCase()!=this.itemNodeName)&&(node!=this.mainNode)){node=node.parentNode;}return (node!=this.mainNode)?node:false;};SZN.TreeChecker.prototype.getParentList=function(nd){var node=nd.parentNode;while((node.nodeName.toLowerCase()!=this.listNodeName)&&(node!=this.mainNode)){node=node.parentNode;}return (node!=this.mainNode)?node:false;};SZN.ShareManager=SZN.ClassMaker.makeClass({"NAME":"SZN.ShareManager","VERSION":"1.0","CLASS":"class"});SZN.ShareManager.prototype.$constructor=function(pageType,openerId,visible){this.pageType=pageType;this.visible=visible;this.opener=SZN.gEl(openerId);this.open=false;this.actionFolder={};this.sharedBox=SZN.gEl("shareWin");this.dataBox=SZN.gEl("sendEmailDataBox");this.request=new SZN.HTTPRequest("",this,"_answerAction");this.request.setMethod("post");var shareButtons=SZN.Dom.getElementsByClass("shareLink",this.sharedBox);for(var i=0;i<shareButtons.length;i++){SZN.Events.addListener(shareButtons[i],"click",this,"_openLink");}this.init();};SZN.ShareManager.prototype.$destructor=function(){};SZN.ShareManager.prototype.init=function(){if(this.visible){this.opener.style.display=this.pageType=="article"?"block":"inline";}if(SZN.gEl("f_send")){if(SZN.Browser.client=="ie"){SZN.gEl("f_send").style.left="-9px";}else{SZN.gEl("f_send").style.left="-14px";}}this.activate();};SZN.ShareManager.prototype.activate=function(){var links=this.opener.getElementsByTagName("a");if(this.pageType=="article"){this.actionFolder.print=SZN.Events.addListener(links[0],"click",this,"printAction");SZN.Events.addListener(SZN.gEl("cancelButton"),"click",this,"sharedAction");}else{SZN.gEl("videoEmailSender").style.display="inline";}var tmpForm=this.sharedBox?this.sharedBox.getElementsByTagName("form"):null;this.form=tmpForm?tmpForm[0]:null;this.actionFolder.formBox=SZN.Events.addListener(SZN.gEl("f_send"),"click",this,"formAction");};SZN.ShareManager.prototype.printAction=function(e,elm){SZN.Events.cancelDef(e);window.print();};SZN.ShareManager.prototype.sharedAction=function(e,elm){if(e){SZN.Events.cancelDef(e);}if(this.sharedBox.style.display!="block"){this.sharedBox.style.display="block";if(this.pageType=="video"){SZN.gEl("videoEmailSender").parentNode.style.marginBottom=0;this.sharedBox.style.marginBottom="1.5em";}}else{this.sharedBox.style.display="none";if(this.pageType=="video"){SZN.gEl("videoEmailSender").parentNode.style.marginBottom="1.5em";this.sharedBox.style.marginBottom=0;}}};SZN.ShareManager.prototype.formAction=function(e,elm){SZN.Events.cancelDef(e);var url=this._getSendUrl();this.request.send(url);};SZN.ShareManager.prototype._openLink=function(e,elm){SZN.Events.cancelDef(e);var height=400,width=600,leftPosition=(window.screen.width/2)-((width/2)+10),topPosition=(window.screen.height/2)-((height/2)+50),windowFeatures="status=no,height="+height+",width="+width+",resizable=yes,left="+leftPosition+",top="+topPosition+",screenX="+leftPosition+",screenY="+topPosition+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no";window.open(elm.getAttribute("href"),"sharer",windowFeatures);return false;};SZN.ShareManager.prototype._getSendUrl=function(){var inps=this.dataBox.getElementsByTagName("input");var out="/email?ajax=yes&description="+encodeURIComponent(SZN.gEl("f_text").value);for(var i=0;i<inps.length;i++){out+="&"+inps[i].name.split("_")[1]+"="+encodeURIComponent(inps[i].value);}return out;};SZN.ShareManager.prototype._answerAction=function(answer,status){if(status!=200){alert("E-mail se nepodařilo odeslat");}eval("var data = "+answer);if(data.status){alert("E-mail byl úspěšně odeslán na "+data.to);DOT.hit("event",{"d":{"action":"email_odeslano"}});this.form.reset();this.sharedAction();}else{var errors="Některé položky jsou špatně vyplněny:\n";for(i=0;i<data.errors.length;i++){errors+=data.errors[i].message+"\n";}alert(errors);}};var FlashUtils=function(){this.addFlashToPage=function(){var fl=document.getElementById("VideoSpot");if(fl.outerHTML){var par=fl.getElementsByTagName("PARAM");var parC=[];for(var i=0;i<par.length;i++){parC[i]=par[i].cloneNode("true");}var newFl=fl.cloneNode(false);if(typeof newFl.data!="undefined"){newFl.removeAttribute("data");}for(var i=0;i<parC.length;i++){newFl.appendChild(parC[i]);}var pNode=fl.parentNode;pNode.removeChild(fl);document.write(newFl.outerHTML);}};this.initAutoPlay=function(){this.handler=SZN.Events.addListener(window,"load",this,"setAutoplay",false,false);};this.setAutoplay=function(){var pageurl=document.location.toString();if(pageurl.indexOf("videoId=")!=-1){var fl=document.getElementById("VideoSpot");try{fl.SetVariable("autoplay","1");}catch(e){}try{fl.setVariable2("autoplay","1");}catch(e){}}};};var flashUtils=new FlashUtils();function streamPlayerLoad(){flashUtils.setAutoplay();}SZN.Discussion=SZN.ClassMaker.makeClass({"NAME":"SZN.Discussion","VERSION":"1.0","CLASS":"class"});SZN.Discussion.prototype.$constructor=function(options){this.makeForm=false;this.countStart=false;this.formType="";this.user={};this.elm="";this.form="";this.visible=false;this.stornoAction=false;this.quoteAction=false;this.previewAction=false;this.previewShow=false;this.sendAction=false;this.quoteShow=false;this.submit=false;this.options={"newCont1":"newContrib1","newCont2":"newContrib2","contClass":"Reaction","rootCont":"contributions","id":"","articleId":"","sectionId":"","maxLength":1000,"loginUri":"","fullUri":"","status":"","pageSize":30,"contributionCount":0,"ordering":"oldfirst"};for(p in options){this.options[p]=options[p];}this.newCont1=SZN.gEl(this.options["newCont1"]);this.newCont2=SZN.gEl(this.options["newCont2"]);this.rootCont=SZN.gEl(this.options["rootCont"]);this.contClass=this.options["contClass"];this.lastPage=Math.floor(this.options.contributionCount/this.options.pageSize)+1;this._link();};SZN.Discussion.prototype._addContNew=function(e,elm){if(e){SZN.Events.cancelDef(e);}this._closeForm();this.formType="new";this.elm=elm;this._checkUser();};SZN.Discussion.prototype._addContReaction=function(e,elm){SZN.Events.cancelDef(e);this._closeForm();this.formType="reaction";this.elm=elm;this._checkUser();};SZN.Discussion.prototype._makeForm=function(){this.form=SZN.cEl("div","discussionFormDiv");this.arrow=SZN.cEl("div","","arrow");this.counter=SZN.cEl("div","counter","counter");this.contributionCount=SZN.cEl("div","contributionCount","contributionCount");var nameCity=this.user.name+" "+this.user.surname+", "+this.user.city;if(this.user.verifyPhoto==1){html="<img width=\"40\" height=\"50\" src=\""+this.user.photoUrl+"\" alt=\""+this.user.name+" "+this.user.surname+" - portrét\" title=\"\" border=\"0\" />";}else{html="<img width=\"40\" height=\"50\" src=\"/static/images/portrait-nv.gif\" alt=\"\" title=\"\" border=\"0\" />";}html+="<form action=\"/diskuse/addContributionProcess\" method=\"post\">";html+="<input type=\"hidden\" name=\"id\" value=\""+this.options["id"]+"\" />";html+="<input type=\"hidden\" name=\"articleId\" value=\""+this.options["articleId"]+"\" />";html+="<input type=\"hidden\" name=\"sectionId\" value=\""+this.options["sectionId"]+"\" />";html+="<input type=\"hidden\" name=\"hashId\" value=\""+this.user.hashId+"\" />";html+="<p><span id=\"opinionType\"></span>&nbsp;<strong>"+nameCity+"</strong></p>";html+="<p class=\"dateP\"><span class=\"date\"></span></p>";html+="<div class=\"textMessage\"><span class=\"contentMessage\"></span><p class=\"link\"><a href=\"//www.novinky.cz/327969-.html\">Proč je počet názorů omezen?</a></p></div>";html+="<p class=\"textarea\"><textarea name=\"content\"></textarea></p>";html+="<p class=\"inputs\"><input type=\"button\" value=\"Odeslat\" class=\"submit\" /><input id=\"preview\" type=\"button\" class=\"preview\" value=\"Náhled\" /><input id=\"storno\" type=\"button\" value=\"Storno\" class=\"storno\" /></p>";html+="</form>";html+="<img src=\"/static/images/quote.gif\" class=\"quote\" alt=\"Vložit citaci\" title=\"\" />";this.form.innerHTML=html;this.form.appendChild(this.counter);this.form.appendChild(this.contributionCount);this.form.appendChild(this.arrow);this.makeForm=true;this._formPos();};SZN.Discussion.prototype._formPos=function(){var date=new Date();var week=["neděle","pondělí","úterý","středa","čtvrtek","pátek","sobota"];var months=["ledna","února","března","dubna","května","června","července","srpna","září","října","listopadu","prosince"];var weekDay=week[date.getDay()];var day=date.getDate();var month=months[date.getMonth()];var year=date.getFullYear();var fullDate=weekDay+", "+day+"."+month+" "+year;var tld_arr=window.location.hostname.split(".");var tld_domain=tld_arr.pop();var input=this.form.getElementsByTagName("input");var span=this.form.getElementsByTagName("span");if(!this.stornoAction){for(var i=0;i<input.length;i++){if(input[i].id=="storno"){this.stornoAction=true;var closeAction=SZN.Events.addListener(input[i],"click",this,"_closeForm",false);}}}if(!this.quoteAction){var quoteImg=this.form.getElementsByTagName("img");for(var i=0;i<quoteImg.length;i++){if(quoteImg[i].className=="quote"){this.quoteAction=true;this.quoteButton=quoteImg[i];var quoteAct=SZN.Events.addListener(quoteImg[i],"click",this,"_insertQuote",false);break;}}}if(!this.previewAction){for(var i=0;i<input.length;i++){if(input[i].id=="preview"){this.previewInput=input[i];this.previewAction=true;var previewAction=SZN.Events.addListener(input[i],"click",this,"_showPreview",false);}}}if(this.formType=="new"){if(this.user.reason=="ok"){this.form.className="new";for(var i=0;i<span.length;i++){if(span[i].id=="opinionType"){span[i].innerHTML="Váš názor:";}if(span[i].className=="date"){span[i].innerHTML=fullDate;}}for(var i=0;i<input.length;i++){if(input[i].id=="parentId"){input[i].value="";}}this.elm.style.display="none";var parent=this.elm.parentNode;parent.appendChild(this.form);this.form.style.display="block";this.arrow.style.display="none";var textarea=this.form.getElementsByTagName("textarea")[0];if(this.user.contributionCount==0){this.message="Vložte první názor (můžete vložit celkem dva názory k tomuto článku).";var messageLeft=2;}else{if(this.user.contributionCount==1){this.message="Vložte druhý názor (můžete vložit celkem dva názory k tomuto článku).";var messageLeft=1;}else{if(this.user.contributionCount==2){this.message="Nemůžete vložit již žádný názor. Vložit lze maximálně dva názory k jednomu článku.";var messageLeft=0;textarea.style.display="none";SZN.Dom.getElementsByClass("inputs")[0].style.visibility="hidden";this.contributionCount.style.display="none";this.counter.style.display="none";this.quoteButton.style.display="none";}}}SZN.Dom.getElementsByClass("contentMessage")[0].innerHTML=this.message;this.contributionCount.innerHTML="Zbývá názorů: <strong>"+messageLeft+"</strong>";this.visible=true;}else{if(this.user.reason=="user_banned"){this.form.className="new";var banMessage="Váš účet je zablokován. O amnestii můžete požádat na adrese <a class=\"banned\" href=\"mailto:vasenazory@novinky.cz\">vasenazory@novinky.cz</a>.";this.form.innerHTML=banMessage;this.elm.style.display="none";var parent=this.elm.parentNode;parent.appendChild(this.form);this.form.style.display="block";this.arrow.style.display="none";this.visible=true;}else{if(this.user.reason=="user_not_verified"||this.user.reason=="user_not_registered"){this.form.className="new";var banMessage="Váš účet není ověřen. Pokud jste se dosud neregistroval(a), vyplňte <a class=\"banned\" href=\"//www.novinky."+tld_domain+"/vasenazory\">registrační formulář</a>. Pokud jste již zaregistrován(a) a máte autentizační kód, zadejte ho v <a class=\"banned\" href=\"//www.novinky."+tld_domain+"/vasenazory/overeni-kodu\">tomto formuláři</a>.";this.form.innerHTML=banMessage;this.elm.style.display="none";var parent=this.elm.parentNode;parent.appendChild(this.form);this.form.style.display="block";this.arrow.style.display="none";this.visible=true;}}}}if(this.formType=="reaction"){if(this.user.reason=="ok"){var parentId=this.elm.parentNode.id.split("Reaction-")[1];var parent=SZN.gEl("m-"+parentId);this.form.className="reaction";for(var i=0;i<span.length;i++){if(span[i].id=="opinionType"){span[i].innerHTML="Váš názor:";}if(span[i].className=="date"){span[i].innerHTML=fullDate;}}parent.parentNode.insertBefore(this.form,parent.nextSibling);this.form.style.display="block";this.arrow.style.display="block";this.visible=true;}else{if(this.user.reason=="user_banned"){var parentId=this.elm.parentNode.id.split("Reaction-")[1];var parent=SZN.gEl("m-"+parentId);this.form.className="reaction";var banMessage="Váš účet je zablokován. O amnestii můžete požádat na adrese <a class=\"banned\" href=\"mailto:vasenazory@novinky.cz\">vasenazory@novinky.cz</a>.";this.form.innerHTML=banMessage;this.form.appendChild(this.arrow);parent.parentNode.insertBefore(this.form,parent.nextSibling);this.form.style.display="block";this.arrow.style.display="block";this.visible=true;}else{if(this.user.reason=="user_not_verified"){var parentId=this.elm.parentNode.id.split("Reaction-")[1];var parent=SZN.gEl("m-"+parentId);this.form.className="reaction";var banMessage="Váš účet není ověřen. Pokud jste se dosud neregistroval(a), vyplňte <a class=\"banned\" href=\"//www.novinky."+tld_domain+"/vasenazory\">registrační formulář</a>. Pokud jste již zaregistrován(a) a máte autentizační kód, zadejte ho v <a class=\"banned\" href=\"//www.novinky."+tld_domain+"/vasenazory/overeni-kodu\">tomto formuláři</a>.";this.form.innerHTML=banMessage;this.form.appendChild(this.arrow);parent.parentNode.insertBefore(this.form,parent.nextSibling);this.form.style.display="block";this.arrow.style.display="block";this.visible=true;}}}}this._ajaxSendStart();this._startCountContLength();};SZN.Discussion.prototype._showPreview=function(e,elm){if(!this.previewShow){this.previewShow=true;this.previewInput.value="Editace";var areaValue=this._parsePreviewText(this.textarea.value);this.areaParent=this.textarea.parentNode;var parent=this.areaParent.parentNode;this.previewBox=SZN.cEl("div","","",{"width":"500px","margin":"10px 0 0 70px","clear":"both","padding":"8px 0 0 0"});this.previewBox.innerHTML=areaValue;this.areaParent.style.display="none";this.areaParent.style.visibility="hidden";this.quoteButton.style.display="none";this.quoteButton.style.visibility="hidden";this.counter.style.display="none";this.counter.style.visibility="hidden";parent.insertBefore(this.previewBox,this.areaParent);}else{this.previewShow=false;this.previewInput.value="Náhled";this.previewBox.parentNode.removeChild(this.previewBox);this.areaParent.style.display="block";this.areaParent.style.visibility="visible";this.quoteButton.style.display="block";this.quoteButton.style.visibility="visible";this.counter.style.display="block";this.counter.style.visibility="visible";}};SZN.Discussion.prototype._parsePreviewText=function(text){var parseText="";if(text.indexOf("[citace")==-1){var rplTxt=text.replace(/\n/g,"<br />");parseText="<p style=\"margin:0px; padding-bottom:10px;\">"+rplTxt+"</p>";}else{var text1=text.split("[/citace]");var text2=text1[0].split("]");var text3=text2[0].split("[citace ")[1];var txt1=text2[1].replace(/\n/g,"<br />");var txt2=text1[1].replace(/\n/g,"<br />");parseText+="<p style=\"font-style:italic; margin:0px; padding:0px 5px 10px 15px;\"><strong>"+text3+"</strong> řekl(a):<br /><span>"+txt1+"</span></p><p style=\"margin:0px; padding-bottom:10px;\">"+txt2+"</p>";}return parseText;};SZN.Discussion.prototype._insertQuote=function(){if(!this.quoteShow||this.textarea.value==""){if(this.formType=="reaction"){var pId=this.elm.parentNode.id.split("Reaction-")[1];var nameSpan=SZN.gEl("name-"+pId);var name=nameSpan.innerHTML;var quoteHTML="[citace "+name+"]\n sem vložte text, který chcete citovat \n[/citace]\n sem vložte vaši reakci";var txtValue=this.textarea.value;var insertedHTML=quoteHTML+" "+txtValue;this.textarea.value=insertedHTML;}if(this.formType=="new"){var quoteHTML="[citace Jméno Příjmení]\n sem vložte text, který chcete citovat \n[/citace]\n sem vložte vaši reakci";var txtValue=this.textarea.value;var insertedHTML=quoteHTML+" "+txtValue;this.textarea.value=insertedHTML;}this.quoteShow=true;this._countContLength();}};SZN.Discussion.prototype._ajaxSendStart=function(){if(!this.sendAction){if(this.user.reason!="user_banned"&&this.user.reason!="user_not_verified"&&this.user.reason!="user_not_registered"){var form=this.form.getElementsByTagName("form")[0];var inputs=form.getElementsByTagName("input");for(var i=0;i<inputs.length;i++){if(inputs[i].className=="submit"){this.submitAction=SZN.Events.addListener(inputs[i],"click",this,"_ajaxSend",false);}}this.sendAction=true;}}};SZN.Discussion.prototype._ajaxSend=function(e,elm){SZN.Events.cancelDef(e);if(this.textarea.value==""){alert("Nemůžete odeslat prázdný příspěvek.");}else{if(this.submit==false){var rq=new SZN.HTTPRequest();rq.setMethod("post");rq.setFormat("txt");rq.setMode("async");var parentId="";var postData="js=1&id="+this.options["id"]+"&articleId="+this.options["articleId"]+"&sectionId="+this.options["sectionId"]+"&hashId="+this.user.hashId+"&parentId="+parentId+"&content="+encodeURIComponent(this.textarea.value);rq.setPostData(postData);rq.send("/diskuse/addContributionProcess",this,"_ajaxCallSend");}this.submit=true;}};SZN.Discussion.prototype._ajaxCallSend=function(txt,status){var title=document.querySelector(".discussionHeader h1").innerText;DOT.hit("event",{"d":{"service":"novinky","action":"novy_nazor","name":"nazorove_forum","title":title}});var client=SZN.Browser.client;eval("data = "+txt);if(data.result=="data_error"){alert(data.errorName);this.submit=false;}else{if(data.result=="user_not_verified"||data.result=="user_banned"||data.result=="user_not_registered"){var elm=SZN.gEl("newContrib1");this._addContNew(null,elm);}else{if(data.result=="ok"){var ranNum=Math.round(Math.random()*1000);var d=new Date();var ranNum=d.getTime();if(this.options.ordering=="oldfirst"){if(location.href.indexOf("&page=")!=-1){if(location.href.indexOf("&r=")!=-1){var loc=location.href.indexOf("&r=")<location.href.indexOf("&page=")?location.href.split("&r=")[0]:location.href.split("&page=")[0];}else{var loc=location.href.split("&page=")[0];}var newLoc=loc+"&page="+this.lastPage+"&r="+ranNum+"#c"+data.contributionId;}else{var newLoc=location.href+"&page="+this.lastPage+"&r="+ranNum+"#c"+data.contributionId;}}else{if(this.options.ordering=="newfirst"){if(location.href.indexOf("&page=")!=-1){if(location.href.indexOf("&r=")!=-1){var loc=location.href.indexOf("&r=")<location.href.indexOf("&page=")?location.href.split("&r=")[0]:location.href.split("&page=")[0];}else{var loc=location.href.split("&page=")[0];}var newLoc=loc+"&page=1&r="+ranNum+"#c"+data.contributionId;}else{var newLoc=location.href+"&page=1&r="+ranNum+"#c"+data.contributionId;}}}window.setTimeout(SZN.bind(this,function(){location.href=newLoc;}),500);}}}};SZN.Discussion.prototype._startCountContLength=function(){if(this.user.reason=="ok"&&this.visible==true&&this.countStart==false){this.textarea=this.form.getElementsByTagName("textarea")[0];if(SZN.Browser.client=="ie"){this.counter.appendChild(SZN.cTxt("Zbývá "));this.C=SZN.cEl("strong");this.C.appendChild(SZN.cTxt(this.options.maxLength));this.counter.appendChild(this.C);this.counter.appendChild(SZN.cTxt(" znaků"));}else{this.counter.innerHTML="Zbývá <strong>"+this.options.maxLength+"</strong> znaků";}var countAction=SZN.Events.addListener(this.textarea,"keyup",this,"_countContLength",false);var countPressAction=SZN.Events.addListener(this.textarea,"keypress",this,"_countContLength",false);var countChangeAction=SZN.Events.addListener(this.textarea,"change",this,"_countContLength",false);this.countStart=true;}};SZN.Discussion.prototype._countContLength=function(e,elm){var txtLength=this.textarea.value.length;if(txtLength>this.options.maxLength){alert("Překročili jste maximální počet znaků");this.textarea.value=this.textarea.value.substr(0,this.options.maxLength);}if(SZN.Browser.client=="ie"){SZN.Dom.clear(this.C);this.C.appendChild(SZN.cTxt((this.options.maxLength-txtLength)));}else{this.counter.innerHTML="Zbývá <strong>"+(this.options.maxLength-txtLength)+"</strong> znaků";}};SZN.Discussion.prototype._closeForm=function(){if(this.makeForm&&this.visible){if(this.formType=="new"){this.elm.style.display="block";}document.body.appendChild(this.form);if(this.user.reason!="user_banned"&&this.user.reason!="user_not_verified"&&this.user.reason!="user_not_registered"){this.textarea.value="";if(SZN.Browser.client=="ie"){SZN.Dom.clear(this.C);this.C.appendChild(SZN.cTxt(this.options.maxLength));}else{this.counter.innerHTML="Zbývá <strong>"+this.options.maxLength+"</strong> znaků";}}this.form.style.display="none";this.visible=false;this.quoteShow=false;if(this.previewShow){this._showPreview();}}};SZN.Discussion.prototype._checkUser=function(){url="/diskuse/checkUser";data="id="+this.options.id;var rq=new SZN.HTTPRequest();rq.setMethod("post");rq.setFormat("txt");rq.setMode("async");rq.setPostData(data);rq.send(url,this,"_userRunn");};SZN.Discussion.prototype._userRunn=function(txt,status){if(status==200){eval("var data = "+txt);for(p in data){this.user[p]=data[p];}this._addCont();}};SZN.Discussion.prototype._addCont=function(){if(this.user.logged=="ok"){if(this.user.reason=="ok"||this.user.reason=="user_banned"||this.user.reason=="user_not_verified"||this.user.reason=="user_not_registered"){if(this.makeForm){this._formPos();}else{this._makeForm();}}}else{location.replace(this.options["loginUri"]);}};SZN.Discussion.prototype._link=function(){addNewCont1=this.newCont1?SZN.Events.addListener(this.newCont1,"click",this,"_addContNew",false):"";addNewCont2=this.newCont2?SZN.Events.addListener(this.newCont2,"click",this,"_addContNew",false):"";if(this.options["status"]!=""){var elm=SZN.gEl("newContrib1");this._addContNew(null,elm);}};SZN.DiscussionVote=SZN.ClassMaker.makeClass({"NAME":"SZN.DiscussionVote","VERSION":"1.0","CLASS":"class"});SZN.DiscussionVote.prototype.$constructor=function(voteButton){var voteLinks=SZN.Dom.getElementsByClass(voteButton,null,"span");for(var i=0;i<voteLinks.length;i++){SZN.Events.addListener(voteLinks[i],"click",this,"_vote");}};SZN.DiscussionVote.prototype._vote=function(e,elm){var title=document.querySelector(".discussionHeader h1").innerText;var value;if(elm.innerText=="Souhlasím"){value="souhlas";}else{value="nesouhlas";}try{DOT.hit("event",{"d":{"service":"novinky","action":value,"name":"nazorove_forum","title":title}});}finally{elm.parentNode.getElementsByTagName("form")[0].submit();}};var login={"xmlHttpReq":false,"chatStatusId":true,"check":function(loginUri,logoutUri,page,template){if(window.XMLHttpRequest){this.xmlHttpReq=new XMLHttpRequest();}else{if(window.ActiveXObject){this.xmlHttpReq=new ActiveXObject("Microsoft.XMLHTTP");}}this.xmlHttpReq.open("POST","/sessionCheck?loginUri="+loginUri+"&logoutUri="+logoutUri+"&page="+page,true);this.xmlHttpReq.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this.xmlHttpReq.onreadystatechange=function(){if(login.xmlHttpReq.readyState==4){if(login.xmlHttpReq.status==200){SZN.gEl("loginLine").innerHTML=login.xmlHttpReq.responseText;SZN.gEl("loginLine").style.display="block";var loginLink=SZN.gEl("loginLink");if(loginLink){if(template=="section_hp"){loginLink.setAttribute("data-dot","hp_prihlaseni");}if(template=="section_standard"){loginLink.setAttribute("data-dot","r_prihlaseni");}if(template=="article_standard"){loginLink.setAttribute("data-dot","c_prihlaseni");}}var seznamLink=SZN.gEl("seznamLink");if(seznamLink){if(template=="section_hp"){seznamLink.setAttribute("data-dot","hp_seznam");}if(template=="section_standard"){seznamLink.setAttribute("data-dot","r_seznam");}if(template=="article_standard"){seznamLink.setAttribute("data-dot","c_seznam");}}}}};this.xmlHttpReq.send("");},"checkAjax":function(loginUri,logoutUri){SZN.xmlhttpPost("/sessionCheckAjax?loginUri="+loginUri+"&logoutUri="+logoutUri,login.evalAjax);},"evalAjax":function(result,attr){if(window.ENABLE_ONLINE_CHAT&&login.chatStatusId){if(result.loginStatus){var content="<form onsubmit=\"return online.sendComment();\">"+"<input type=\"text\" id=\"commentContent\" />"+"<input type=\"submit\" value=\"Odeslat\" onclick=\"return online.sendComment();\">"+"</form>";window.loggedUserName=result.userName;window.loggedUserDomain=result.domain;}else{var content="Pokud chcete poslat vlastní příspěvek, musíte se <a href=\""+result.loginUri+"\">přihlásit</a>!";}}else{var content="<strong>Omlouváme se, ale chat není momentálně dostupný. Děkujeme za pochopení.</strong>";}SZN.gEl("addComment").innerHTML=content;}};SZN.Joke=SZN.ClassMaker.makeClass({"NAME":"SZN.Joke","VERSION":"1.0","CLASS":"class"});SZN.Joke.prototype.$constructor=function(imageId,linkId){this.elms=[SZN.gEl(imageId),SZN.gEl(linkId)];for(var i=0;i<this.elms.length;i++){this.url=this.elms[i].href.replace(/&/g,"&amp;");SZN.Events.addListener(this.elms[i],"click",this,"_open");}};SZN.Joke.prototype._open=function(e,elm){SZN.Events.cancelDef(e);window.open(this.url,"_blank","width=790,height=520,menubar=yes,resizable=yes,scrollbars=yes");};SZN.LocalitySelector=SZN.ClassMaker.makeClass({"NAME":"SZN.LocalitySelector","VERSION":"1.0","CLASS":"class"});SZN.LocalitySelector.prototype.$constructor=function(data,url){this.state="";this.selectKraj=SZN.gEl("select_kraj");this.selectOkres=SZN.gEl("select_okres");this.selectObec=SZN.gEl("select_obec");var year=String(location.pathname.match(/\d+/)[0]);if(year=="2013"){year="2012";}this.url=url||"/volby/snemovna-"+year+"/obce/?okres=";if(this.selectOkres.options.length==1){this.selectOkres.disabled=true;}if(this.selectObec.options.length==1){this.selectObec.disabled=true;}SZN.Events.addListener(this.selectKraj,"change",this,"_change");SZN.Events.addListener(this.selectOkres,"change",this,"_change");SZN.Events.addListener(this.selectObec,"",this,"_change");this.data=data;};SZN.LocalitySelector.prototype._change=function(e,elm){if(elm.id=="select_kraj"){this._clear(this.selectOkres);this.selectObec.disabled=true;this._clear(this.selectObec);if(elm.value==0){this.selectOkres.disabled=true;this.selectObec.disabled=true;}else{this._create(this.data[elm.value],this.selectOkres);if(elm.value=="hlavni-mesto-praha"){this.selectOkres.remove(0);this._request("praha");this.state="praha";}else{this.state="";};this.selectOkres.disabled=false;}}else{if(elm.id=="select_okres"){this._clear(this.selectObec);if(elm.value==0){this.selectObec.disabled=true;}else{this._request(elm.value);}}else{if(elm.id=="select_obec"){};}}};SZN.LocalitySelector.prototype._request=function(val){this.rq=new SZN.HTTPRequest();this.rq.setMethod("get");this.rq.setFormat("txt");this.rq.setMode("async");var url=this.url+val;this.rq.send(url,this,"_obce");};SZN.LocalitySelector.prototype._obce=function(txt,status){if(status==200){eval("var response = "+txt+";");this._create(response,this.selectObec);this.selectObec.disabled=false;};};SZN.LocalitySelector.prototype._create=function(data,select){if(select.id=="select_okres"&&this.state=="praha"){select.options[select.options.length]=new Option("Okres",0);};for(var i=0;i<data.length;i++){select.options[select.options.length]=new Option(data[i].name,data[i].url);};};SZN.LocalitySelector.prototype._clear=function(select){console.log(this.state);var val=0;if(select.id=="select_okres"&&this.state=="praha"){val=-1;}else{val=0;}console.log(val);for(var i=select.options.length-1;i>val;i--){select.remove(i);};};SZN.OkresSelector={};SZN.OkresSelector.setSelects=function(elm1,elm2,data){SZN.OkresSelector.elm1=SZN.gEl(elm1);SZN.OkresSelector.elm1.previousValue=SZN.OkresSelector.elm1.value;SZN.OkresSelector.elm2=SZN.gEl(elm2);SZN.OkresSelector.data=data;SZN.Events.addListener(SZN.gEl(elm1),"change",SZN.OkresSelector,"set");};SZN.OkresSelector.set=function(ise,v1,v2){var kraj=SZN.OkresSelector.elm1.value;var okresy=SZN.OkresSelector.data[kraj];var elm=SZN.OkresSelector.elm2;if(true||!ise){while(elm.length){elm.remove(0);}if(!ise){SZN.OkresSelector.elm1.value=(v1=="")?-1:v1;}if(SZN.OkresSelector.elm1.value==-1){elm.disabled=true;}else{elm.disabled=false;for(var i in okresy){if(i=="LAST")continue;elm.options[elm.options.length]=new Option(okresy[i],i.substring(1));}}if(!ise){SZN.OkresSelector.elm2.value=(v2=="")?-1:v2;}SZN.OkresSelector.elm1.previousValue=kraj;}};SZN.Kms=SZN.ClassMaker.makeClass({"NAME":"Kms","VERSION":"1.0","CLASS":"class"});SZN.Kms.prototype.$constructor=function(embed_id,zone,section,count){this.zone=zone;this.section=section;SZN.Events.onDomReady(this,this._callKms);};SZN.Kms.prototype._callKms=function(kod){im.ajaxAd(SZN.bind(this,this._getKms),this.zone,this.section);};SZN.Kms.prototype._getKms=function(kod){var rgx=new RegExp("\n|\r|<!--[^>]*-->","gm");var comentsRgx=new RegExp("<!--[^>]*-->","gm");var coments=kod.match(comentsRgx);var kod;if(kod.indexOf("impress?spotId")!=-1&&kod!=""){kod=kod.replace(rgx,"");kod=kod.replace(/\/><br \/><a/g,"/><br /><br /><a");kod=kod.substr(6);var json={"kms":kod,"type":"kms","kms_miss":"//ad.seznam.cz/miss?zoneId="+this.zone+"&section="+this.section};SZN.gEl("VideoSpot").setAds(json);var multimediaBox=SZN.gEl("multimediaBox");var div;for(var a=0;a<coments.length;a++){div=SZN.cEl("div","","AdComent");div.innerHTML=coments[a];multimediaBox.appendChild(div);}}};var exchange={"exchangeDiv":null,"sectionHtml":"","showExchange":function(data,adPosition){if(data.indexOf("/miss?zoneId")==-1){SZN.Dom.addClass(exchange.exchangeDiv,"adFull");var HTMLaJS=SZN.Dom.separateCode(data);var HTML=HTMLaJS[0];var JS=HTMLaJS[1];exchange.exchangeDiv.innerHTML=HTML;eval(JS);}else{exchange.exchangeDiv.innerHTML=exchange.sectionHtml+data;};},"init":function(){this.exchangeDiv=SZN.gEl("exchange");if(this.exchangeDiv!=null){var adPositions=[{"zoneId":"seznam.novinky.hp.kurzy","callback":this.showExchange}];if(SZN.Cookie.getInstance().get("adb")=="1"&&!SZN.Cookie.getInstance().get("ds")){adPositions[0].flag="!synconly";adPositions[0].collocation+=" adblock";}im.getAds(adPositions,true);}},"setSectionHtml":function(sectionHtml){this.sectionHtml=sectionHtml;}};SZN.GetRus=SZN.ClassMaker.makeClass({"NAME":"GetRus","VERSION":"1.0","CLASS":"class"});SZN.GetRus.prototype.$constructor=function(url,query,abVariant,adbCookie){this.query=query;this.abVariant=abVariant;this.adbCookie=adbCookie;this.rq=new SZN.HTTPRequest();this.rq.setMethod("get");this.rq.setFormat("txt");this.rq.setMode("async");var fullUrl=url+"?_nocache="+Math.round(Math.random()*999);this.rq.send(fullUrl,this,"_getRus");};SZN.GetRus.prototype._getRus=function(txt,status){var dotConfig={"service":"novinky","mousedown":true};if(window._SKLIK_AB_ALTERNATIVE){dotConfig.abtest="sklik-1435/"+window._SKLIK_AB_ALTERNATIVE;}if(status==200){eval("var response = "+txt+";");if(response.userName!=""&&response.domain!=""){dotConfig.rus=response.userName+"@"+response.domain;}}if(this.query!=""){dotConfig.query=this.query;}if(this.abVariant){dotConfig.abtest=this.abVariant;}var adbCookie=SZN.Cookie.getInstance().get(this.adbCookie);if(adbCookie=="1"){try{var dataDotData=document.body.getAttribute("data-dot-data")||"{}";var data=JSON.parse(dataDotData);data.adb=1;document.body.setAttribute("data-dot-data",JSON.stringify(data));}catch(err){}}DOT.cfg(dotConfig);};SZN.BrowserAdvert=SZN.ClassMaker.makeClass({"NAME":"SZN.BrowserAdvert","VERSION":"1.0","CLASS":"class"});SZN.BrowserAdvert.prototype.$constructor=function(bannerElm){this.dom={};this.dom.browserElm=SZN.gEl(bannerElm);var os=this._getOS();this._changeBanner(os);};SZN.BrowserAdvert.prototype._changeBanner=function(os){if(os=="win7"){var img=this.dom.browserElm.getElementsByTagName("img")[0];img.src="/static/images/ie9-banner.gif";img.alt="Internet Explorer 9";this.dom.browserElm.title="Stáhněte si zdarma nový prohlížeč Internet Explorer 9";this.dom.browserElm.href="//software.seznam.cz/ie";}};SZN.BrowserAdvert.prototype._getOS=function(){var agent=window.navigator.userAgent;if(agent.indexOf("Windows NT 6.1")!=-1||agent.indexOf("Windows NT 6.0")!=-1){return "win7";}else{if(agent.indexOf("Windows NT 5.1")!=-1){return "winxp";}else{if(agent.indexOf("Linux")!=-1){return "linux";}else{return 0;}}}};SZN.MusicJetAdvert=SZN.ClassMaker.makeClass({"NAME":"SZN.MusicJetAdvert","VERSION":"1.0","CLASS":"class"});SZN.MusicJetAdvert.prototype.$constructor=function(bannerElm){this.dom={};this.dom.browserElm=SZN.gEl(bannerElm);var os=SZN.Browser.platform;this._changeBanner(os);};SZN.MusicJetAdvert.prototype._changeBanner=function(os){if(os!="win"){this.dom.browserElm.style.display="none";}};SZN.Carousel=SZN.ClassMaker.makeStatic({"NAME":"Carousel","VERSION":"1.0"});SZN.Carousel.getIndex=function(cookieName,data){var dataIndex=-1;var list=document.cookie.split(";").map(function(item){return item.split("=")[0].trim();});var index=list.indexOf(cookieName);if(index!=-1){dataIndex=parseInt(document.cookie.split(";")[index].split("=").slice(1).join("=").trim());}if(dataIndex<0||dataIndex>(data.length-1)||isNaN(dataIndex)){dataIndex=Math.floor(Math.random()*data.length);}var nextIndex=dataIndex+1;if(nextIndex>(data.length-1)){nextIndex=0;}var monthFromNow=(new Date()).getTime()+1000*60*60*24*30;document.cookie=cookieName+"="+nextIndex+";expires="+(new Date(monthFromNow).toUTCString())+";path=/";return dataIndex;};SZN.SklikCarousel=SZN.ClassMaker.makeClass({"NAME":"SZN.SklikCarousel","VERSION":"1.0","CLASS":"class"});SZN.SklikCarousel.prototype.$constructor=function(){this._data=[{"elm":"sklikReklama_19976","zoneId":19976,"w":400,"h":250,"script":"//s.imedia.cz/js/szn-script.js"}];this._cname="sklikCarouselIndex";};SZN.SklikCarousel.prototype.getSklikData=function(){return this._data[SZN.Carousel.getIndex(this._cname,this._data)];};SZN.showSklik=function(data){if(!SZN.showSklik.sklikQueue){SZN.showSklik.sklikQueue=[];}if(data){SZN.showSklik.sklikQueue.push(data);}if(SZN.showSklik.loading){return;}if(window.sklikProvider){window.sklikProvider.show(SZN.showSklik.sklikQueue.shift());if(SZN.showSklik.sklikQueue.length>0){SZN.showSklik();}}else{window.sklikData=SZN.showSklik.sklikQueue.shift();var script=SZN.cEl("script");script.onload=function(){SZN.showSklik.loading=false;if(SZN.showSklik.sklikQueue.length>0){SZN.showSklik();}};SZN.showSklik.loading=true;script.src="//c.imedia.cz/js/szn-script.js";document.getElementsByTagName("head")[0].appendChild(script);}};SZN.AppPromoCarousel=SZN.ClassMaker.makeClass({"NAME":"SZN.AppPromoCarousel","VERSION":"1.0","CLASS":"class"});SZN.AppPromoCarousel.prototype.$constructor=function(elms){if(elms.length!=3){throw new Error("Invalid arguments: must be specified exactly three elements");}this._elms=elms;this._data=[{"text":"","links":["//ad.apps.fm/xXeUKiB9-RX7xlyEAefUhF5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfFsZbCc9m4oGCHNmZJK15Ki8AdxBpp675HkyVXS5D4rCfcgbV7JYBaDmTpw7xmxGwqBGx61F1wUeaI2ZE_QaCgA","//ad.apps.fm/kNc3F6adpf2BueECSxt0VfE7og6fuV2oOMeOQdRqrE3Y_N3Dix834Bce5S0YspXjiX4iRX5GLED1PzEn6RjE7-agBRK2N3ft8wQZKmEDVE3QQFtvGmGm78YegHkNWCxf","//ad.apps.fm/WKvL9bg-RPTvv2qH-TpsZG57kbhTUI_kR12tnKkQtIGI3Ya9k6g5GFB8XT_0ph6DoV-EC0drXsL0OIhN7nQ7irqHJL7eZgHdfnEc7m3K6VNhkjuvehoF5SOwW2MB2EdEwBmYaIB_2-XkUJVhitAFXbfgMlVTpojB4UDC58jXzFijREtty0HmfQOpwPzFBFSv"]},{"text":"Stáhnout","links":["//ad.apps.fm/pYhZN_kEpI2PvVF3VShvVl5KLoEjTszcQMJsV6-2VnHFDLXitVHB6BlL95nuoNYfFsZbCc9m4oGCHNmZJK15Ki8AdxBpp675HkyVXS5D4rBD579R-lMBV2NyvkBxjPXpqBGx61F1wUeaI2ZE_QaCgA","//ad.apps.fm/l-lt8S3G9HeeAqVZ95ohgPE7og6fuV2oOMeOQdRqrE3Y_N3Dix834Bce5S0YspXjiX4iRX5GLED1PzEn6RjE7yBQPRnnaVrDy0e3JrtOPg7QQFtvGmGm78YegHkNWCxf","//ad.apps.fm/IJiq02CJTE2GCFAum5UghW57kbhTUI_kR12tnKkQtIGI3Ya9k6g5GFB8XT_0ph6DoV-EC0drXsL0OIhN7nQ7irqHJL7eZgHdfnEc7m3K6VNhkjuvehoF5SOwW2MB2EdEwBmYaIB_2-XkUJVhitAFXbfgMlVTpojB4UDC58jXzFijREtty0HmfQOpwPzFBFSv"]}];this._cname="AppPromoCarouselIndex";};SZN.AppPromoCarousel.prototype.setLinks=function(){var data=this._data[SZN.Carousel.getIndex(this._cname,this._data)];for(var i=0,len=this._elms.length;i<len;i++){var elmLink=SZN.Dom.getElementsByClass("link",this._elms[i])[0];var elmText=SZN.Dom.getElementsByClass("text",this._elms[i])[0];elmLink.href=data.links[i];elmText.innerHTML=data.text;}};SZN.AudioNewsManager=SZN.ClassMaker.makeClass({"NAME":"SZN.AudioNewsManager","VERSION":"1.1","CLASS":"class","IMPLEMENT":[SZN.SigInterface]});SZN.AudioNewsManager.prototype.$constructor=function(target,contentId,mp3Sources,oggSources,options){options=options||{};this._target=SZN.gEl(target);if(!this._target){throw new Error("[SZN.AudioNewsManager] Invalid argument: target must be an existing element");}if(!contentId){throw new Error("[SZN.AudioNewsManager] Invalid argument: there is no contentId");}this._contentId=contentId;this._instances=[];for(var i=mp3Sources.length-1;i>=0;i--){if(mp3Sources[i]){this._instances.push({"source":oggSources[i],"type":"audio/ogg"},{"source":mp3Sources[i],"type":"audio/mpeg"});}}if(this._instances.length===0){throw new Error("[SZN.AudioNewsManager] Invalid argument: there is no source");}if(!options.hitPath){throw new Error("[SZN.AudioNewsManager] Invalid argument: there is no option hitPath");}this._options=options;if((BrowserDetection.client==="ie")||document.createElement("audio").canPlayType){this._alreadyPlayed=false;this._dom={};this._dom.container=SZN.cEl("div",null,"audioNewsContainer");this._target.appendChild(this._dom.container);SZN.Dom.addClass(this._target,"full");this._player=null;this._insertInvitation();}};SZN.AudioNewsManager.prototype._insertErrMsg=function(){this._dom.errMsg=SZN.cEl("p",null,"anErrMsg");this._dom.errMsg.innerHTML="<strong>Váš prohlížeč nepodporuje audio přehrávání</strong>";this._dom.container.appendChild(this._dom.errMsg);};SZN.AudioNewsManager.prototype._insertInvitation=function(){if((BrowserDetection.client!="ie")||(BrowserDetection.version>8)){this._insertHtmlInvitation();}else{this._insertFlashInvitation();}};SZN.AudioNewsManager.prototype._insertFlashInvitation=function(){this._player=this._playerFactory();this._player.setMedia({"media":this._instances});this.addListener("play","_ePlay",this._player);this._dom.container.appendChild(this._player.getElm());};SZN.AudioNewsManager.prototype._insertHtmlInvitation=function(){this._dom.button=SZN.cEl("button",null,"anInvitation");this._dom.container.appendChild(this._dom.button);this._dom.txt=SZN.cEl("span",null,"anTxt");this._dom.txt.innerHTML="poslechnout článek";this._dom.button.appendChild(this._dom.txt);SZN.Events.addListener(this._dom.button,"click",this,"_play");};SZN.AudioNewsManager.prototype._play=function(){SZN.Dom.clear(this._dom.container);this._player=this._playerFactory();this._dom.container.appendChild(this._player.getElm());this.addListener("play","_ePlay",this._player);this._player.setMedia({"media":this._instances});this._player.play();};SZN.AudioNewsManager.prototype._ePlay=function(){if(!this._alreadyPlayed){this._alreadyPlayed=true;var img=new Image();img.src=this._options.hitPath+"?cdnaudioId="+this._contentId;}};SZN.AudioNewsManager.prototype._playerFactory=function(){if((BrowserDetection.client!="ie")||(BrowserDetection.version>8)){return new SZN.NovinkyAudioPlayer();}else{return new SZN.NovinkyAudioFlashPlayer();}};SZN.Cookie=SZN.ClassMaker.makeSingleton({"NAME":"SZN.Cookie","VERSION":"1.0"});SZN.Cookie.prototype.list=function(){var list=document.cookie.split(";").map(function(item){return item.split("=")[0].trim();});return list;};SZN.Cookie.prototype.get=function(name){var index=this.list().indexOf(name);if(index==-1){return null;}return document.cookie.split(";")[index].split("=").slice(1).join("=").trim();};SZN.Cookie.prototype.set=function(name,value,cookieOptions){if(value===null){this._remove(name);return;}var opt=this._makeOptions(cookieOptions);var ck=name+"="+value+(opt?";"+opt:"");document.cookie=ck;};SZN.Cookie.prototype._remove=function(name){document.cookie=name+"=;expires="+new Date(1).toUTCString();};SZN.Cookie.prototype._makeOptions=function(options){var opt=[];for(var i in options){switch(i){case "expires":opt.push(i+"="+options[i].toUTCString());break;case "secure":if(options[i]){opt.push(i);}break;case "domain":case "path":opt.push(i+"="+options[i]);break;default:break;}}return opt.join(";");};window.addEventListener("load",function(){var leaderBoardElement=document.getElementById("adLeaderboard-middle");if(!leaderBoardElement)return;var adElement=leaderBoardElement.querySelector("[width]");if(!adElement&&adElement.width>1)return;leaderBoardElement.style.width=adElement.width+"px";});window.addEventListener("load",function(){var getObjOffset=function(obj){var offset={"x":0,"y":0};if(!obj)return offset;var parentOffset=getObjOffset(obj.offsetParent);offset.x+=obj.offsetLeft+obj.clientLeft+parentOffset.x;offset.y+=obj.offsetTop+obj.clientTop+parentOffset.y;return offset;};var getObjPos=function(obj){var offset=getObjOffset(obj);offset.x-=obj.clientLeft;offset.y-=obj.clientTop;return offset;};var reachToArticleEnd=false;var reachToArticlesBoxEnd=false;var sectionContainer=SZN.gEl("sectionContainer");var sectionContainerOffset=getObjPos(sectionContainer);var sectionContainerTop=sectionContainerOffset.y;var sectionContainerBottom=sectionContainerTop+sectionContainer.clientHeight;window.addEventListener("scroll",function(){var scrolled=window.scrollY+window.innerHeight;if(!reachToArticleEnd&&scrolled>=sectionContainerTop){reachToArticleEnd=true;DOT.hit("event",{"d":{"action":"reachToArticleEnd"}});}if(!reachToArticlesBoxEnd&&scrolled>=sectionContainerBottom){reachToArticlesBoxEnd=true;DOT.hit("event",{"d":{"action":"reachToArticlesBoxEnd"}});}});});function recommendHit(event){if(this.dataset.hit){var data=JSON.parse(this.dataset.hit);DOT.hit("event",data);}}function recommendCallback(data,status){if(data&&((status>=200&&status<300)||status===304)){var ab=data.ab_variant==-1?null:data.ab_variant;var ids=data.entities.map(function(x){return x.id;});for(var i=0;i<data.entities.length;i++){var suggest=data.entities[i];var selector="#suggestedArticles .suggest"+(i+1);var stext=document.querySelector(selector+" .s-text");if(stext){stext.textContent=suggest.title;}var simage=document.querySelector(selector+" .s-image");if(simage){simage.title=suggest.title;simage.src=suggest.img;}var sanchors=document.querySelectorAll(selector+" .s-anchor");for(var j=0;j<sanchors.length;j++){sanchors[j].href=suggest.url;rem=ids.slice();pos=rem.indexOf(suggest.id);if(pos!=-1){rem.splice(pos,1);}sanchors[j].dataset.hit=JSON.stringify({"d":{"action":"dop-click","id":suggest.id,"rem-ids":rem,"dop-ab-variant":ab,"pos":(i+1)}});sanchors[j].addEventListener("mousedown",recommendHit,false);}var hidden=document.querySelectorAll("#suggestedArticles .hidden");for(var j=0;j<hidden.length;j++){hidden[j].classList.remove("hidden");}}DOT.hit("event",{"d":{"action":"dop-impress","dop-ids":ids,"dop-ab-variant":ab}});}}function recommend(){var req=new SZN.HTTPRequest();req.setMethod(req.METHOD.get);req.setMode(req.MODE.async);req.setFormat(req.FORMAT.json);var articleId=0;var body=document.querySelector("body");if(body&&body.dataset.dotData){articleId=JSON.parse(body.dataset.dotData)["articleId"];}var x=req.send("/recommendedArticlesAjax?articleId="+articleId,this,"recommendCallback");}function resizeAdContainer(width,height){width=parseInt(width);height=parseInt(height);if(!width||!height){return;}var elIm=document.querySelector("#adRectangle iframe");if(elIm==null){elIm=document.querySelector("#adRectangle img:not([width=\"1\"])");}if(!elIm){return setTimeout(function(){resizeAdContainer(width,height);},100);}elIm.style.width=width+"px";elIm.style.height=height+"px";elIm.style.marginLeft="auto";elIm.style.marginRight="auto";}window.addEventListener("message",function(event){var dimensions=/szn-ad-rect:(\d+)x(\d+)/.exec(event.data);if(dimensions){resizeAdContainer(dimensions[1],dimensions[2]);}});function adLeaderboardCallback(ad,data,postMessage){im.writeAd(ad,data,postMessage);try{if(ad.spots[0].content.indexOf("brandingFixed")===-1){promoSbrowser.create();}}catch(e){promoSbrowser.create();}}SZN.SearchMenu=SZN.ClassMaker.makeClass({"NAME":"SearchMenu","VERSION":"1.0","CLASS":"class"});SZN.SearchMenu.prototype.$constructor=function(optObj){var tld_arr=window.location.hostname.split(".");this.tld_domain=tld_arr.pop();this.options={"oblast":["content"],"openInNewWindow":true};for(var p in optObj){this.options[p]=optObj[p];}this.eventsCache=[];this.service=[];this.eventRem="";this.window=null;this.menuBox=null;this.menuBlok=null;this.input=null;this.rssResultBox=null;this.rssResultContent=null;this.rssResultPreloader=null;this.searchServices={};this.searchServices.fulltext={"name":"Internet","s_url":"//search.seznam."+this.tld_domain+"/?q={$search}"};this.searchServices.firmy={"name":"Firmy","s_url":"http://www.firmy."+this.tld_domain+"/phr/{$search}"};this.searchServices.obrazky={"name":"Obrázky","s_url":"//www.obrazky."+this.tld_domain+"/?step=20&filter=1&s=&q={$search}"};this.searchServices.mapy={"name":"Mapy","s_url":"//www.mapy."+this.tld_domain+"/?query={$search}"};this.searchServices.encyklopedie={"name":"Encyklopedie","s_url":"//encyklopedie.seznam."+this.tld_domain+"/search?s={$search}"};this.searchServices.clanky={"name":"Články","s_url":"//www.clanky."+this.tld_domain+"/?search={$search}"};this.searchServices.slovnik={"name":"Slovník","s_url":"//slovnik.seznam."+this.tld_domain+"/?lang=en_cz&q={$search}"};this.searchServices.zbozi={"name":"Zboží","s_url":"https://www.zbozi."+this.tld_domain+"/?q={$search}"};this.searchServices.sreality={"name":"Sreality","s_url":"http://www.sreality."+this.tld_domain+"/phrase/{$search}"};this.resultRss="/search-seznam?count=3&format=boldrss&q={$search}";this.formUrl="//search.seznam."+this.tld_domain+"/?q={$search}";this._buildDom();for(var a=0;a<this.options.oblast.length;a++){if(SZN.gEl(this.options.oblast[a])){this.eventsCache.push(SZN.Events.addListener(SZN.gEl(this.options.oblast[a]),"mouseup",this,"_click"));this.eventsCache.push(SZN.Events.addListener(SZN.gEl(this.options.oblast[a]),"dblclick",this,"_doubleClick",false));}}this.eventsCache.push(SZN.Events.addListener(window,"unload",this,"$destructor"));};SZN.SearchMenu.prototype.$destructor=function(){for(var i=0;i<this.eventsCache.length;i++){SZN.Events.removeListener(this.eventsCache[i]);}for(var p in this){this[p]=null;}};SZN.SearchMenu.prototype._getSelText=function(){var txt="";if(window.getSelection){return window.getSelection();}else{if(document.getSelection){return document.getSelection();}else{if(document.selection){return document.selection.createRange().text;}else{return false;}}}};SZN.SearchMenu.prototype._click=function(e){var txt=this._getSelText();if(txt!=""&&e.ctrlKey==true&&e.button==SZN.Browser.mouse.left){txt=txt.toString();this.input.value=this._clearInputText(txt);SZN.Events.cancelDef(e);if(!SZN.gEl("widget-searchMenu")){this._showMenu(e);}}};SZN.SearchMenu.prototype._doubleClick=function(e){var txt=this._getSelText();if(txt!=""){txt=txt.toString();this.input.value=this._clearInputText(txt);SZN.Events.cancelDef(e);if(!SZN.gEl("widget-searchMenu")){this._showMenu(e);}}};SZN.SearchMenu.prototype._showMenu=function(e){if(!SZN.gEl("widget-searchMenu")){var winSize=SZN.Dom.getDocSize();var scroll=SZN.Dom.getScrollPos();this.menuBox.style.top=(e.clientY+scroll.y)+"px";this.menuBox.style.left=(e.clientX+scroll.x)+"px";if((winSize.width+scroll.x)<(parseInt(this.menuBox.style.left)+parseInt(this.menuBlok.style.width))){this.menuBox.style.left=(parseInt(this.menuBox.style.left)-parseInt(this.menuBlok.style.width))+"px";}document.body.appendChild(this.menuBox);if((winSize.height+scroll.y)<(parseInt(this.menuBox.style.top)+parseInt(this.menuBlok.offsetHeight))){this.menuBox.style.top=(parseInt(this.menuBox.style.top)-parseInt(this.menuBlok.offsetHeight))+"px";}this._showPreloader();var tmpBox=SZN.cEl("div",false,false,{"position":"absolute","top":this.menuBox.style.top,"left":this.menuBox.style.left,"height":"500px","width":this.menuBlok.style.width});document.body.insertBefore(tmpBox,document.body.firstChild);SZN.Dom.elementsHider(tmpBox,false,"hide");document.body.removeChild(tmpBox);}this.eventRem=SZN.Events.addListener(document,"mousedown",this,"_disableMenu");this.eventsCache.push(SZN.Events.addListener(this.menuBox,"mousedown",window,SZN.Events.stopEvent));this._showSearchResult(null,null);};SZN.SearchMenu.prototype.setResultRss=function(rss){this.resultRss=rss;};SZN.SearchMenu.prototype._buildDom=function(){this.menuBlok=SZN.cEl("div","widget-searchMenu");if(SZN.Browser.client=="ie"&&SZN.Browser.version<=6){this.menuBlok.style.width="424px";}else{if(SZN.Browser.client=="ie"&&SZN.Browser.version==7){this.menuBlok.style.width="426px";}else{this.menuBlok.style.width="425px";}}var closeSpan=SZN.cEl("span",false,"widget-close");var closeHref=SZN.cEl("a","widget-close");var closeImg=SZN.cEl("img");var questionHref=SZN.cEl("a","widget-question");var questionImg=SZN.cEl("img");var clear=SZN.cEl("div",false,"clear");var body=SZN.cEl("div","widget-body");var form=SZN.cEl("form","widget-s_form");this.input=SZN.cEl("input","widget-search_term");var submit=SZN.cEl("input","widget-search_submit");submit.type="submit";submit.value="Hledej";closeHref.href="#";closeImg.src="/static/images/searchwin/close_icon.gif";closeImg.alt="Zavřít";this.input.type="text";questionHref.href="//www.novinky."+this.tld_domain+"/clanek/162653-.html";questionHref.target="_blank";questionImg.src="/static/images/searchwin/question_icon.gif";questionImg.style.marginRight="5px";questionImg.alt="Nápověda";SZN.Dom.append([closeHref,closeImg]);SZN.Dom.append([questionHref,questionImg]);SZN.Dom.append([closeSpan,questionHref]);SZN.Dom.append([closeSpan,closeHref]);SZN.Dom.append([this.menuBlok,closeSpan]);SZN.Dom.append([form,this.input]);SZN.Dom.append([form,submit]);SZN.Dom.append([body,form,clear]);SZN.Dom.append([this.menuBlok,body]);var params={"imagePath":"/static/images/searchwin/shadow-","sizes":[6,6,6,6]};w=new SZN.Window(params);w.content.appendChild(this.menuBlok);this.rssResultBox=SZN.cEl("div","widget-rssResultBox",false,{"textAlign":"left","overflow":"hidden","position":"relative","padding":"0px 23px","height":"0","border":" 1px #7E97B1 solid","borderTop":"0px","background":"white  url(\"/static/images/bck-result.gif\") repeat-x","fontFamily":"\"Arial CE\", Arial, \"Helvetica CE\", Helvetica, sans-serif","fontSize":"14px","color":"#000000"});this.rssResultContent=SZN.cEl("div","widget-rssResultContent",false,{"position":"absolute","bottom":"0","padding":"18px 0px 0px","width":"379px"});SZN.Dom.append([this.rssResultBox,this.rssResultContent]);this.rssResultPreloader=SZN.cEl("div");var img=SZN.cEl("img",false,false,{"margin":"20px auto","display":"block"});img.src="/static/images/searchwin/noname.gif";SZN.Dom.append([this.rssResultPreloader,img]);SZN.Dom.append([this.rssResultBox,this.rssResultPreloader]);w.content.appendChild(this.rssResultBox);w.container.style.position="absolute";this.window=w;this.menuBox=w.container;this.eventsCache.push(SZN.Events.addListener(closeHref,"click",this,"_disableMenu",false,true));this.eventsCache.push(SZN.Events.addListener(form,"submit",this,"_formSubmit",false,true));};SZN.SearchMenu.prototype._disableMenu=function(e){document.body.removeChild(this.menuBox);SZN.Events.removeListener(this.eventRem);SZN.Events.stopEvent(e);SZN.Events.cancelDef(e);SZN.Dom.elementsHider(this.menuBox,false,"show");this.rssResultBox.style.height="0px";};SZN.SearchMenu.prototype._formSubmit=function(e){var winSize=SZN.Dom.getDocSize();if(SZN.gEl("widget-search_term").value==""){alert("Musíte zadat hledaný výraz.");}else{var s_url=this.formUrl.replace("{$search}",encodeURIComponent(this.input.value));if(!this.options.openInNewWindow){window.location=s_url;}else{window.open(s_url,"_blank","width="+winSize.width+",height="+winSize.height+",toolbar=yes, location=yes, directories=yes, status=yes, menubar=yes, scrollbars=yes, resizable=yes");this.owner._disableMenu(e);}}SZN.Events.stopEvent(e);SZN.Events.cancelDef(e);};SZN.SearchMenu.prototype._showPreloader=function(){this._hideResultWindow();this.rssResultPreloader.style.display="block";var i=new SZN.CSSInterpolator(this.rssResultBox,200,{"interpolation":SZN.Interpolator.SIN,"frequency":50});i.addProperty("height",0,77,"px");i.start();};SZN.SearchMenu.prototype._hidePreloader=function(){this.rssResultPreloader.style.display="none";};SZN.SearchMenu.prototype._hideResultWindow=function(){SZN.Dom.clear(this.rssResultContent);this.rssResultBox.style.height=0;};SZN.SearchMenu.prototype._showResult=function(){var i=new SZN.CSSInterpolator(this.rssResultBox,500,{"interpolation":SZN.Interpolator.SIN,"frequency":50});i.addProperty("height",this.rssResultBox.offsetHeight,this.rssResultContent.offsetHeight,"px");i.start();};SZN.SearchMenu.prototype._showSearchResult=function(e,elm){this.rssResultBox.style.height="0px";var url=this.resultRss.replace("{$search}",encodeURIComponent(this.input.value));var rq=new SZN.HTTPRequest();rq.setMethod("get");rq.setFormat("xml");rq.setMode("async");rq.send(url,this,"_rssResponse");};SZN.SearchMenu.prototype._rssResponse=function(xml,status){this._hidePreloader();if(status==200&&xml!==null){var html="";var items=xml.getElementsByTagName("item");var sItems=[];for(var i=0;i<items.length;i++){if(items[i].prefix==null||items[i].prefix==""){sItems.push(items[i]);}}for(var i=0;i<Math.min(sItems.length,3);i++){html+="<p style=\"margin: 0px; padding-top: 0px; padding-bottom: 12px;\">";html+="<a style=\"color: #00c;\" href=\""+sItems[i].getElementsByTagName("link")[0].firstChild.nodeValue+"\">"+sItems[i].getElementsByTagName("title")[0].firstChild.nodeValue+"</a><br />";html+="<span style=\"font-size: 12px;\">"+sItems[i].getElementsByTagName("description")[0].firstChild.nodeValue+"</span>";html+="</p>";}var sr=document.getElementsByTagNameNS?xml.getElementsByTagNameNS("//www.seznam."+this.tld_domain,"services")[0]:xml.getElementsByTagName("seznam:services")[0];if(sr!==null&&sr!==undefined){var bi=document.getElementsByTagNameNS?sr.getElementsByTagNameNS("//www.seznam."+this.tld_domain,"service"):sr.getElementsByTagName("seznam:service");var ic=document.getElementsByTagNameNS?xml.getElementsByTagNameNS("https://a9.com/-/spec/opensearch/1.1/","totalResults")[0]:xml.getElementsByTagName("opensearch:totalResults")[0];var internetCount=0;if(ic!==null){internetCount=parseInt(ic.firstChild.nodeValue);}if(bi.length>0||internetCount>0){html+="<p style=\"margin: 0px; padding-top: 19px; padding-bottom: 32px; font-size: 13px;\">";var bottomServices=[];if(parseInt(internetCount)>0){bottomServices.push(this._generateSearchEngineLink("fulltext",internetCount));}for(var i=0;i<bi.length;i++){var serviceCode=document.getElementsByTagNameNS?bi[i].getElementsByTagNameNS("//www.seznam."+this.tld_domain,"serviceName")[0].firstChild.nodeValue:bi[i].getElementsByTagName("seznam:serviceName")[0].firstChild.nodeValue;var count=document.getElementsByTagNameNS?bi[i].getElementsByTagNameNS("//www.seznam."+this.tld_domain,"serviceResults")[0].firstChild.nodeValue:bi[i].getElementsByTagName("seznam:serviceResults")[0].firstChild.nodeValue;count=parseInt(count);if(count>0){bottomServices.push(this._generateSearchEngineLink(serviceCode,count));}}html+=bottomServices.join("<span style=\"color: #d3e1f0;\"> | </span>");html+="</p>";}}this.rssResultContent.innerHTML=html;this._showResult();}else{this.rssResultContent.style.display="none";}};SZN.SearchMenu.prototype._generateSearchEngineLink=function(serviceCode,count){var url=this.searchServices[serviceCode].s_url;url=url.replace("{$search}",this.input.value);count=count>1000?"1000+":count;return "<span><a style=\"color: #00f;\" href=\""+url+"\">"+(serviceCode=="fulltext"?"<strong>"+this.searchServices[serviceCode].name+"</strong>":this.searchServices[serviceCode].name)+"</a>&nbsp;"+count+"</span>";};SZN.SearchMenu.prototype.trim=function(stringToTrim){return stringToTrim.replace(/^\s+|\s+$/g,"");};SZN.SearchMenu.prototype._clearInputText=function(txt){txt=txt.replace(new RegExp("[\n\r\t]+","gi")," ");return this.trim(txt);};var sticky={"init":function(){sticky.IE=document.attachEvent&&!window.opera;sticky.topDivFix=5;sticky.div=sticky._gEl("adSky-moving");sticky.div.style.position="absolute";sticky.divInitialPosition=null;sticky.divInitial=sticky._gEl("adSky-moving-starter");sticky.onPosition=false;sticky.limiter=null;sticky.limiterPositon=null;sticky.timer=null;sticky.containers={"adSky":true,"adSkyscraper":true,"adSkyBottom":true};sticky.divParent=null;sticky.checkInterval=window.setInterval(sticky._checkDOMPosition,100);},"_checkDOMPosition":function(){var p=sticky.div;while(p.parentNode){if(typeof p.parentNode.id!="undefined"){if(p.parentNode.id in sticky.containers){sticky.onPosition=true;sticky.divParent=p.parentNode;sticky._startMove();break;}}p=p.parentNode;}},"_startMove":function(){sticky.divParent.style.paddingTop="0";sticky.divParent.style.backgroundImage="none";window.clearInterval(sticky.checkInterval);sticky._addListener(window,"scroll",sticky._moveSlower,false);sticky.timer=window.setInterval(sticky._move,10);},"_moveSlower":function(){if(sticky.timer!=null){window.clearTimeout(sticky.timer);}sticky._move();},"_move":function(){sticky.limiter=sticky._gEl("skyStopper")||null;sticky.divHeight=sticky.div.offsetHeight;sticky.divPosition=sticky._getPosition(sticky.divInitial);if(sticky.divInitialPosition==null||sticky.divInitialPosition!=sticky.divPosition){sticky.divInitialPosition=sticky.divPosition;}if(document.documentElement&&document.documentElement.scrollTop){var pos=document.documentElement.scrollTop;}else{if(document.body){var pos=document.body.scrollTop;}}if(sticky.limiter){sticky.limiterPosition=sticky._getPosition(sticky.limiter);}if(pos>sticky.divInitialPosition){if(sticky.limiter&&((pos+sticky.divHeight)>=sticky.limiterPosition)){sticky.div.style.position="absolute";sticky.div.style.top=(sticky.limiterPosition-sticky.divInitialPosition-sticky.divHeight)+"px";}else{if(sticky.IE){sticky.div.style.top=(pos-sticky.divInitialPosition+sticky.topDivFix)+"px";}else{sticky.div.style.top=sticky.topDivFix+"px";sticky.div.style.position="fixed";}}}else{sticky.div.style.top="auto";if(!sticky.IE){sticky.div.style.position="absolute";}}},"_getPosition":function(node){var offset=0;while(node){offset+=node.offsetTop;node=node.offsetParent;}return offset;},"_addListener":function(elm,eventType,fn,set){if(document.addEventListener){if(window.opera&&(elm==window)){elm=document;}elm.addEventListener(eventType,fn,set);}else{if(document.attachEvent){elm.attachEvent("on"+eventType,fn);}}},"_gEl":function(id){return document.getElementById(id);}};SZN.Election={};SZN.Election.MapHover=SZN.ClassMaker.makeClass({"NAME":"SZN.Election.MapHover","VERSION":"1.0","CLASS":"class"});SZN.Election.MapHover.prototype.$constructor=function(){this.mapElm=SZN.gEl("map-wrapper");this.mapHoverElm;this.isBuilded=false;this._buildCastle();this._assignListener();};SZN.Election.MapHover.prototype._buildCastle=function(){if(!this.isBuilded){this.mapHoverElm=SZN.cEl("div","map-hover");this.mapElm.appendChild(this.mapHoverElm);this.isBuilded=true;}};SZN.Election.MapHover.prototype._assignListener=function(){var areaElms=this.mapElm.getElementsByTagName("area");for(var i=0;i<areaElms.length;i++){SZN.Events.addListener(areaElms[i],"mouseover",this,"_setStyle",false);SZN.Events.addListener(areaElms[i],"mouseout",this,"_hideElm",false);}};SZN.Election.MapHover.prototype._setStyle=function(e,elm){if(!elm.href){return;}var areaHref=elm.href.split("/");var areaRegion=areaHref[areaHref.length-1].split("#")[0];areaRegion=areaRegion.split("?")[0];var styleAttr;var regionExists=false;switch(areaRegion){case "praha":case "hlavni-mesto-praha":regionExists=true;styleAttr={"width":"40px","height":"32px","backgroundPosition":"-139px -454px","top":"110px","left":"155px"};break;case "jihomoravsky-kraj":regionExists=true;styleAttr={"width":"140px","height":"103px","backgroundPosition":"0px -559px","top":"167px","left":"246px"};break;case "zlinsky-kraj":regionExists=true;styleAttr={"width":"96px","height":"70px","backgroundPosition":"-105px -488px","top":"173px","left":"351px"};break;case "jihocesky-kraj":regionExists=true;styleAttr={"width":"139px","height":"110px","backgroundPosition":"0px -327px","top":"169px","left":"110px"};break;case "kraj-vysocina":regionExists=true;styleAttr={"width":"102px","height":"94px","backgroundPosition":"-2px -448px","top":"145px","left":"200px"};break;case "moravskoslezsky-kraj":regionExists=true;styleAttr={"width":"116px","height":"93px","backgroundPosition":"-2px -675px","top":"96px","left":"350px"};break;case "olomoucky-kraj":regionExists=true;styleAttr={"width":"82px","height":"121px","backgroundPosition":"-118px -662px","top":"83px","left":"321px"};break;case "pardubicky-kraj":regionExists=true;styleAttr={"width":"96px","height":"64px","backgroundPosition":"0px -783px","top":"107px","left":"235px"};break;case "kralovehradecky-kraj":regionExists=true;styleAttr={"width":"96px","height":"76px","backgroundPosition":"-1px -871px","top":"51px","left":"216px"};break;case "stredocesky-kraj":regionExists=true;styleAttr={"width":"141px","height":"112px","backgroundPosition":"0px -119px","top":"68px","left":"103px"};break;case "liberecky-kraj":regionExists=true;styleAttr={"width":"84px","height":"55px","backgroundPosition":"-1px 0px","top":"25px","left":"165px"};break;case "plzensky-kraj":regionExists=true;styleAttr={"width":"96px","height":"119px","backgroundPosition":"-104px -0px","top":"118px","left":"35px"};break;case "ustecky-kraj":regionExists=true;styleAttr={"width":"111px","height":"100px","backgroundPosition":"-89px -227px","top":"21px","left":"72px"};break;case "karlovarsky-kraj":regionExists=true;styleAttr={"width":"75px","height":"57px","backgroundPosition":"0px -248px","top":"81px","left":"21px"};break;}if(regionExists){this.mapHoverElm.style.display="block";SZN.Dom.setStyle(this.mapHoverElm,styleAttr);}};SZN.Election.MapHover.prototype._hideElm=function(e,elm){this.mapHoverElm.style.display="none";};SZN.Election.Legend=SZN.ClassMaker.makeClass({"NAME":"SZN.Election.Legend","VERSION":"1.0","CLASS":"class"});SZN.Election.Legend.prototype.$constructor=function(id){var legendElm=SZN.gEl(id);var legendElmItems=SZN.Dom.getElementsByClass("item",legendElm,"li");var maxWidth=0;for(var i=0;i<legendElmItems.length;i++){if(legendElmItems[i].offsetWidth>maxWidth){maxWidth=legendElmItems[i].offsetWidth;}}for(var i=0;i<legendElmItems.length;i++){legendElmItems[i].style.width=maxWidth+5+"px";}};SZN.Election.Tables=SZN.ClassMaker.makeClass({"NAME":"SZN.Election.Tables","VERSION":"1.0","CLASS":"class"});SZN.Election.Tables.prototype.$constructor=function(){var tables=SZN.Dom.getElementsByClass("list",document,"table");for(var i=0,max=tables.length;i<max;i++){this._fixNums(tables[i]);}};SZN.Election.Tables.prototype._fixNums=function(table){var cells=SZN.Dom.getElementsByClass("num",table,"td");if(!cells.length){return;}var cellsInRow=(SZN.Dom.getElementsByClass("num",cells[0].parentNode,"td")).length;var cols=[];for(var i=0,max=cells.length;i<max;i++){var idx=i%cellsInRow;if(!cols[idx]){cols[idx]=[];}cols[idx].push(cells[i]);}for(var i=0,imax=cols.length;i<imax;i++){var cellW=cols[i][0].offsetWidth;var maxContentW=0;for(var j=0,jmax=cols[i].length;j<jmax;j++){var contentElm=cols[i][j].getElementsByTagName("span")[0];if(!contentElm){console.log("nejsou spany");return;}if(contentElm.offsetWidth>maxContentW){maxContentW=contentElm.offsetWidth;}}var padRight=((cellW-maxContentW)/2)+"px";var w=((cellW+maxContentW)/2)+"px";for(var j=0,jmax=cols[i].length;j<jmax;j++){cols[i][j].style.width=w;cols[i][j].style.paddingRight=padRight;}}};SZN.Election.ShowAll=SZN.ClassMaker.makeClass({"NAME":"SZN.Election.ShowAll","VERSION":"1.0","CLASS":"class"});SZN.Election.ShowAll.prototype.$constructor=function(showButton,container){var showButton=SZN.gEl(showButton);this.container=SZN.Dom.getElementsByClass(container,document,"div")[0];if(showButton){SZN.Events.addListener(showButton,"click",this,"_showContainer",false);}};SZN.Election.ShowAll.prototype._showContainer=function(e,elm){if(SZN.Dom.hasClass(elm,"show")){SZN.Dom.removeClass(elm,"show");this.container.style.display="block";}else{SZN.Dom.addClass(elm,"show");this.container.style.display="none";}};SZN.Election.ShowGraph=SZN.ClassMaker.makeClass({"NAME":"SZN.Election.ShowGraph","VERSION":"1.0","CLASS":"class"});SZN.Election.ShowGraph.prototype.$constructor=function(){var rootElm=SZN.gEl("volby");this.tabs=SZN.Dom.getElementsByClass("tab",rootElm,"strong");this.graphs=SZN.Dom.getElementsByClass("graphContainer",rootElm,"div");for(var i=0;i<this.tabs.length;i++){SZN.Events.addListener(this.tabs[i],"click",this,"_showGraph",false);}var activeTab=SZN.Dom.getElementsByClass("tab active",rootElm,"strong")[0];this._showGraph(undefined,activeTab);};SZN.Election.ShowGraph.prototype._showGraph=function(e,elm){if(e){SZN.Events.cancelDef(e);}for(var i=0;i<this.graphs.length;i++){this.graphs[i].style.display="none";}var index=0;if(elm){for(var i=0;i<this.tabs.length;i++){SZN.Dom.removeClass(this.tabs[i],"active");}SZN.Dom.addClass(elm,"active");index=parseInt(elm.getAttribute("data-graph"));}this.graphs[index].style.display="block";};SZN.Election.ShowInfo=SZN.ClassMaker.makeClass({"NAME":"SZN.Election.ShowAll","VERSION":"1.0","CLASS":"class"});SZN.Election.ShowInfo.prototype.$constructor=function(showButton,container){var showButton=SZN.gEl(showButton);this.container=SZN.gEl(container);if(showButton){SZN.Events.addListener(showButton,"click",this,"_showContainer",false);}};SZN.Election.ShowInfo.prototype._showContainer=function(e,elm){if(SZN.Dom.hasClass(elm,"show")){SZN.Dom.removeClass(elm,"show");this.container.style.display="block";}else{SZN.Dom.addClass(elm,"show");this.container.style.display="none";}};SZN.Flash=SZN.ClassMaker.makeStatic({"NAME":"SZN.Flash","VERSION":"1.0"});SZN.Flash.version={"major":0,"minor":0,"revision":0,"raw":""};SZN.Flash.detect=function(conf){this._activeXDetectRules=["ShockwaveFlash.ShockwaveFlash.7","ShockwaveFlash.ShockwaveFlash.6","ShockwaveFlash.ShockwaveFlash"];if(navigator.plugins&&navigator.plugins.length>0){var type="application/x-shockwave-flash";var mimeTypes=navigator.mimeTypes;if(mimeTypes&&mimeTypes[type]&&mimeTypes[type].enabledPlugin&&mimeTypes[type].enabledPlugin.description){var version=mimeTypes[type].enabledPlugin.description;var descParts=version.split(/ +/);var mm=descParts[2].split(/\./);this.version={"raw":version,"major":parseInt(mm[0],10),"minor":parseInt(mm[1],10),"revision":parseInt(descParts[3].replace(/[a-zA-Z]/g,""),10)||this.version.revision};}}else{if(SZN.Browser.platform!="mac"&&window.execScript){var version=0;for(var i=0;i<this._activeXDetectRules.length&&version==0;i++){var obj=this._getActiveXObject(this._activeXDetectRules[i]);if(obj){version=this._getActiveXVersion(obj);if(version!=0){var versionArray=version.split(",");this.version={"raw":version,"major":parseInt(versionArray[0].split(" ")[1],10),"minor":parseInt(versionArray[1],10),"revision":parseInt(versionArray[2],10)};}}}}}};SZN.Flash._getActiveXVersion=function(activeXObj){try{return activeXObj.GetVariable("$version");}catch(ex){}return 0;};SZN.Flash._getActiveXObject=function(name){try{return new ActiveXObject(name);}catch(ex){}return null;};SZN.Flash.detect();SZN.Html5Video=SZN.ClassMaker.makeClass({"NAME":"Html5Video","VERSION":"1.0","CLASS":"class"});SZN.Html5Video.GEMIUS={"IDENTIFIER":"nFGV9IyL0YhumXsB9RZpTZQ57KSuYPgSEfOCnPZ8cGr.O7","PREFIX":"scz","HITCOLLECTOR":"scz.hit.gemius.pl"};SZN.Html5Video.prototype.$constructor=function(videoArray,videoContId){if(SZN.Flash.version.major>=9){return;}var playerContainers=SZN.Dom.getElementsByClass(videoContId);for(var i=0;i<videoArray.length;i++){this._initPlayer("player_"+i,videoArray[i],playerContainers[i]);}};SZN.Html5Video.prototype._initPlayer=function(playerId,videoData,container){var video=SZN.cEl("video",playerId,"idobject");video.poster=videoData.pictureUrl;video.src=videoData.cdn360pm;video.controls=true;video.width=videoData.width;video.height=videoData.height;container.innerHTML="";container.appendChild(video);this._initAnalytics(playerId,videoData,video);};SZN.Html5Video.prototype._initAnalytics=function(playerId,videoData,video){var streamCreated=false;var materialId=this._getMaterialId(videoData);var _this=this;video.addEventListener("loadedmetadata",function(){if(!window.gemiusStream){this._log("Neni dostupny gemius stream");return;}gemiusStream.newStream(playerId,materialId,video.duration,[],[],SZN.Html5Video.GEMIUS.IDENTIFIER,SZN.Html5Video.GEMIUS.HITCOLLECTOR,[]);streamCreated=true;this._log("Gemius stream připraven");}.bind(this));video.addEventListener("play",function(){sendEvent("playing");});video.addEventListener("pause",function(){sendEvent("paused");});video.addEventListener("seeking",function(){sendEvent("seekingStarted");});video.addEventListener("ended",function(){sendEvent("complete");});function sendEvent(eventType){if(!streamCreated){return;}_this._log("Gemius udalost: "+eventType);gemiusStream.event(playerId,materialId,video.currentTime,eventType);}};SZN.Html5Video.prototype._getMaterialId=function(videoData){return videoData.cdn360pm.split("/")[6]||videoData.cdn360pm.slice(-64);};SZN.Html5Video.prototype._log=function(msg){if(window.console&&console.log){console.log(msg);}};SZN.AudioPlayer=SZN.ClassMaker.makeClass({"NAME":"AudioPlayer","VERSION":"1.0","IMPLEMENT":[SZN.SigInterface]});SZN.AudioPlayer.prototype.$constructor=function(options){options=options||{};this._options={"autoplay":typeof options.autoplay!=="undefined"?options.autoplay:false};this._ready=false;this._audio=null;this._ec=[];this._flags={"loadendFired":false,"lastChangeTime":0,"stopped":true};this._init();};SZN.AudioPlayer.prototype.$destructor=function(){this._ready=false;for(var i=this._ec.length-1;i>=0;i--){SZN.Events.removeListener(this._ec[i]);};this._audio.pause();this._audio.src="";for(var p in this){this[p]=null;}};SZN.AudioPlayer.prototype.isReady=function(){return this._ready;};SZN.AudioPlayer.prototype.isSetMedia=function(){return this._audio.src!="";};SZN.AudioPlayer.prototype.isPlaying=function(){return !this._audio.paused;};SZN.AudioPlayer.prototype.isMute=function(){return this._audio.muted;};SZN.AudioPlayer.prototype.setMedia=function(data){if(!data||!data.media){throw new Error("Invalid argument: argument 'data' must be object and contain at least one item in media attribute");}this._set(data);if(!this._audio.src){throw new Error("Invalid state: there is no source");}this.makeEvent("setedmedia");};SZN.AudioPlayer.prototype.setVolume=function(level){if(level<0||level>1){throw new Error("Invalid argument: invalid volume level");}this._audio.volume=level;};SZN.AudioPlayer.prototype.setMute=function(on){this._audio.muted=!!on;};SZN.AudioPlayer.prototype.getElm=function(){return this._audio;};SZN.AudioPlayer.prototype.getVolume=function(){return this._audio.volume;};SZN.AudioPlayer.prototype.getCurrentTime=function(){return this._audio.currentTime;};SZN.AudioPlayer.prototype.getDuration=function(){return this._audio.duration;};SZN.AudioPlayer.prototype.play=function(){this._flags.stopped=false;this._audio.play();};SZN.AudioPlayer.prototype.pause=function(){this._audio.pause();};SZN.AudioPlayer.prototype.stop=function(){this._flags.stopped=true;this._audio.pause();this._audio.currentTime=0;this.makeEvent("stop");};SZN.AudioPlayer.prototype.seek=function(time){if(time<0){time=0;}else{if(time>this._audio.duration){time=this._audio.duration;}}this.makeEvent("seekstart",{"time":this._audio.currentTime});this._audio.currentTime=time;};SZN.AudioPlayer.prototype._init=function(){this._build();this._addListeners();this._ready=true;this.makeEvent("ready");};SZN.AudioPlayer.prototype._build=function(){this._audio=SZN.cEl("audio");if(this._options.autoplay){this._audio.setAttribute("autoplay","");}};SZN.AudioPlayer.prototype._addListeners=function(){this._ec.push(SZN.Events.addListener(this._audio,"progress",this,"_eProgress"));this._ec.push(SZN.Events.addListener(this._audio,"loadedmetadata",this,"_eLoadedmetadata"));this._ec.push(SZN.Events.addListener(this._audio,"canplay",this,"_eCanplay"));this._ec.push(SZN.Events.addListener(this._audio,"stalled",this,"_eStalled"));this._ec.push(SZN.Events.addListener(this._audio,"play",this,"_ePlay"));this._ec.push(SZN.Events.addListener(this._audio,"pause",this,"_ePause"));this._ec.push(SZN.Events.addListener(this._audio,"timeupdate",this,"_eTimeupdate"));this._ec.push(SZN.Events.addListener(this._audio,"seeked",this,"_eSeeked"));this._ec.push(SZN.Events.addListener(this._audio,"ended",this,"_eEnded"));this._ec.push(SZN.Events.addListener(this._audio,"volumechange",this,"_eVolumechange"));this._ec.push(SZN.Events.addListener(this._audio,"error",this,"_eError"));};SZN.AudioPlayer.prototype._eProgress=function(){if(this._flags.loadendFired){return;}var buffered=0;var percent=0;if(this._audio.readyState>this._audio.HAVE_NOTHING){var ranges=this._audio.buffered;try{buffered=ranges.length>0?ranges.end(ranges.length-1):ranges.end(0);}catch(error){console.error(error);buffered=0;}percent=Math.round(buffered/this._audio.duration*100);}this.makeEvent("progress",{"buffered":buffered,"percent":percent});if(buffered>=this._audio.duration){this._flags.loadendFired=true;this.makeEvent("loadend");}};SZN.AudioPlayer.prototype._eLoadedmetadata=function(){this.makeEvent("loadedmetadata");var ranges=this._audio.buffered;try{var buffered=ranges.length>0?ranges.end(ranges.length-1):ranges.end(0);}catch(error){console.error(error);var buffered=0;}if(!this._flags.loadendFired&&buffered>=this._audio.duration){this._flags.loadendFired=true;var percent=Math.round(buffered/this._audio.duration*100);this.makeEvent("progress",{"buffered":buffered,"percent":percent});this.makeEvent("loadend");}};SZN.AudioPlayer.prototype._eCanplay=function(){this.makeEvent("canplay");};SZN.AudioPlayer.prototype._eStalled=function(){this.makeEvent("stalled");};SZN.AudioPlayer.prototype._ePlay=function(){this.makeEvent("play");};SZN.AudioPlayer.prototype._ePause=function(){if(!this._audio.ended&&!this._flags.stopped){this.makeEvent("pause");}};SZN.AudioPlayer.prototype._eTimeupdate=function(){if(this._audio.paused){return;}this.makeEvent("timeupdate",{"currentTime":this._audio.currentTime,"duration":this._audio.duration});var time=Math.floor(this._audio.currentTime);if(time>this._flags.lastChangeTime){this._flags.lastChangeTime=time;this.makeEvent("normtimeupdate",{"currentTime":time,"duration":this._audio.duration});}};SZN.AudioPlayer.prototype._eSeeked=function(){this._flags.lastChangeTime=this._audio.currentTime;this.makeEvent("seekend",{"currentTime":this._audio.currentTime});};SZN.AudioPlayer.prototype._eEnded=function(){this.makeEvent("ended");};SZN.AudioPlayer.prototype._eVolumechange=function(){var level=this._audio.muted?0:this._audio.volume;this.makeEvent("volumechange",{"level":level});};SZN.AudioPlayer.prototype._eError=function(e,elm){console.error(e);};SZN.AudioPlayer.prototype._set=function(data){this._clear();var instance=this._getInstance(data.media);this._audio.poster=data.poster?data.poster:"";this._audio.src=instance?instance.source:"";this._audio.load();};SZN.AudioPlayer.prototype._clear=function(){this._flags.loadendFired=false;this._flags.lastChangeTime=0;this._flags.stopped=true;};SZN.AudioPlayer.prototype._getInstance=function(sources){var found=-1;var canPlay="";for(var i=0,len=sources.length;i<len;i++){canPlay=this._audio.canPlayType(sources[i].type);if(canPlay=="probably"){found=i;break;}else{if(canPlay=="maybe"&&found==-1){found=i;}}}return found>-1?sources[found]:null;};SZN.NovinkyAudioPlayer=SZN.ClassMaker.makeClass({"NAME":"NovinkyAudioPlayer","VERSION":"1.0","EXTEND":SZN.AudioPlayer});SZN.NovinkyAudioPlayer.prototype.$constructor=function(options){options=options||{};this._dom={};this._sc=[];this.$super(options);this._addControlsListeners();this._syncVolume();};SZN.NovinkyAudioPlayer.prototype._build=function(){this.$super();this._dom.container=SZN.cEl("div",null,"audioPlayer");this._dom.container.appendChild(this._audio);this._dom.controls=SZN.cEl("div",null,"controls");this._dom.container.appendChild(this._dom.controls);this._dom.toggle=SZN.cEl("div",null,"toggle");this._dom.toggle.style.display="none";this._dom.controls.appendChild(this._dom.toggle);this._dom.tButton=SZN.cEl("button",null,"tButton");this._dom.toggle.appendChild(this._dom.tButton);this._dom.progress=SZN.cEl("div",null,"progress");this._dom.controls.appendChild(this._dom.progress);this._dom.pWrapper=SZN.cEl("div",null,"pWrapper");this._dom.progress.appendChild(this._dom.pWrapper);this._dom.barContent=SZN.cEl("div",null,"barContent");this._dom.bar=SZN.cEl("div",null,"bar");this._dom.volumeWrapper=SZN.cEl("div",null,"volumeWrapper");this._dom.volume=SZN.cEl("div",null,"volume");this._dom.volumeWrapper.appendChild(this._dom.volume);this._dom.volumeMute=SZN.cEl("div",null,"volumeMute");this._dom.volume.appendChild(this._dom.volumeMute);this._dom.volumeMuteMask=SZN.cEl("div",null,"volumeMuteMask");this._dom.volumeMute.appendChild(this._dom.volumeMuteMask);this._dom.volumeMuteSel=SZN.cEl("div",null,"volumeMuteSelect");this._dom.volumeMute.appendChild(this._dom.volumeMuteSel);this._dom.volumeCtl=SZN.cEl("div",null,"volumeControl");this._dom.volume.appendChild(this._dom.volumeCtl);this._dom.volumeMask=SZN.cEl("div",null,"volumeMask");this._dom.volumeCtl.appendChild(this._dom.volumeMask);this._dom.volumeSel=SZN.cEl("div",null,"volumeSelect");this._dom.volumeCtl.appendChild(this._dom.volumeSel);this._dom.bar.appendChild(this._dom.volumeWrapper);this._dom.bar.appendChild(this._dom.barContent);this._dom.pWrapper.appendChild(this._dom.bar);this._dom.timeCurrent=SZN.cEl("div",null,"time timeOut timeCurrent");this._dom.timeCurrent.innerHTML=this._formatTime(0);this._dom.timeCurrent.style.display="none";this._dom.barContent.appendChild(this._dom.timeCurrent);this._dom.timeDuration=SZN.cEl("div",null,"time timeIn timeDuration");this._dom.timeDuration.innerHTML=this._formatTime(0);this._dom.timeDuration.style.display="none";this._dom.barContent.appendChild(this._dom.timeDuration);this._dom.loading=SZN.cEl("div",null,"loading");this._dom.loading.innerHTML="načítám ...";this._dom.loading.style.display="none";this._dom.barContent.appendChild(this._dom.loading);this._dom.pbLoad=SZN.cEl("div",null,"pbLoad");this._dom.barContent.appendChild(this._dom.pbLoad);this._dom.pbPlay=SZN.cEl("div",null,"pbPlay");this._dom.barContent.appendChild(this._dom.pbPlay);this._dom.timeCurrentDouble=SZN.cEl("div",null,"time timeIn timeCurrent");this._dom.timeCurrentDouble.innerHTML=this._formatTime(0);this._dom.pbPlay.appendChild(this._dom.timeCurrentDouble);this._dom.pbLeft=SZN.cEl("div",null,"pbLeft");this._dom.barContent.appendChild(this._dom.pbLeft);this._dom.pbLeft.style.display="none";this._dom.pbCtl=SZN.cEl("div",null,"pbControl");this._dom.barContent.appendChild(this._dom.pbCtl);this._dom.timeDurationDouble=SZN.cEl("div",null,"time timeOut timeDuration");this._dom.timeDurationDouble.innerHTML=this._formatTime(0);this._dom.pbLeft.appendChild(this._dom.timeDurationDouble);};SZN.NovinkyAudioPlayer.prototype.getElm=function(){return this._dom.container;};SZN.NovinkyAudioPlayer.prototype._formatTime=function(time){var fullSeconds=parseInt(time,10);var hours=Math.floor(fullSeconds/3600);var minutes=Math.floor((fullSeconds-(hours*3600))/60);var seconds=fullSeconds-(hours*3600)-(minutes*60);if(isNaN(seconds)||isNaN(minutes)){return "00:00";}var finalTime=(minutes>9?minutes:"0"+minutes)+":"+(seconds>9?seconds:"0"+seconds);if(hours>0){finalTime=hours+":"+finalTime;}return finalTime;};SZN.NovinkyAudioPlayer.prototype._syncToggle=function(){if(this.isPlaying()){SZN.Dom.removeClass(this._dom.tButton,"play");}else{SZN.Dom.addClass(this._dom.tButton,"play");}};SZN.NovinkyAudioPlayer.prototype._syncProgress=function(){var time=this.getCurrentTime();var duration=this.getDuration();var percent=((time/duration)*100);this._dom.pbPlay.style.width=percent+"%";this._dom.pbLeft.style.width=(100-percent)+"%";};SZN.NovinkyAudioPlayer.prototype._syncVolume=function(){var percent=0;if(!this.isMute()){var volume=this.getVolume();percent=volume*100;this._dom.volumeMuteSel.style.opacity=1;}else{this._dom.volumeMuteSel.style.opacity=0;}this._dom.volumeSel.style.width=percent+"%";};SZN.NovinkyAudioPlayer.prototype._addControlsListeners=function(){this._sc.push(this.addListener("setedmedia","_sSetedmedia"));this._sc.push(this.addListener("play","_sPlayPause"));this._sc.push(this.addListener("pause","_sPlayPause"));this._sc.push(this.addListener("ended","_sEnded"));this._sc.push(this.addListener("loadedmetadata","_sLoadedmetadata"));this._sc.push(this.addListener("timeupdate","_sTimeupdate"));this._sc.push(this.addListener("seekend","_sSeekend"));this._ec.push(SZN.Events.addListener(this._audio,"loadeddata",this,"_eLoadeddata"));this._ec.push(SZN.Events.addListener(this._dom.tButton,"click",this,"_eToggle"));this._ec.push(SZN.Events.addListener(this._dom.pbCtl,"click",this,"_eBarClick"));this._ec.push(SZN.Events.addListener(this._dom.volumeCtl,"click",this,"_eVolumeClick"));this._ec.push(SZN.Events.addListener(this._dom.volumeMute,"click",this,"_eMuteClick"));};SZN.NovinkyAudioPlayer.prototype._eLoadeddata=function(){this._dom.bar.style.width="99%";this._dom.loading.style.display="none";this._dom.timeCurrent.style.display="block";SZN.Dom.addClass(this._dom.bar,"loaded");setTimeout(function(){this._dom.volumeWrapper.style.opacity=1;this._dom.bar.style.borderColor="transparent";this._dom.bar.style.background="none";this._dom.timeDuration.style.display="block";this._dom.toggle.style.display="block";this._dom.pbLeft.style.display="block";}.bind(this),500);};SZN.NovinkyAudioPlayer.prototype._sSetedmedia=function(){var c=this._formatTime(0);var d=this._formatTime(this.getDuration());this._dom.timeCurrent.innerHTML=c;this._dom.timeDuration.innerHTML=d;this._dom.timeCurrentDouble.innerHTML=c;this._dom.timeDurationDouble.innerHTML=d;this._syncToggle();this._syncProgress();};SZN.NovinkyAudioPlayer.prototype._sPlayPause=function(){if(this._dom.bar.offsetWidth<40){this._dom.bar.style.width="80%";if(SZN.Browser.client=="ie"&&parseFloat(SZN.Browser.version)<=9){this._dom.loading.style.display="block";this._dom.bar.style.width="99%";}}this._syncToggle();};SZN.NovinkyAudioPlayer.prototype._sEnded=function(){this.stop();this._syncToggle();};SZN.NovinkyAudioPlayer.prototype._sLoadedmetadata=function(){var d=this._formatTime(this.getDuration());this._dom.timeDuration.innerHTML=d;this._dom.timeDurationDouble.innerHTML=d;};SZN.NovinkyAudioPlayer.prototype._sTimeupdate=function(){var c=this._formatTime(this.getCurrentTime());this._dom.timeCurrent.innerHTML=c;this._dom.timeCurrentDouble.innerHTML=c;this._syncProgress();};SZN.NovinkyAudioPlayer.prototype._sSeekend=function(){var c=this._formatTime(this.getCurrentTime());this._dom.timeCurrent.innerHTML=c;this._dom.timeCurrentDouble.innerHTML=c;this._syncProgress();};SZN.NovinkyAudioPlayer.prototype._eToggle=function(e){SZN.Events.cancelDef(e);if(this.isPlaying()){this.pause();}else{this.play();}};SZN.NovinkyAudioPlayer.prototype._eBarClick=function(e){SZN.Events.cancelDef(e);var client=this._dom.pbCtl.getBoundingClientRect();var clickPos=e.clientX-client.left;var percent=clickPos/this._dom.pbCtl.clientWidth;percent=Math.max(0,Math.min(1,percent));this.seek(parseInt(this.getDuration(),10)*percent);};SZN.NovinkyAudioPlayer.prototype._eVolumeClick=function(e){SZN.Events.cancelDef(e);SZN.Events.stopEvent(e);this.setMute(false);var client=this._dom.volumeCtl.getBoundingClientRect();var clickPos=e.clientX-client.left;var percent=clickPos/this._dom.volumeCtl.clientWidth;percent=Math.max(0,Math.min(1,percent));if(percent==0){this.setMute(true);}this.setVolume(percent);this._syncVolume();};SZN.NovinkyAudioPlayer.prototype._eMuteClick=function(e){SZN.Events.cancelDef(e);SZN.Events.stopEvent(e);this.setMute(!this.isMute());this._syncVolume();};SZN.NovinkyAudioFlashPlayer=SZN.ClassMaker.makeClass({"NAME":"NovinkyAudioFlashPlayer","VERSION":"1.0","IMPLEMENT":[SZN.SigInterface]});SZN.NovinkyAudioFlashPlayer.USE_OBJECT=document.attachEvent&&(typeof navigator.systemLanguage!="undefined");SZN.NovinkyAudioFlashPlayer.FLASH_SRC="";SZN.NovinkyAudioFlashPlayer.prototype.$constructor=function(options){this._instanceId="_afp_"+SZN.idGenerator();this._flash=null;this._url=null;};SZN.NovinkyAudioFlashPlayer.prototype.setMedia=function(mediaDescriptor){var sources=mediaDescriptor.media;for(var i=0;i<sources.length;i++){if(!(sources[i] instanceof Object)){throw new Error("Invalid media sources: "+sources);}if(sources[i].type==="audio/mpeg"){this._url=sources[i].source;break;}}this._init();};SZN.NovinkyAudioFlashPlayer.prototype._init=function(){window[this._instanceId]=this;var playCallbackName="novinkyAudioFlashPlayerPlayCallback_"+this._instanceId;window[playCallbackName]=function(){this.makeEvent("play");}.bind(this);var object_id="embed"+this._instanceId;width="100%",height="100%",wmode="direct";var flashVars="ready=window['"+this._instanceId+"'].f_onReady&amp;"+"label="+encodeURIComponent("poslechnout článek")+"&amp;"+"url="+encodeURIComponent(this._url)+"&amp;"+"onPlay="+encodeURIComponent(playCallbackName)+"&amp;";if(SZN.NovinkyAudioFlashPlayer.USE_OBJECT){var code="<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" width=\""+width+"\" height=\""+height+"\" id=\""+object_id+"\" align=\"middle\">"+"<param name=\"movie\" value=\""+SZN.NovinkyAudioFlashPlayer.FLASH_SRC+"\" />"+"<param name=\"quality\" value=\"high\" />"+"<param name=\"bgcolor\" value=\"#ffffff\" />"+"<param name=\"play\" value=\"true\" />"+"<param name=\"loop\" value=\"true\" />"+"<param name=\"wmode\" value=\""+wmode+"\" />"+"<param name=\"scale\" value=\"noscale\" />"+"<param name=\"menu\" value=\"true\" />"+"<param name=\"devicefont\" value=\"false\" />"+"<param name=\"salign\" value=\"lt\" />"+"<param name=\"allowScriptAccess\" value=\"always\" />"+"<param name=\"allowFullScreen\" value=\"true\" />"+"<param name=\"flashVars\" value=\""+flashVars+"\" />"+"</object>";}else{var code="<embed "+"src=\""+SZN.NovinkyAudioFlashPlayer.FLASH_SRC+"\""+"quality=\"high\""+"bgcolor=\"#ffffff\""+"wmode=\""+wmode+"\""+"allowfullscreen=\"true\""+"allowscriptaccess=\"always\""+"type=\"application/x-shockwave-flash\""+"scale=\"noscale\""+"salign=\"lt\""+"width=\""+width+"\""+"height=\""+height+"\""+"name=\""+object_id+"\""+"id=\""+object_id+"\""+"flashvars=\""+flashVars+"\""+"></embed>";}var elm=SZN.cEl("div");elm.innerHTML=code;this._flash=elm.firstChild;};SZN.NovinkyAudioFlashPlayer.prototype.getElm=function(){return this._flash;};SZN.Sticky=SZN.ClassMaker.makeClass({"NAME":"Sticky","VERSION":"1.0","CLASS":"class"});SZN.Sticky.prototype.$constructor=function(blockId,startId,stopId,advert){this.IE=document.attachEvent&&!window.opera;this.topDivFix=5;this.div=this._gEl(blockId);this.div.style.position="absolute";this.divStartPosition=null;this.divStart=this._gEl(startId);this.divStop=this._gEl(stopId);if(SZN.Dom.hasClass(this.div,"adFull")){SZN.Dom.addClass(this.div.parentNode,"adFull");}this.onPosition=false;this.limiter=null;this.limiterPositon=null;this.timer=null;this.containers={"adSky":true,"adSkyscraperWrapper":true,"adSkyBottom":true,"adSkyBottomWrapper":true};this.divParent=null;this.leftOffset=this._getHorizontalPosition(this.div);this.checkInterval=window.setInterval(function(){this._checkDOMPosition();this._startMove();}.bind(this),100);var startPostion=this._getPosition(this.divStart);var endPosition=this._getPosition(this.divStop);this.advertHeight=0;try{this.advertHeight=advert.ad.spots[0].height+12;}catch(e){}var height=endPosition-startPostion;this.div.parentNode.style.height=height+"px";this.div.parentNode.style.minHeight=this.advertHeight+"px";};SZN.Sticky.prototype._checkDOMPosition=function(){var p=this.div;while(p.parentNode){if(typeof p.parentNode.id!="undefined"){if(p.parentNode.id in this.containers){this.onPosition=true;this.divParent=p.parentNode;this._startMove();break;}}p=p.parentNode;}},SZN.Sticky.prototype._startMove=function(){this.divParent.style.paddingTop="0";this.divParent.style.backgroundImage="none";window.clearInterval(this.checkInterval);SZN.Events.addListener(window,"scroll",this,"_moveSlower");this.timer=window.setInterval(function(){this._move();}.bind(this),10);},SZN.Sticky.prototype._moveSlower=function(){if(this.timer!=null){window.clearTimeout(this.timer);}this._move();},SZN.Sticky.prototype._move=function(){this.limiter=this.divStop||null;this.divHeight=this.div.offsetHeight;this.divPosition=this._getPosition(this.divStart);if(this.divStartPosition==null||this.divStartPosition!=this.divPosition){this.divStartPosition=this.divPosition;}if(document.documentElement&&document.documentElement.scrollTop){var pos=document.documentElement.scrollTop;}else{if(document.body){var pos=document.body.scrollTop;}}if(this.limiter){this.limiterPosition=this._getPosition(this.limiter);}var h=this.limiterPosition-this.divPosition-7;if(this.div.parentNode.offsetHeight<h){this.div.parentNode.style.height=h+"px";}if(pos>this.divStartPosition){if(this.limiter&&((pos+this.divHeight)>=this.limiterPosition)){this.div.style.position="absolute";this.div.style.top="";this.div.style.bottom="0";this.div.style.left="";}else{this.div.style.bottom="";if(this.IE){this.div.style.top=(pos-this.divStartPosition+this.topDivFix)+"px";}else{this.div.style.top=this.topDivFix+"px";this.div.style.position="fixed";}}}else{this.div.style.bottom="";this.div.style.top="auto";this.div.style.left="";if(!this.IE){this.div.style.position="absolute";}}},SZN.Sticky.prototype._getPosition=function(node){var offset=0;while(node){offset+=node.offsetTop;node=node.offsetParent;}return offset;},SZN.Sticky.prototype._getHorizontalPosition=function(node){var offset=0;while(node){offset+=node.offsetLeft;node=node.offsetParent;}return offset;},SZN.Sticky.prototype._addListener=function(elm,eventType,fn,set){if(document.addEventListener){if(window.opera&&(elm==window)){elm=document;}elm.addEventListener(eventType,fn,set);}else{if(document.attachEvent){elm.attachEvent("on"+eventType,fn);}}},SZN.Sticky.prototype._gEl=function(id){return document.getElementById(id);};var AdBlockTest=function(){var testDiv=document.createElement("div");testDiv.style.cssText="display: block;position:absolute;top:-10000px;left:-10000px;width:1px;height:1px;";testDiv.className="ad-content";document.body.appendChild(testDiv);var getBrowserId=function(){var ua=navigator.userAgent,tem,M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(M[1])){tem=/\brv[ :]+(\d+)/g.exec(ua)||[];return "IE "+(tem[1]||"");}if(M[1]==="Chrome"){tem=ua.match(/\b(OPR|Edge)\/(\d+)/);if(tem!=null)return tem.slice(1).join(" ").replace("OPR","Opera");}M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"];if((tem=ua.match(/version\/(\d+)/i))!=null)M.splice(1,1,tem[1]);return M.join(" ");};var isMobile=function(){return false;};var isAdBlock=function(){return !!!testDiv.clientWidth;};var run=function(){if(!window["path_statsweb"])return;var element=document.createElement("img");element.src=window["path_statsweb"]+"?state="+(+isAdBlock())+"&mobile="+(+isMobile())+"&browser="+encodeURIComponent(getBrowserId());element.className="blind";element.alt="";document.body.appendChild(element);};run();};window.addEventListener("load",function(event){new AdBlockTest();});document.addEventListener("DOMContentLoaded",function(event){var timeMeter={};timeMeter.sendHitAfter=10000;timeMeter.startTime=0;timeMeter.endTime=0;timeMeter.startMeasuring=function(){if(timeMeter.startTime){var prevActiveTime=timeMeter.getPrevActiveTime();timeMeter.startTime=Date.now()-prevActiveTime;timeMeter.sendHitAfter-=prevActiveTime;}else{timeMeter.startTime=Date.now();}timeMeter.checkActiveTime();};timeMeter.stopMeasuring=function(){clearTimeout(timeMeter.timeout);timeMeter.endTime=Date.now();};timeMeter.toggleTime=function(){if(document[timeMeter.hidden]){timeMeter.stopMeasuring();}else{timeMeter.startMeasuring();}};timeMeter.getPrevActiveTime=function(){return timeMeter.endTime-timeMeter.startTime;};timeMeter.watchVisibility=function(){timeMeter.hidden="hidden";timeMeter.visibilityChange="visibilitychange";if(typeof document.hidden!=="undefined"){timeMeter.hidden="hidden";timeMeter.visibilityChange="visibilitychange";}else{if(typeof document.msHidden!=="undefined"){timeMeter.hidden="msHidden";timeMeter.visibilityChange="msvisibilitychange";}else{if(typeof document.webkitHidden!=="undefined"){timeMeter.hidden="webkitHidden";timeMeter.visibilityChange="webkitvisibilitychange";}}}document.addEventListener(timeMeter.visibilityChange,timeMeter.toggleTime);};timeMeter.stopWatchingVisibility=function(){document.removeEventListener(timeMeter.visibilityChange,timeMeter.toggleTime);};timeMeter.activityInterval=function(){timeMeter.stopWatchingVisibility();DOT.hit("event",{"d":{"action":"dop-read","id":34851}});};timeMeter.checkActiveTime=function(){timeMeter.timeout=setTimeout(timeMeter.activityInterval,timeMeter.sendHitAfter);};timeMeter.isIE=function(){var myNav=navigator.userAgent.toLowerCase();return (myNav.indexOf("msie")!=-1)?parseInt(myNav.split("msie")[1]):false;};if(!timeMeter.isIE()||timeMeter.isIE()&&timeMeter.isIE()>9){timeMeter.startMeasuring();timeMeter.watchVisibility();}});}
